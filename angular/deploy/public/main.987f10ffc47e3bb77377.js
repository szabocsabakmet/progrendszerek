(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return on}),n.d(e,"b",function(){return Ya}),n.d(e,"c",function(){return Ga}),n.d(e,"d",function(){return Ha}),n.d(e,"e",function(){return za}),n.d(e,"f",function(){return Hu}),n.d(e,"g",function(){return Du}),n.d(e,"h",function(){return Js}),n.d(e,"i",function(){return au}),n.d(e,"j",function(){return _s}),n.d(e,"k",function(){return Za}),n.d(e,"l",function(){return Ss}),n.d(e,"m",function(){return mr}),n.d(e,"n",function(){return Ca}),n.d(e,"o",function(){return Xi}),n.d(e,"p",function(){return Tn}),n.d(e,"q",function(){return N}),n.d(e,"r",function(){return rn}),n.d(e,"s",function(){return go}),n.d(e,"t",function(){return zs}),n.d(e,"u",function(){return Qs}),n.d(e,"v",function(){return Xa}),n.d(e,"w",function(){return ua}),n.d(e,"x",function(){return Pu}),n.d(e,"y",function(){return aa}),n.d(e,"z",function(){return xu}),n.d(e,"A",function(){return lu}),n.d(e,"B",function(){return Sn}),n.d(e,"C",function(){return $a}),n.d(e,"D",function(){return Wa}),n.d(e,"E",function(){return xs}),n.d(e,"F",function(){return Is}),n.d(e,"G",function(){return _r}),n.d(e,"H",function(){return js}),n.d(e,"I",function(){return fr}),n.d(e,"J",function(){return Cn}),n.d(e,"K",function(){return Vu}),n.d(e,"L",function(){return ra}),n.d(e,"M",function(){return mu}),n.d(e,"N",function(){return sn}),n.d(e,"O",function(){return Ns}),n.d(e,"P",function(){return ks}),n.d(e,"Q",function(){return la}),n.d(e,"R",function(){return V}),n.d(e,"S",function(){return Au}),n.d(e,"T",function(){return Cu}),n.d(e,"U",function(){return w}),n.d(e,"V",function(){return Su}),n.d(e,"W",function(){return qu}),n.d(e,"X",function(){return wu}),n.d(e,"Y",function(){return Ja}),n.d(e,"Z",function(){return to}),n.d(e,"ab",function(){return as}),n.d(e,"bb",function(){return lr}),n.d(e,"cb",function(){return Kn}),n.d(e,"db",function(){return Ln}),n.d(e,"eb",function(){return Vn}),n.d(e,"fb",function(){return Bn}),n.d(e,"gb",function(){return Un}),n.d(e,"hb",function(){return Fn}),n.d(e,"ib",function(){return qn}),n.d(e,"jb",function(){return rs}),n.d(e,"kb",function(){return Uu}),n.d(e,"lb",function(){return is}),n.d(e,"mb",function(){return os}),n.d(e,"nb",function(){return Mn}),n.d(e,"ob",function(){return H}),n.d(e,"pb",function(){return To}),n.d(e,"qb",function(){return Mo}),n.d(e,"rb",function(){return Po}),n.d(e,"sb",function(){return Lo}),n.d(e,"tb",function(){return ns}),n.d(e,"ub",function(){return kt}),n.d(e,"vb",function(){return m}),n.d(e,"wb",function(){return Pn}),n.d(e,"xb",function(){return mo}),n.d(e,"yb",function(){return St}),n.d(e,"zb",function(){return vs}),n.d(e,"Ab",function(){return ii}),n.d(e,"Bb",function(){return Io}),n.d(e,"Cb",function(){return zo}),n.d(e,"Db",function(){return Fa}),n.d(e,"Eb",function(){return tt}),n.d(e,"Fb",function(){return at}),n.d(e,"Gb",function(){return O}),n.d(e,"Hb",function(){return T}),n.d(e,"Ib",function(){return it}),n.d(e,"Jb",function(){return ut}),n.d(e,"Kb",function(){return Ao}),n.d(e,"Lb",function(){return Ro}),n.d(e,"Mb",function(){return Do}),n.d(e,"Nb",function(){return No}),n.d(e,"Ob",function(){return Ze}),n.d(e,"Pb",function(){return Xo}),n.d(e,"Qb",function(){return _n}),n.d(e,"Rb",function(){return tn}),n.d(e,"Sb",function(){return Ba}),n.d(e,"Tb",function(){return Vo}),n.d(e,"Ub",function(){return Ua}),n.d(e,"Vb",function(){return jo}),n.d(e,"Wb",function(){return Sa}),n.d(e,"Xb",function(){return Va}),n.d(e,"Yb",function(){return dr}),n.d(e,"Zb",function(){return ot}),n.d(e,"ac",function(){return xo}),n.d(e,"bc",function(){return $o}),n.d(e,"cc",function(){return Yo}),n.d(e,"dc",function(){return Jo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("7o/Q");function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function y(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function m(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(m).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function v(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const b=g({__forward_ref__:g});function w(t){return t.__forward_ref__=w,t.toString=function(){return m(this())},t}function _(t){return E(t)?t():t}function E(t){return"function"==typeof t&&t.hasOwnProperty(b)&&t.__forward_ref__===w}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function T(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function S(t){return C(t,x)||C(t,j)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(A)||t.hasOwnProperty(k))?t[A]:null}const x=g({"\u0275prov":g}),A=g({"\u0275inj":g}),j=g({ngInjectableDef:g}),k=g({ngInjectorDef:g});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let D;function R(t){const e=D;return D=t,e}function P(t,e,n){const r=S(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&N.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${m(t)}]`)}function L(t){return{toString:t}.toString()}var M=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),V=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,B="undefined"!=typeof global&&global,H=F||B||U||q,z={},G=[],Q=g({"\u0275cmp":g}),K=g({"\u0275dir":g}),W=g({"\u0275pipe":g}),$=g({"\u0275mod":g}),Y=g({"\u0275loc":g}),J=g({"\u0275fac":g}),X=g({__NG_ELEMENT_ID__:g});let Z=0;function tt(t){return L(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||V.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[K]||null}(t)}function nt(t){return function(t){return t[W]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&L(()=>{rt[t.id]=t.type}),e}function ot(t,e){return L(()=>{const n=lt(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function st(t,e){if(null==t)return z;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[Q]||null}function lt(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${m(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function yt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(J)?t[J]:null}class wt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function _t(t){return"string"==typeof t?t:null==t?"":String(t)}function Et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_t(t)}function Ot(t,e){const n=e?` in ${e}`:"";throw new wt("201",`No provider for ${Et(t)} found${n}`)}class Tt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function St(){return Ct}function Ct(t){return t.type.prototype.ngOnChanges&&(t.setInput=xt),It}function It(){const t=At(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===z)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function xt(t,e,n,r){const i=At(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:z,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Tt(u&&u.currentValue,e,s===z),t[r]=e}function At(t){return t.__ngSimpleChanges__||null}let jt;function kt(t){jt=t}function Nt(t){return!!t.listen}St.ngInherit=!0;const Dt={createRenderer:(t,e)=>void 0!==jt?jt:"undefined"!=typeof document?document:void 0};function Rt(t){for(;Array.isArray(t);)t=t[0];return t}function Pt(t,e){return Rt(e[t])}function Lt(t,e){return Rt(e[t.index])}function Mt(t,e){return t.data[e]}function Vt(t,e){const n=e[t];return dt(n)?n:n[0]}function Ft(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ut(t){return 4==(4&t[2])}function qt(t){return 128==(128&t[2])}function Bt(t,e){return null==e?null:t[e]}function Ht(t){t[18]=0}function zt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Gt={lFrame:le(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Qt(){return Gt.bindingsEnabled}function Kt(){return Gt.lFrame.lView}function Wt(){return Gt.lFrame.tView}function $t(){let t=Yt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Yt(){return Gt.lFrame.currentTNode}function Jt(t,e){const n=Gt.lFrame;n.currentTNode=t,n.isParent=e}function Xt(){return Gt.lFrame.isParent}function Zt(){return Gt.isInCheckNoChangesMode}function te(t){Gt.isInCheckNoChangesMode=t}function ee(){return Gt.lFrame.bindingIndex++}function ne(t,e){const n=Gt.lFrame;n.bindingIndex=n.bindingRootIndex=t,re(e)}function re(t){Gt.lFrame.currentDirectiveIndex=t}function ie(){return Gt.lFrame.currentQueryIndex}function oe(t){Gt.lFrame.currentQueryIndex=t}function se(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ae(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=se(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Gt.lFrame=ce();return r.currentTNode=e,r.lView=t,!0}function ue(t){const e=ce(),n=t[1];Gt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ce(){const t=Gt.lFrame,e=null===t?null:t.child;return null===e?le(t):e}function le(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function he(){const t=Gt.lFrame;return Gt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const fe=he;function de(){const t=he();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pe(){return Gt.lFrame.selectedIndex}function ge(t){Gt.lFrame.selectedIndex=t}function ye(){const t=Gt.lFrame;return Mt(t.tView,t.selectedIndex)}function me(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ve(t,e,n){_e(t,e,3,n)}function be(t,e,n,r){(3&t[2])===n&&_e(t,e,n,r)}function we(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function _e(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Ee(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Ee(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Oe=-1;class Te{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Se(t,e,n){const r=Nt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ie(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ce(t){return 3===t||4===t||6===t}function Ie(t){return 64===t.charCodeAt(0)}function xe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ae(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ae(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function je(t){return t!==Oe}function ke(t){return 32767&t}function Ne(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let De=!0;function Re(t){const e=De;return De=t,e}let Pe=0;function Le(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Me(r.data,t),Me(e,null),Me(r.blueprint,null));const i=Fe(t,e),o=t.injectorIndex;if(je(i)){const t=ke(i),n=Ne(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Me(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Fe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Oe;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Oe}function Ue(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(X)&&(r=n[X]),null==r&&(r=n[X]=Pe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function qe(t,e,n){if(n&N.Optional)return t;Ot(e,"NodeInjector")}function Be(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],o=R(void 0);try{return i?i.get(e,r,n&N.Optional):P(e,r,n&N.Optional)}finally{R(o)}}return qe(r,e,n)}function He(t,e,n,r=N.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(X)?t[X]:void 0;return"number"==typeof e?e>=0?255&e:Ge:e}(n);if("function"==typeof o){if(!ae(e,t,r))return r&N.Host?qe(i,n,r):Be(e,n,r,i);try{const t=o();if(null!=t||r&N.Optional)return t;Ot(n)}finally{fe()}}else if("number"==typeof o){let i=null,s=Ve(t,e),a=Oe,u=r&N.Host?e[16][6]:null;for((-1===s||r&N.SkipSelf)&&(a=-1===s?Fe(t,e):e[s+8],a!==Oe&&Ye(r,!1)?(i=e[1],s=ke(a),e=Ne(a,e)):s=-1);-1!==s;){const t=e[1];if($e(o,s,t.data)){const t=Qe(s,e,n,i,r,u);if(t!==ze)return t}a=e[s+8],a!==Oe&&Ye(r,e[1].data[s+8]===u)&&$e(o,s,e)?(i=t,s=ke(a),e=Ne(a,e)):s=-1}}}return Be(e,n,r,i)}const ze={};function Ge(){return new Je($t(),Kt())}function Qe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ke(a,s,n,null==r?yt(a)&&De:r!=s&&0!=(3&a.type),i&N.Host&&o===a);return null!==u?We(e,s,u,a):ze}function Ke(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function We(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Te){const s=i;s.resolving&&function(t,e){throw new wt("200",`Circular dependency in DI detected for ${t}`)}(Et(o[n]));const a=Re(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?R(s.injectImpl):null;ae(t,r,N.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ct(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&R(u),Re(a),s.resolving=!1,fe()}}return i}function $e(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ye(t,e){return!(t&N.Self||t&N.Host&&e)}class Je{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return He(this._tNode,this._lView,t,void 0,e)}}function Xe(t){const e=t;if(E(t))return()=>{const t=Xe(_(e));return t?t():null};let n=bt(e);if(null===n){const t=I(e);n=t&&t.factory}return n||null}function Ze(t){return L(()=>{const e=t.prototype.constructor,n=e[J]||Xe(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[J]||Xe(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function tn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ce(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}($t(),t)}const en="__parameters__";function nn(t,e,n){return L(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(en)?t[en]:Object.defineProperty(t,en,{value:[]})[en];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class rn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const on=new rn("AnalyzeForEntryComponents"),sn=Function;function an(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),an(r,e)):e!==t&&e.push(r)}return e}function un(t,e){t.forEach(t=>Array.isArray(t)?un(t,e):e(t))}function cn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ln(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hn(t,e,n){let r=dn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function fn(t,e){const n=dn(t,e);if(n>=0)return t[1|n]}function dn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const pn={},gn=/\n/gm,yn="__source",mn=g({provide:String,useValue:g});let vn;function bn(t){const e=vn;return vn=t,e}function wn(t,e=N.Default){if(void 0===vn)throw new Error("inject() must be called from an injection context");return null===vn?P(t,void 0,e):vn.get(t,e&N.Optional?null:void 0,e)}function _n(t,e=N.Default){return(D||wn)(_(t),e)}function En(t){const e=[];for(let n=0;n<t.length;n++){const r=_(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(_n(t,n))}else e.push(_n(r))}return e}function On(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Tn=On(nn("Inject",t=>({token:t})),-1),Sn=On(nn("Optional"),8),Cn=On(nn("SkipSelf"),4);let In;function xn(t){var e;return(null===(e=function(){if(void 0===In&&(In=null,H.trustedTypes))try{In=H.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return In}())||void 0===e?void 0:e.createHTML(t))||t}class An{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class jn extends An{getTypeName(){return"HTML"}}class kn extends An{getTypeName(){return"Style"}}class Nn extends An{getTypeName(){return"Script"}}class Dn extends An{getTypeName(){return"URL"}}class Rn extends An{getTypeName(){return"ResourceURL"}}function Pn(t){return t instanceof An?t.changingThisBreaksApplicationSecurity:t}function Ln(t,e){const n=Mn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Mn(t){return t instanceof An&&t.getTypeName()||null}function Vn(t){return new jn(t)}function Fn(t){return new kn(t)}function Un(t){return new Nn(t)}function qn(t){return new Dn(t)}function Bn(t){return new Rn(t)}class Hn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(xn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class zn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=xn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=xn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Gn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Kn(t){return(t=String(t)).match(Gn)||t.match(Qn)?t:"unsafe:"+t}function Wn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function $n(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Yn=Wn("area,br,col,hr,img,wbr"),Jn=Wn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xn=Wn("rp,rt"),Zn=$n(Xn,Jn),tr=$n(Yn,$n(Jn,Wn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$n(Xn,Wn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zn),er=Wn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nr=Wn("srcset"),rr=$n(er,nr,Wn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ir=Wn("script,style,template");class or{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!tr.hasOwnProperty(e))return this.sanitizedSomething=!0,!ir.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!rr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;er[o]&&(s=Kn(s)),nr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Kn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ur(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();tr.hasOwnProperty(e)&&!Yn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ur(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const sr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ar=/([^\#-~ |!])/g;function ur(t){return t.replace(/&/g,"&amp;").replace(sr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ar,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cr;function lr(t,e){let n=null;try{cr=cr||function(t){const e=new zn(t);return function(){try{return!!(new window.DOMParser).parseFromString(xn(""),"text/html")}catch(t){return!1}}()?new Hn(e):e}(t);let r=e?String(e):"";n=cr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=cr.getInertBodyElement(r)}while(r!==o);return xn((new or).sanitizeChildren(hr(n)||n))}finally{if(n){const t=hr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function hr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function dr(t){const e=function(){const t=Kt();return t&&t[12]}();return e?e.sanitize(fr.URL,t)||"":Ln(t,"URL")?Pn(t):Kn(_t(t))}function pr(t){return t.ngDebugContext}function gr(t){return t.ngOriginalError}function yr(t,...e){t.error(...e)}class mr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||yr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?pr(t)?pr(t):this._findContext(gr(t)):null}_findOriginalError(t){let e=gr(t);for(;e&&gr(e);)e=gr(e);return e}}function vr(t,e){t.__ngContext__=e}const br=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(H))();function wr(t){return t instanceof Function?t():t}var _r=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Er(t,e){return(void 0)(t,e)}function Or(t){const e=t[3];return pt(e)?e[3]:e}function Tr(t){return Cr(t[13])}function Sr(t){return Cr(t[4])}function Cr(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Ir(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=Rt(r);0===t&&null!==n?null==i?Rr(e,n,a):Dr(e,n,a,i||null,!0):1===t&&null!==n?Dr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Lr(t,e);r&&function(t,e,n,r){Nt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Rt(n)&&Ir(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];Br(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function xr(t,e,n){return Nt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ar(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,zt(i,-1)),n.splice(r,1)}function jr(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ar(o,r),e>0&&(t[n-1][4]=r[4]);const s=ln(t,ft+e);Br(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function kr(t,e){if(!(256&e[2])){const n=e[11];Nt(n)&&n.destroyNode&&Br(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Nr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Nr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Nr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Nr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Te)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Rt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Nt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Ar(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n,r,i){Nt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Rr(t,e,n){Nt(t)?t.appendChild(e,n):e.appendChild(n)}function Pr(t,e,n,r,i){null!==r?Dr(t,e,n,r,i):Rr(t,e,n)}function Lr(t,e){return Nt(t)?t.parentNode(e):e.parentNode}function Mr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===V.None||e===V.Emulated)return null}return Lt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Lt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Pr(o,i,n[a],s,!1);else Pr(o,i,n,s,!1)}function Vr(t,e){if(null!==e){const n=e.type;if(3&n)return Lt(e,t);if(4&n)return Ur(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Vr(t,n);{const n=t[e.index];return pt(n)?Ur(-1,n):Rt(n)}}if(32&n)return Er(e,t)()||Rt(t[e.index]);{const n=Fr(t,e);return null!==n?Array.isArray(n)?n[0]:Vr(Or(t[16]),n):Vr(t,e.next)}}return null}function Fr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ur(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Vr(t,r)}return e[7]}function qr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&vr(Rt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)qr(t,e,n.child,r,i,o,!1),Ir(e,t,i,a,o);else if(32&u){const s=Er(n,r);let u;for(;u=s();)Ir(e,t,i,u,o);Ir(e,t,i,a,o)}else 16&u?Hr(t,e,r,n,i,o):Ir(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Br(t,e,n,r,i,o){qr(n,r,t.firstChild,e,i,o,!1)}function Hr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ir(e,t,i,a[u],o);else qr(t,e,a,s[3],i,o,!0)}function zr(t,e,n){Nt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Gr(t,e,n){Nt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Qr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Kr="ng-template";function Wr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Qr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function $r(t){return 4===t.type&&t.value!==Kr}function Yr(t,e,n){return e===(4!==t.type||n?t.value:Kr)}function Jr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ce(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Yr(t,u,n)||""===u&&1===e.length){if(Xr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Wr(t.attrs,c,n)){if(Xr(r))return!1;s=!0}continue}const l=Zr(8&r?"class":u,i,$r(t),n);if(-1===l){if(Xr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Qr(e,c,0)||2&r&&c!==t){if(Xr(r))return!1;s=!0}}}}else{if(!s&&!Xr(r)&&!Xr(u))return!1;if(s&&Xr(u))continue;s=!1,r=u|1&r}}return Xr(r)||s}function Xr(t){return 0==(1&t)}function Zr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ti(t,e,n=!1){for(let r=0;r<e.length;r++)if(Jr(t,e[r],n))return!0;return!1}function ei(t,e){return t?":not("+e.trim()+")":e}function ni(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Xr(s)||(e+=ei(o,i),i=""),r=s,o=o||!Xr(r);n++}return""!==i&&(e+=ei(o,i)),e}const ri={};function ii(t){oi(Wt(),Kt(),pe()+t,Zt())}function oi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ve(e,r,n)}else{const r=t.preOrderHooks;null!==r&&be(e,r,0,n)}ge(n)}function si(t,e){return t<<17|e<<2}function ai(t){return t>>17&32767}function ui(t){return 2|t}function ci(t){return(131068&t)>>2}function li(t,e){return-131069&t|e<<2}function hi(t){return 1|t}function fi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];oe(i),n.contentQueries(2,e[o],o)}}}function di(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ht(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function pi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Yt(),s=Xt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Gt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Gt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Jt(o,!0),o}function gi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function yi(t,e,n){ue(e);try{const r=t.viewQuery;null!==r&&Gi(1,r,n);const i=t.template;null!==i&&bi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fi(t,e),t.staticViewQueries&&Gi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ui(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,de()}}function mi(t,e,n,r){const i=e[2];if(256==(256&i))return;ue(e);const o=Zt();try{Ht(e),Gt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&bi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ve(e,n,null)}else{const n=t.preOrderHooks;null!==n&&be(e,n,0,null),we(e,0)}if(function(t){for(let e=Tr(t);null!==e;e=Sr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&zt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Tr(t);null!==e;e=Sr(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];qt(n)&&mi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&fi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ve(e,n)}else{const n=t.contentHooks;null!==n&&be(e,n,1),we(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ge(~r);else{const i=r,o=n[++t],s=n[++t];ne(o,i),s(2,e[i])}}}finally{ge(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Vi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Gi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ve(e,n)}else{const n=t.viewHooks;null!==n&&be(e,n,2),we(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,zt(e[3],-1))}finally{de()}}function vi(t,e,n,r){const i=e[10],o=!Zt(),s=Ut(e);try{o&&!s&&i.begin&&i.begin(),s&&yi(t,e,r),mi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function bi(t,e,n,r,i){const o=pe();try{ge(-1),2&r&&e.length>ht&&oi(t,e,ht,Zt()),n(r,i)}finally{ge(o)}}function wi(t,e,n){Qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Le(n,e),vr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Ri(e,n,r);const u=We(e,t,a,n);vr(u,e),null!==s&&Pi(0,a-i,u,r,0,s),o&&(Vt(n.index,e)[8]=u)}}(t,e,n,Lt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Gt.lFrame.currentDirectiveIndex;try{ge(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];re(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ai(r,i)}}finally{ge(-1),re(s)}}(t,e,n))}function _i(t,e,n=Lt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ei(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Oi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Oi(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ri);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ti(t,e,n,r){const i=Ki(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Wi(t).push(r,i.length-1))}function Si(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ci(t,e,n,r,i,o,s,a){const u=Lt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Yi(t,n,c,r,i),yt(e)&&function(t,e){const n=Vt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Nt(o)?o.setProperty(u,r,i):Ie(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ii(t,e,n,r){let i=!1;if(Qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ti(n,s.selectors,!1)&&(i||(i=[]),Ue(Le(n,e),t,s.type),vt(s)?(ji(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ni(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=gi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=xe(n.mergedAttrs,c.hostAttrs),Di(t,n,e,u,c),ki(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||$r(e)?null:Li(n,i);o.push(c),s=Si(n,u,s),a=Si(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new wt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=xe(n.mergedAttrs,n.attrs),i}function xi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ai(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ji(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ki(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function Ni(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Di(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new Te(o,vt(i),null);t.blueprint[r]=s,n[r]=s,xi(t,e,0,r,gi(t,n,i.hostVars,ri),i)}function Ri(t,e,n){const r=Lt(e,t),i=Ei(n),o=t[10],s=qi(t,di(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Pi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Li(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Mi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Vi(t,e){const n=Vt(e,t);if(qt(n)){const t=n[1];80&n[2]?mi(t,n,t.template,n[8]):n[5]>0&&Fi(n)}}function Fi(t){for(let n=Tr(t);null!==n;n=Sr(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];mi(t,e,t.template,e[8])}else e[5]>0&&Fi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Vt(e[n],t);qt(r)&&r[5]>0&&Fi(r)}}function Ui(t,e){const n=Vt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),yi(r,n,n[8])}function qi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Bi(t){for(;t;){t[2]|=64;const e=Or(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Hi(t,e,n){const r=e[10];r.begin&&r.begin();try{mi(t,e,t.template,n)}catch(i){throw $i(e,i),i}finally{r.end&&r.end()}}function zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ft(n),i=r[1];vi(i,r,i.template,n)}}(t[8])}function Gi(t,e,n){oe(0),e(t,n)}const Qi=(()=>Promise.resolve(null))();function Ki(t){return t[7]||(t[7]=[])}function Wi(t){return t.cleanup||(t.cleanup=[])}function $i(t,e){const n=t[9],r=n?n.get(mr,null):null;r&&r.handleError(e)}function Yi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ji(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=v(i,t):2==o&&(r=v(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Xi=new rn("INJECTOR",-1);class Zi{get(t,e=pn){if(e===pn){const e=new Error(`NullInjectorError: No provider for ${m(t)}!`);throw e.name="NullInjectorError",e}return e}}const to=new rn("Set Injector scope."),eo={},no={},ro=[];let io;function oo(){return void 0===io&&(io=new Zi),io}function so(t,e=null,n=null,r){return new ao(t,n,e||oo(),r)}class ao{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&un(e,n=>this.processProvider(n,t,e)),un([t],t=>this.processInjectorType(t,[],i)),this.records.set(Xi,lo(void 0,this));const o=this.records.get(to);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:m(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=pn,n=N.Default){this.assertNotDestroyed();const r=bn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof rn)&&S(t);e=n&&this.injectableDefInScope(n)?lo(uo(t),eo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?oo():this.parent).get(t,e=n&N.Optional&&e===pn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(m(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[yn]&&i.unshift(e[yn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=m(e);if(Array.isArray(e))i=e.map(m).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):m(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(gn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{bn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(m(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=_(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{un(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];un(r,t=>this.processProvider(t,n,r||ro))}}this.injectorDefTypes.add(o),this.records.set(o,lo(r.factory,eo));const a=r.providers;if(null!=a&&!s){const e=t;un(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=fo(t=_(t))?t:_(t&&t.provide);const i=function(t,e,n){return ho(t)?lo(void 0,t.useValue):lo(co(t),eo)}(t);if(fo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=lo(void 0,eo,!0),e.factory=()=>En(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===eo&&(e.value=no,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function uo(t){const e=S(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;const r=I(t);if(null!==r)return r.factory;if(t instanceof rn)throw new Error(`Token ${m(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${m(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[x]||t[j]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function co(t,e,n){let r;if(fo(t)){const e=_(t);return bt(e)||uo(e)}if(ho(t))r=()=>_(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...En(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>_n(_(t.useExisting));else{const e=_(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||uo(e);r=()=>new e(...En(t.deps))}var i;return r}function lo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ho(t){return null!==t&&"object"==typeof t&&mn in t}function fo(t){return"function"==typeof t}const po=function(t,e,n){return function(t,e=null,n=null,r){const i=so(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let go=(()=>{class t{static create(t,e){return Array.isArray(t)?po(t,e,""):po(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=pn,t.NULL=new Zi,t.\u0275prov=O({token:t,providedIn:"any",factory:()=>_n(Xi)}),t.__NG_ELEMENT_ID__=-1,t})();function yo(t,e){me(Ft(t)[1],$t())}function mo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=vo(t.inputs),e.declaredInputs=vo(t.declaredInputs),e.outputs=vo(t.outputs);const n=i.hostBindings;n&&_o(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&bo(t,o),s&&wo(t,s),y(t.inputs,i.inputs),y(t.declaredInputs,i.declaredInputs),y(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===mo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xe(i.hostAttrs,n=xe(n,i.hostAttrs))}}(r)}function vo(t){return t===z?{}:t===G?[]:t}function bo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function wo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function _o(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Eo=null;function Oo(){if(!Eo){const t=H.Symbol;if(t&&t.iterator)Eo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Eo=n)}}}return Eo}function To(t){return!!So(t)&&(Array.isArray(t)||!(t instanceof Map)&&Oo()in t)}function So(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Co(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Io(t,e,n,r){const i=Kt();return Co(i,ee(),e)&&(Wt(),function(t,e,n,r,i,o){const s=Lt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Nt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?_t(o):s(o,r||"",i);Nt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ye(),i,t,e,n,r)),Io}function xo(t,e,n,r,i,o,s,a){const u=Kt(),c=Wt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=pi(e,t,4,s||null,Bt(c,a));Ii(e,n,l,Bt(c,u)),me(e,l);const h=l.tViews=Oi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Jt(h,!1);const f=u[11].createComment("");Mr(c,u,f,h),vr(f,u),qi(u,u[l]=Mi(f,u,f,h)),mt(h)&&wi(c,u,h),null!=s&&_i(u,h,a)}function Ao(t,e=N.Default){const n=Kt();return null===n?_n(t,e):He($t(),n,_(t),e)}function jo(t,e,n){const r=Kt();return Co(r,ee(),e)&&Ci(Wt(),ye(),r,t,e,r[11],n,!1),jo}function ko(t,e,n,r,i){const o=i?"class":"style";Yi(t,n,e.inputs[o],o,r)}function No(t,e,n,r){const i=Kt(),o=Wt(),s=ht+t,a=i[11],u=i[s]=xr(a,e,Gt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=pi(e,t,2,i,Bt(a,o));return Ii(e,n,u,Bt(a,s)),null!==u.attrs&&Ji(u,u.attrs,!1),null!==u.mergedAttrs&&Ji(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Jt(c,!0);const l=c.mergedAttrs;null!==l&&Se(a,u,l);const h=c.classes;null!==h&&Gr(a,u,h);const f=c.styles;null!==f&&zr(a,u,f),64!=(64&c.flags)&&Mr(o,i,u,c),0===Gt.lFrame.elementDepthCount&&vr(u,i),Gt.lFrame.elementDepthCount++,mt(c)&&(wi(o,i,c),function(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&_i(i,c)}function Do(){let t=$t();Xt()?Gt.lFrame.isParent=!1:(t=t.parent,Jt(t,!1));const e=t;Gt.lFrame.elementDepthCount--;const n=Wt();n.firstCreatePass&&(me(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ko(n,e,Kt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ko(n,e,Kt(),e.stylesWithoutHost,!1)}function Ro(t,e,n,r){No(t,e,n,r),Do()}function Po(t){return!!t&&"function"==typeof t.then}function Lo(t){return!!t&&"function"==typeof t.subscribe}const Mo=Lo;function Vo(t,e,n=!1,r){const i=Kt(),o=Wt(),s=$t();return function(t,e,n,r,i,o,s=!1,a){const u=mt(r),c=t.firstCreatePass&&Wi(t),l=Ki(e);let h=!0;if(3&r.type){const f=Lt(r,e),d=a?a(f):z,p=d.target||f,g=l.length,y=a?t=>a(Rt(t[r.index])).target:r.index;if(Nt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Uo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Uo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Uo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Vo}function Fo(t,e,n){try{return!1!==e(n)}catch(r){return $i(t,r),!1}}function Uo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Vt(t.index,e):e;0==(32&e[2])&&Bi(s);let a=Fo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Fo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}const qo=[];function Bo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ai(o):ci(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ho(t[a],e)&&(u=!0,t[a+1]=r?hi(n):ui(n)),a=r?ai(n):ci(n)}u&&(t[n+1]=r?ui(o):hi(o))}function Ho(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&dn(t,e)>=0}function zo(t,e){return function(t,e,n,r){const i=Kt(),o=Wt(),s=function(t){const e=Gt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[pe()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Gt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Qo(n=Go(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Go(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ci(r))return t[ai(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Go(null,t,e,n[1],r),n=Qo(n,e.attrs,r),function(t,e,n,r){t[ai(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Qo(r,t[o].hostAttrs,true);return Qo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ai(s),u=ci(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||dn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ai(t[a+1]);t[r+1]=si(e,a),0!==e&&(t[e+1]=li(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=si(a,0),0!==a&&(t[a+1]=li(t[a+1],r)),a=r;else t[r+1]=si(u,0),0===a?a=r:t[u+1]=li(t[u+1],r),u=r;l&&(t[r+1]=ui(t[r+1])),Bo(t,c,r,!0),Bo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&dn(o,e)>=0&&(n[r+1]=hi(n[r+1]))}(e,c,t,r),s=si(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ri&&Co(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Wo(1==(1&c)?Ko(u,e,n,i,ci(c),s):void 0)||(Wo(o)||function(t){return 2==(2&t)}(c)&&(o=Ko(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Nt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Pt(pe(),n),i,o))}(o,o.data[pe()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=m(Pn(t))),t}(e),true,s)}(t,e),zo}function Go(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Qo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Qo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),hn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ko(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ri&&(l=c?qo:void 0);let h=c?fn(l,r):u===r?l:void 0;if(o&&!Wo(h)&&(h=fn(e,r)),Wo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ai(f):ci(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=fn(t,r))}return a}function Wo(t){return void 0!==t}function $o(t,e=""){const n=Kt(),r=Wt(),i=t+ht,o=r.firstCreatePass?pi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Nt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Mr(r,n,s,o),Jt(o,!1)}function Yo(t){return Jo("",t,""),Yo}function Jo(t,e,n){const r=Kt(),i=function(t,e,n,r){return Co(t,ee(),n)?e+_t(n)+r:ri}(r,t,e,n);return i!==ri&&function(t,e,n){const r=Pt(e,t);!function(t,e,n){Nt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,pe(),i),Jo}function Xo(t,e,n){const r=Kt();return Co(r,ee(),e)&&Ci(Wt(),ye(),r,t,e,r[11],n,!0),Xo}const Zo=void 0;var ts=["en",[["a","p"],["AM","PM"],Zo],[["AM","PM"],Zo,Zo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zo,"{1} 'at' {0}",Zo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let es={};function ns(t,e,n){"string"!=typeof e&&(n=e,e=t[as.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),es[e]=t,n&&(es[e][as.ExtraData]=n)}function rs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ss(e);if(n)return n;const r=e.split("-")[0];if(n=ss(r),n)return n;if("en"===r)return ts;throw new Error(`Missing locale data for the locale "${t}".`)}function is(t){return rs(t)[as.CurrencyCode]||null}function os(t){return rs(t)[as.PluralCase]}function ss(t){return t in es||(es[t]=H.ng&&H.ng.common&&H.ng.common.locales&&H.ng.common.locales[t]),es[t]}var as=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const us="en-US";let cs=us;function ls(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(cs=t.toLowerCase().replace(/_/g,"-"))}function hs(t,e,n,r,i){if(t=_(t),Array.isArray(t))for(let o=0;o<t.length;o++)hs(t[o],e,n,r,i);else{const o=Wt(),s=Kt();let a=fo(t)?t:_(t.provide),u=co(t);const c=$t(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(fo(t)||!t.multi){const r=new Te(u,i,Ao),d=ps(a,e,i?l:l+f,h);-1===d?(Ue(Le(c,s),o,a),fs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=ps(a,e,l+f,h),p=ps(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){Ue(Le(c,s),o,a);const l=function(t,e,n,r,i){const o=new Te(t,n,Ao);return o.multi=[],o.index=e,o.componentProviders=0,ds(o,i,r&&!n),o}(i?ys:gs,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),fs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else fs(o,t,d>-1?d:p,ds(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function fs(t,e,n,r){const i=fo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ds(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ps(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function gs(t,e,n,r){return ms(this.multi,[])}function ys(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=We(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ms(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ms(i,o);return o}function ms(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function vs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Wt();if(r.firstCreatePass){const i=vt(t);hs(n,r.data,r.blueprint,i,!0),hs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class bs{}class ws{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${m(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let _s=(()=>{class t{}return t.NULL=new ws,t})();function Es(...t){}function Os(t,e){return new Ss(Lt(t,e))}const Ts=function(){return Os($t(),Kt())};let Ss=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ts,t})();function Cs(t){return t instanceof Ss?t.nativeElement:t}class Is{}let xs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>As(),t})();const As=function(){const t=Kt(),e=Vt($t().index,t);return function(t){return t[11]}(dt(e)?e:t)};let js=(()=>{class t{}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>null}),t})();class ks{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ns=new ks("11.2.0");class Ds{constructor(){}supports(t){return To(t)}create(t){return new Ps(t)}}const Rs=(t,e)=>e;class Ps{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Rs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Fs(n,r,i)?e:n,s=Fs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!To(t))throw new Error(`Error trying to diff '${m(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Oo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ls(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Vs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ls{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ms{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Vs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ms,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Us{constructor(){}supports(t){return t instanceof Map||So(t)}create(){return new qs}}class qs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||So(t)))throw new Error(`Error trying to diff '${m(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Bs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Bs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hs(){return new zs([new Ds])}let zs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Hs()),deps:[[t,new Cn,new Sn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Hs}),t})();function Gs(){return new Qs([new Us])}let Qs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Gs()),deps:[[t,new Cn,new Sn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Gs}),t})();function Ks(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Rt(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Ks(e[1],e,n,r)}const s=n.type;if(8&s)Ks(t,e,n.child,r);else if(32&s){const t=Er(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Fr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Or(e[16]);Ks(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ws{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ks(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(jr(t,n),ln(e,n))}this._attachedToViewContainer=!1}kr(this._lView[1],this._lView)}onDestroy(t){Ti(this._lView[1],this._lView,null,t)}markForCheck(){Bi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){te(!0);try{Hi(t,e,n)}finally{te(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Br(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class $s extends Ws{constructor(t){super(t),this._view=t}detectChanges(){zi(this._view)}checkNoChanges(){!function(t){te(!0);try{zi(t)}finally{te(!1)}}(this._view)}get context(){return null}}const Ys=Xs;let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ys,t.__ChangeDetectorRef__=!0,t})();function Xs(t=!1){return function(t,e,n){if(!n&&yt(t)){const n=Vt(t.index,e);return new Ws(n,n)}return 47&t.type?new Ws(e[16],e):null}($t(),Kt(),t)}const Zs=[new Us],ta=new zs([new Ds]),ea=new Qs(Zs),na=function(){return sa($t(),Kt())};let ra=(()=>{class t{}return t.__NG_ELEMENT_ID__=na,t})();const ia=ra,oa=class extends ia{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=di(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),yi(e,n,t),new Ws(n)}};function sa(t,e){return 4&t.type?new oa(e,t,Os(t,e)):null}class aa{}class ua{}const ca=function(){return ga($t(),Kt())};let la=(()=>{class t{}return t.__NG_ELEMENT_ID__=ca,t})();const ha=la,fa=class extends ha{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Os(this._hostTNode,this._hostLView)}get injector(){return new Je(this._hostTNode,this._hostLView)}get parentInjector(){const t=Fe(this._hostTNode,this._hostLView);if(je(t)){const e=Ne(t,this._hostLView),n=ke(t);return new Je(e[1].data[n+8],e)}return new Je(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=da(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(aa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new fa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],cn(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Ur(i,o),a=n[11],u=Lr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Br(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),cn(pa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=da(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=jr(this._lContainer,e);n&&(ln(pa(this._lContainer),e),kr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=jr(this._lContainer,e);return n&&null!=ln(pa(this._lContainer),e)?new Ws(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function da(t){return t[8]}function pa(t){return t[8]||(t[8]=[])}function ga(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=Rt(r);else{const n=e[11];i=n.createComment("");const r=Lt(t,e);Dr(n,Lr(n,r),i,function(t,e){return Nt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Mi(r,e,i,t),qi(e,n)}return new fa(n,t,e)}const ya={};class ma extends _s{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new wa(e,this.ngModule)}}function va(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ba=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>br});class wa extends bs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ni).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return va(this.componentDef.inputs)}get outputs(){return va(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ya,i);return o!==ya||r===ya?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Is,Dt),s=i.get(js,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Nt(t))return t.selectRootElement(e,n===V.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):xr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:br,clean:Qi,playerHandler:null,flags:0},f=Oi(0,null,null,1,0,null,null,null,null,null),d=di(null,f,h,l,null,null,o,a,s,i);let p,g;ue(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=pi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ji(a,u,!0),null!==t&&(Se(i,t,u),null!==a.classes&&Gr(i,t,a.classes),null!==a.styles&&zr(i,t,a.styles)));const c=r.createRenderer(t,e),l=di(n,Ei(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ue(Le(a,n),s,e.type),ji(s,a),Ni(a,n.length,1)),qi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Se(a,c,["ng-version",Ns.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Xr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Se(a,c,t),e&&e.length>0&&Gr(a,c,e.join(" "))}if(g=Mt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=$t();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Di(t,r,e,gi(t,e,1,null),n));const i=We(e,t,r.directiveStart,r);vr(i,e);const o=Lt(r,e);return o&&vr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=$t();e.contentQueries(1,s,t.directiveStart)}const a=$t();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ge(a.index),xi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ai(e,s)),s}(t,this.componentDef,d,h,[yo]),yi(f,d,null)}finally{de()}return new _a(this.componentType,p,Os(g,d),d,g)}}class _a extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new $s(r),this.componentType=t}get injector(){return new Je(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ea=new Map;class Oa extends aa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ma(this);const n=lt(t),r=t[Y]||null;r&&ls(r),this._bootstrapComponents=wr(n.bootstrap),this._r3Injector=so(t,e,[{provide:aa,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],m(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=go.THROW_IF_NOT_FOUND,n=N.Default){return t===go||t===aa||t===Xi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ta extends ua{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${m(e)} vs ${m(e.name)}`)}(i,Ea.get(i),n),Ea.set(i,n));const o=wr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Oa(this.moduleType,t)}}function Sa(t,e,n){const r=function(){const t=Gt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=Kt();return i[r]===ri?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}const Ca=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Ia(){return this._results[Oo()]()}class xa{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Oo(),n=xa.prototype;n[e]||(n[e]=Ia)}get changes(){return this._changes||(this._changes=new Ca)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=an(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Aa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Aa(this.queryList)}setDirty(){this.queryList.setDirty()}}class ja{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new ja(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==qa(t,e).matches&&this.queries[e].setDirty()}}class ka{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Na{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Na(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Da{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Da(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ra(e,i)),this.matchTNodeWithReadOption(t,e,Ke(e,t,i,!1,!1))}else n===ra?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ke(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ss||r===la||r===ra&&4&e.type)this.addMatch(e.index,-2);else{const n=Ke(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ra(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Pa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Os(t,e):4&t.type?sa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ss?Os(e,t):n===ra?sa(e,t):n===la?ga(e,t):void 0}(t,e,r):We(t,t[1],n,e)}function La(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Pa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ma(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=La(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ma(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ma(n[1],n,i,r)}}}}}return r}function Va(t){const e=Kt(),n=Wt(),r=ie();oe(r+1);const i=qa(n,r);if(t.dirty&&Ut(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ma(n,e,r,[]):La(n,e,i,r);t.reset(o,Cs),t.notifyOnChanges()}return!0}return!1}function Fa(t,e,n,r){const i=Wt();if(i.firstCreatePass){const o=$t();(function(t,e,n){null===t.queries&&(t.queries=new Na),t.queries.track(new Da(e,n))})(i,new ka(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new xa(4==(4&n));Ti(t,e,r,r.destroy),null===e[19]&&(e[19]=new ja),e[19].queries.push(new Aa(r))}(i,Kt(),n)}function Ua(){return t=Kt(),e=ie(),t[19].queries[e].queryList;var t,e}function qa(t,e){return t.queries.getByIndex(e)}function Ba(t=N.Default){const e=Xs(!0);if(null!=e||t&N.Optional)return e;Ot("ChangeDetectorRef")}const Ha=new rn("Application Initializer");let za=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Es,this.reject=Es,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Po(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(_n(Ha,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const Ga=new rn("AppId"),Qa={provide:Ga,useFactory:function(){return`${Ka()}${Ka()}${Ka()}`},deps:[]};function Ka(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wa=new rn("Platform Initializer"),$a=new rn("Platform ID"),Ya=new rn("appBootstrapListener");let Ja=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const Xa=new rn("LocaleId"),Za=new rn("DefaultCurrencyCode");class tu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const eu=function(t){return new Ta(t)},nu=eu,ru=function(t){return Promise.resolve(eu(t))},iu=function(t){const e=eu(t),n=wr(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new wa(n)),t},[]);return new tu(e,n)},ou=iu,su=function(t){return Promise.resolve(iu(t))};let au=(()=>{class t{constructor(){this.compileModuleSync=nu,this.compileModuleAsync=ru,this.compileModuleAndAllComponentsSync=ou,this.compileModuleAndAllComponentsAsync=su}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const uu=(()=>Promise.resolve(0))();function cu(t){"undefined"==typeof Zone?uu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class lu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ca(!1),this.onMicrotaskEmpty=new Ca(!1),this.onStable=new Ca(!1),this.onError=new Ca(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=H.requestAnimationFrame,e=H.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(H,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,du(t),fu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),du(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return pu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),gu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return pu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),gu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,du(t),fu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(lu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,hu,Es,Es);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const hu={};function fu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function du(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function pu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gu(t){t._nesting--,fu(t)}class yu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ca,this.onMicrotaskEmpty=new Ca,this.onStable=new Ca,this.onError=new Ca}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let mu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lu.assertNotInAngularZone(),cu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(_n(lu))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})(),vu=(()=>{class t{constructor(){this._applications=new Map,Eu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Eu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();class bu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function wu(t){Eu=t}let _u,Eu=new bu,Ou=!0,Tu=!1;function Su(){return Tu=!0,Ou}function Cu(){if(Tu)throw new Error("Cannot enable prod mode after platform setup.");Ou=!1}const Iu=new rn("AllowMultipleToken");class xu{constructor(t,e){this.name=t,this.token=e}}function Au(t,e,n=[]){const r=`Platform: ${e}`,i=new rn(r);return(e=[])=>{let o=ju();if(!o||o.injector.get(Iu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:to,useValue:"platform"});!function(t){if(_u&&!_u.destroyed&&!_u.injector.get(Iu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_u=t.get(ku);const e=t.get(Wa,null);e&&e.forEach(t=>t())}(go.create({providers:t,name:r}))}return function(t){const e=ju();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ju(){return _u&&!_u.destroyed?_u:null}let ku=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new yu:("zone.js"===t?void 0:t)||new lu({enableLongStackTrace:Su(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:lu,useValue:n}];return n.run(()=>{const e=go.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(mr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ru(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Po(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(za);return t.runInitializers(),t.donePromise.then(()=>(ls(i.injector.get(Xa,us)||us),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Nu({},e);return function(t,e,n){const r=new Ta(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Du);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${m(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(_n(go))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Nu(t,e){return Array.isArray(e)?e.reduce(Nu,t):Object.assign(Object.assign({},t),e)}let Du=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{lu.assertNotInAngularZone(),cu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{lu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof bs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(aa),i=n.create(go.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(mu,null),a=s&&i.injector.get(vu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ru(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Su()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ru(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ya,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(_n(lu),_n(Ja),_n(go),_n(mr),_n(_s),_n(za))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Ru(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Pu{}class Lu{}const Mu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Vu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Mu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Fu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Fu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(_n(au),_n(Lu,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Fu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Uu=function(t){return null},qu=Au(null,"core",[{provide:$a,useValue:"unknown"},{provide:ku,deps:[go]},{provide:vu,deps:[]},{provide:Ja,deps:[]}]),Bu=[{provide:Du,useClass:Du,deps:[lu,Ja,go,mr,_s,za]},{provide:ba,deps:[lu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:za,useClass:za,deps:[[new Sn,Ha]]},{provide:au,useClass:au,deps:[]},Qa,{provide:zs,useFactory:function(){return ta},deps:[]},{provide:Qs,useFactory:function(){return ea},deps:[]},{provide:Xa,useFactory:function(t){return ls(t=t||"undefined"!=typeof $localize&&$localize.locale||us),t},deps:[[new Tn(Xa),new Sn,new Cn]]},{provide:Za,useValue:"USD"}];let Hu=(()=>{class t{constructor(t){}}return t.\u0275mod=it({type:t}),t.\u0275inj=T({factory:function(e){return new(e||t)(_n(Du))},providers:Bu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return p}),n.d(e,"l",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return g});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var y=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,m.prototype.create),o}return Object(r.c)(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new y(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function O(){}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return C}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return T}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let C=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({factory:function(e){return new(e||t)(u.Qb(u.C))},providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.h)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Qb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Qb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Qb)(s).location;return new b(Object(r.Qb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(y),r.Qb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new _(Object(r.Qb)(y),Object(r.Qb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class C{}let I=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function x(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let j=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new k(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new k(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class k{constructor(t,e){this.record=t,this.view=e}}let N=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:C,useClass:I}]}),t})();function D(t){return"server"===t}let R=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new P(Object(r.Qb)(s),window)}),t})();class P{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=L(this.window.history)||L(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function L(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class M extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new M,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=F||(F=document.querySelector("base"),F)?F.getAttribute("href"):null;return null==e?null:(n=e,V||(V=document.createElement("a")),V.setAttribute("href",n),"/"===V.pathname.charAt(0)?V.pathname:"/"+V.pathname);var n}resetBaseElement(){F=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return x(document.cookie,t)}}let V,F=null;const U=new r.r("TRANSITION_ID"),q=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[U,s,r.s],multi:!0}];class B{static init(){Object(r.X)(new B)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const H=new r.r("EventManagerPlugins");let z=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(H),r.Qb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class G{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Q=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),K=(()=>{class t extends Q{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},$=/%COMP%/g;function Y(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Y(t,i,n):(i=i.replace($,t),n.push(i))}return n}function J(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let X=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Z(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new tt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new et(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Y(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(z),r.Qb(K),r.Qb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Z{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(W[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=W[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=W[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,J(n)):this.eventManager.addEventListener(t,e,J(n))}}class tt extends Z{constructor(t,e,n,r){super(t),this.component=n;const i=Y(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace($,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace($,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class et extends Z{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Y(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let nt=(()=>{class t extends G{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const rt=["alt","control","meta","shift"],it={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ot={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},st={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let at=(()=>{class t extends G{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(rt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ot.hasOwnProperty(e)&&(e=ot[e]))}return it[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),rt.forEach(r=>{r!=n&&(0,st[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ut=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){M.makeCurrent(),B.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],ct=Object(r.S)(r.W,"browser",ut),lt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:H,useClass:nt,multi:!0,deps:[s,r.A,r.C]},{provide:H,useClass:at,multi:!0,deps:[s]},[],{provide:X,useClass:X,deps:[z,K,r.c]},{provide:r.F,useExisting:X},{provide:Q,useExisting:K},{provide:K,useClass:K,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:z,useClass:z,deps:[H,r.A]},[]];let ht=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:U,useExisting:r.c},q]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Qb(t,12))},providers:lt,imports:[N,r.f]}),t})();"undefined"!=typeof window&&window;var ft=n("HDdC"),dt=n("DH7j"),pt=n("lJxs"),gt=n("XoHu"),yt=n("Cfvw");function mt(t,e){return new ft.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(yt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const vt=new r.r("NgValueAccessor"),bt={provide:vt,useExisting:Object(r.U)(()=>wt),multi:!0};let wt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.zb([bt])]}),t})();const _t={provide:vt,useExisting:Object(r.U)(()=>Ot),multi:!0},Et=new r.r("CompositionEventMode");let Ot=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(Et,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([_t])]}),t})();function Tt(t){return null==t||0===t.length}function St(t){return null!=t&&"number"==typeof t.length}const Ct=new r.r("NgValidators"),It=new r.r("NgAsyncValidators"),xt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class At{static min(t){return e=>{if(Tt(e.value)||Tt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Tt(e.value)||Tt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Tt(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Tt(t.value)||xt.test(t.value)?null:{email:!0}}static minLength(t){return e=>Tt(e.value)||!St(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>St(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return At.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Tt(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(jt);return 0==e.length?null:function(t){return Nt(Dt(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(jt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(dt.a)(e))return mt(e,null);if(Object(gt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return mt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return mt(t=1===t.length&&Object(dt.a)(t[0])?t[0]:t,null).pipe(Object(pt.a)(t=>e(...t)))}return mt(t,null)}(Dt(t,e).map(kt)).pipe(Object(pt.a)(Nt))}}}function jt(t){return null!=t}function kt(t){const e=Object(r.rb)(t)?Object(yt.a)(t):t;return Object(r.qb)(e),e}function Nt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Dt(t,e){return e.map(e=>e(t))}function Rt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Pt(t){return null!=t?At.compose(Rt(t)):null}function Lt(t){return null!=t?At.composeAsync(Rt(t)):null}function Mt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Vt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Pt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Lt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Ft=(()=>{class t extends Vt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Ut(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Ut=r.Ob(Ft);class qt extends Vt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Bt=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(qt,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();const Ht={provide:vt,useExisting:Object(r.U)(()=>zt),multi:!0};let zt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Ht])]}),t})();const Gt={provide:vt,useExisting:Object(r.U)(()=>Kt),multi:!0};let Qt=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Kt=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(qt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(Qt),r.Kb(r.s))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.zb([Gt])]}),t})();const Wt={provide:vt,useExisting:Object(r.U)(()=>$t),multi:!0};let $t=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Wt])]}),t})();const Yt={provide:vt,useExisting:Object(r.U)(()=>Jt),multi:!0};let Jt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Yt])]}),t})();const Xt={provide:vt,useExisting:Object(r.U)(()=>Zt),multi:!0};let Zt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Xt])]}),t})();function te(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ee(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const ne=[wt,$t,zt,Jt,Zt,Kt];function re(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ie="VALID",oe="INVALID",se="PENDING",ae="DISABLED";function ue(t){return(fe(t)?t.validators:t)||null}function ce(t){return Array.isArray(t)?Pt(t):t||null}function le(t,e){return(fe(e)?e.asyncValidators:t)||null}function he(t){return Array.isArray(t)?Lt(t):t||null}function fe(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class de{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ce(this._rawValidators),this._composedAsyncValidatorFn=he(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ie}get invalid(){return this.status===oe}get pending(){return this.status==se}get disabled(){return this.status===ae}get enabled(){return this.status!==ae}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ce(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=he(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=se,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ae,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ie,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ie&&this.status!==se||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ae:ie}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=se,this._hasOwnPendingAsyncValidator=!0;const e=kt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof ge?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof ye&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?ae:this.errors?oe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(se)?se:this._anyControlsHaveStatus(oe)?oe:ie}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){fe(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pe extends de{constructor(t=null,e,n){super(ue(e),le(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){re(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){re(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ge extends de{constructor(t,e,n){super(ue(e),le(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof pe?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class ye extends de{constructor(t,e,n){super(ue(e),le(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof pe?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const me={provide:qt,useExisting:Object(r.U)(()=>be)},ve=(()=>Promise.resolve(null))();let be=(()=>{class t extends qt{constructor(t,e,n,i){super(),this.control=new pe,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{var e;t.constructor===Ot?n=t:(e=t,ne.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Mt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Mt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();te(e._rawValidators,n),te(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ee(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ee(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ve.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ve.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ft,9),r.Kb(Ct,10),r.Kb(It,10),r.Kb(vt,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([me]),r.xb,r.yb]}),t})();const we={provide:Ct,useExisting:Object(r.U)(()=>_e),multi:!0};let _e=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?At.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("required",e.required?"":null)},inputs:{required:"required"},features:[r.zb([we])]}),t})(),Ee=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),Oe=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[Qt],imports:[Ee]}),t})();var Te=n("LRne"),Se=n("5+tZ");function Ce(t,e){return Object(Se.a)(t,e,1)}var Ie=n("7o/Q");function xe(t,e){return function(n){return n.lift(new Ae(t,e))}}class Ae{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new je(t,this.predicate,this.thisArg))}}class je extends Ie.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class ke{}class Ne{}class De{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof De?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new De;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof De?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Re{encodeKey(t){return Pe(t)}encodeValue(t){return Pe(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Pe(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Le{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Re,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Le({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Me(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Ve(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Fe(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Ue{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new De),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Le,this.urlWithParams=e}serializeBody(){return null===this.body?null:Me(this.body)||Ve(this.body)||Fe(this.body)||"string"==typeof this.body?this.body:this.body instanceof Le?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Fe(this.body)?null:Ve(this.body)?this.body.type||null:Me(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Le?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Ue(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var qe=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Be{constructor(t,e=200,n="OK"){this.headers=t.headers||new De,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class He extends Be{constructor(t={}){super(t),this.type=qe.ResponseHeader}clone(t={}){return new He({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ze extends Be{constructor(t={}){super(t),this.type=qe.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ze({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ge extends Be{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Qe(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Ke=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Ue)r=t;else{let i,o;i=n.headers instanceof De?n.headers:new De(n.headers),n.params&&(o=n.params instanceof Le?n.params:new Le({fromObject:n.params})),r=new Ue(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Te.a)(r).pipe(Ce(t=>this.handler.handle(t)));if(t instanceof Ue||"events"===n.observe)return i;const o=i.pipe(xe(t=>t instanceof ze));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(pt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(pt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(pt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(pt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Le).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Qe(n,e))}post(t,e,n={}){return this.request("POST",t,Qe(n,e))}put(t,e,n={}){return this.request("PUT",t,Qe(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ke))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class We{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const $e=new r.r("HTTP_INTERCEPTORS");let Ye=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Je=/^\)\]\}',?\n/;class Xe{}let Ze=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),tn=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ft.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new De(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new He({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Je,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new ze({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Ge({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Ge({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:qe.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:qe.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:qe.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Xe))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const en=new r.r("XSRF_COOKIE_NAME"),nn=new r.r("XSRF_HEADER_NAME");class rn{}let on=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s),r.Qb(r.C),r.Qb(en))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),sn=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(rn),r.Qb(nn))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),an=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get($e,[]);this.chain=t.reduceRight((t,e)=>new We(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ne),r.Qb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),un=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:sn,useClass:Ye}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:en,useValue:e.cookieName}:[],e.headerName?{provide:nn,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[sn,{provide:$e,useExisting:sn,multi:!0},{provide:rn,useClass:on},{provide:en,useValue:"XSRF-TOKEN"},{provide:nn,useValue:"X-XSRF-TOKEN"}]}),t})(),cn=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[Ke,{provide:ke,useClass:an},tn,{provide:Ne,useExisting:tn},Ze,{provide:Xe,useExisting:Ze}],imports:[[un.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var ln=n("XNiG"),hn=n("9ppp");class fn extends ln.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new hn.a;return this._value}next(t){super.next(this._value=t)}}var dn=n("z+Ro");class pn extends Ie.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class gn extends Ie.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var yn=n("SeVD");function mn(t,e,n,r,i=new gn(t,n,r)){if(!i.closed)return e instanceof ft.a?e.subscribe(i):Object(yn.a)(e)(i)}var vn=n("yCtX");const bn={};class wn{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new _n(t,this.resultSelector))}}class _n extends pn{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(bn),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(mn(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===bn?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const En=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var On=n("bHdf");function Tn(...t){return Object(On.a)(1)(Object(Te.a)(...t))}var Sn=n("EY2u");function Cn(t){return new ft.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(yt.a)(n):Object(Sn.b)()).subscribe(e)})}var In=n("zx2A");function xn(t,e){return"function"==typeof e?n=>n.pipe(xn((n,r)=>Object(yt.a)(t(n,r)).pipe(Object(pt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new An(t))}class An{constructor(t){this.project=t}call(t,e){return e.subscribe(new jn(t,this.project))}}class jn extends In.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new In.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(In.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const kn=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Nn(t){return e=>0===t?Object(Sn.b)():e.lift(new Dn(t))}class Dn{constructor(t){if(this.total=t,this.total<0)throw new kn}call(t,e){return e.subscribe(new Rn(t,this.total))}}class Rn extends Ie.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Pn(...t){const e=t[t.length-1];return Object(dn.a)(e)?(t.pop(),n=>Tn(t,n,e)):e=>Tn(t,e)}function Ln(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Mn(t,e,n))}}class Mn{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Vn(t,this.accumulator,this.seed,this.hasSeed))}}class Vn extends Ie.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Fn(t){return function(e){const n=new Un(t),r=e.lift(n);return n.caught=r}}class Un{constructor(t){this.selector=t}call(t,e){return e.subscribe(new qn(t,this.selector,this.caught))}}class qn extends In.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new In.a(this);this.add(r);const i=Object(In.c)(n,r);i!==r&&this.add(i)}}}function Bn(t){return function(e){return 0===t?Object(Sn.b)():e.lift(new Hn(t))}}class Hn{constructor(t){if(this.total=t,this.total<0)throw new kn}call(t,e){return e.subscribe(new zn(t,this.total))}}class zn extends Ie.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Gn(t=Wn){return e=>e.lift(new Qn(t))}class Qn{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Kn(t,this.errorFactory))}}class Kn extends Ie.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Iw){t=Iw}this.destination.error(t)}}}function Wn(){return new En}function $n(t=null){return e=>e.lift(new Yn(t))}class Yn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Jn(t,this.defaultValue))}}class Jn extends Ie.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Xn=n("SpAZ");function Zn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?xe((e,n)=>t(e,n,r)):Xn.a,Nn(1),n?$n(e):Gn(()=>new En))}var tr=n("vkgz"),er=n("quSY");class nr{constructor(t){this.callback=t}call(t,e){return e.subscribe(new rr(t,this.callback))}}class rr extends Ie.a{constructor(t,e){super(t),this.add(new er.a(e))}}class ir{constructor(t,e){this.id=t,this.url=e}}class or extends ir{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sr extends ir{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ar extends ir{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ur extends ir{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cr extends ir{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lr extends ir{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hr extends ir{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fr extends ir{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dr extends ir{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gr{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yr{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mr{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vr{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class br{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wr{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const _r="primary";class Er{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Or(t){return new Er(t)}function Tr(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Sr(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Cr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ir(t[i],e[i]))return!1;return!0}function Ir(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function xr(t){return Array.prototype.concat.apply([],t)}function Ar(t){return t.length>0?t[t.length-1]:null}function jr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function kr(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(yt.a)(Promise.resolve(t)):Object(Te.a)(t)}function Nr(t,e,n){return n?function(t,e){return Cr(t,e)}(t.queryParams,e.queryParams)&&Dr(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ir(t[n],e[n]))}(t.queryParams,e.queryParams)&&Rr(t.root,e.root)}function Dr(t,e){if(!Fr(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Dr(t.children[n],e.children[n]))return!1}return!0}function Rr(t,e){return Pr(t,e,e.segments)}function Pr(t,e,n){if(t.segments.length>n.length)return!!Fr(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Fr(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Rr(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Fr(t.segments,r)&&!!t.children.primary&&Pr(t.children.primary,e,i)}}class Lr{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Or(this.queryParams)),this._queryParamMap}toString(){return Br.serialize(this)}}class Mr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,jr(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hr(this)}}class Vr{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Or(this.parameters)),this._parameterMap}toString(){return Yr(this)}}function Fr(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Ur{}class qr{parse(t){const e=new ei(t);return new Lr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${zr(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Qr(e)}=${Qr(t)}`).join("&"):`${Qr(e)}=${Qr(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Br=new qr;function Hr(t){return t.segments.map(t=>Yr(t)).join("/")}function zr(t,e){if(!t.hasChildren())return Hr(t);if(e){const e=t.children.primary?zr(t.children.primary,!1):"",n=[];return jr(t.children,(t,e)=>{e!==_r&&n.push(`${e}:${zr(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return jr(t.children,(t,r)=>{r===_r&&(n=n.concat(e(t,r)))}),jr(t.children,(t,r)=>{r!==_r&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===_r?[zr(t.children.primary,!1)]:[`${n}:${zr(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Hr(t)}/${e[0]}`:`${Hr(t)}/(${e.join("//")})`}}function Gr(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qr(t){return Gr(t).replace(/%3B/gi,";")}function Kr(t){return Gr(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wr(t){return decodeURIComponent(t)}function $r(t){return Wr(t.replace(/\+/g,"%20"))}function Yr(t){return`${Kr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Kr(t)}=${Kr(e[t])}`).join("")}`;var e}const Jr=/^[^\/()?;=#]+/;function Xr(t){const e=t.match(Jr);return e?e[0]:""}const Zr=/^[^=?&#]+/,ti=/^[^?&#]+/;class ei{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mr([],{}):new Mr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Mr(t,e)),n}parseSegment(){const t=Xr(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Vr(Wr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Xr(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Xr(this.remaining);t&&(n=t,this.capture(n))}t[Wr(e)]=Wr(n)}parseQueryParam(t){const e=function(t){const e=t.match(Zr);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ti);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=$r(e),i=$r(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Xr(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=_r);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Mr([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class ni{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ri(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ri(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ii(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return ii(t,this._root).map(t=>t.value)}}function ri(t,e){if(t===e.value)return e;for(const n of e.children){const e=ri(t,n);if(e)return e}return null}function ii(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ii(t,n);if(r.length)return r.unshift(e),r}return[]}class oi{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function si(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ai extends ni{constructor(t,e){super(t),this.snapshot=e,di(this,t)}toString(){return this.snapshot.toString()}}function ui(t,e){const n=function(t,e){const n=new hi([],{},{},"",{},_r,e,null,t.root,-1,{});return new fi("",new oi(n,[]))}(t,e),r=new fn([new Vr("",{})]),i=new fn({}),o=new fn({}),s=new fn({}),a=new fn(""),u=new ci(r,i,s,a,o,_r,e,n.root);return u.snapshot=n.root,new ai(new oi(u,[]),n)}class ci{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(pt.a)(t=>Or(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(pt.a)(t=>Or(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function li(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class hi{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Or(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Or(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fi extends ni{constructor(t,e){super(e),this.url=t,di(this,e)}toString(){return pi(this._root)}}function di(t,e){e.value._routerState=t,e.children.forEach(e=>di(t,e))}function pi(t){const e=t.children.length>0?` { ${t.children.map(pi).join(", ")} } `:"";return`${t.value}${e}`}function gi(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Cr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Cr(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Cr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Cr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function yi(t,e){return Cr(t.params,e.params)&&function(t,e){return Fr(t,e)&&t.every((t,n)=>Cr(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||yi(t.parent,e.parent))}function mi(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return mi(t,e,r);return mi(t,e)})}(t,e,n);return new oi(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return vi(e,t),t}{const n=new ci(new fn((r=e.value).url),new fn(r.params),new fn(r.queryParams),new fn(r.fragment),new fn(r.data),r.outlet,r.component,r),i=e.children.map(e=>mi(t,e));return new oi(n,i)}}var r}function vi(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)vi(t.children[n],e.children[n])}function bi(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function wi(t){return"object"==typeof t&&null!=t&&t.outlets}function _i(t,e,n,r,i){let o={};return r&&jr(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Lr(n.root===t?e:Ei(n.root,t,e),o,i)}function Ei(t,e,n){const r={};return jr(t.children,(t,i)=>{r[i]=t===e?n:Ei(t,e,n)}),new Mr(t.segments,r)}class Oi{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&bi(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(wi);if(r&&r!==Ar(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ti{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Si(t,e,n){if(t||(t=new Mr([],{})),0===t.segments.length&&t.hasChildren())return Ci(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(wi(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!ji(a,u,e))return o;r+=2}else{if(!ji(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Mr(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Mr(t.segments.slice(r.pathIndex),t.children),Ci(e,0,i)}return r.match&&0===i.length?new Mr(t.segments,{}):r.match&&!t.hasChildren()?Ii(t,e,n):r.match?Ci(t,0,i):Ii(t,e,n)}function Ci(t,e,n){if(0===n.length)return new Mr(t.segments,{});{const r=function(t){return wi(t[0])?t[0].outlets:{[_r]:t}}(n),i={};return jr(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Si(t.children[r],e,n))}),jr(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Mr(t.segments,i)}}function Ii(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(wi(o)){const t=xi(o.outlets);return new Mr(r,t)}if(0===i&&bi(n[0])){r.push(new Vr(t.segments[e].path,Ai(n[0]))),i++;continue}const s=wi(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&bi(a)?(r.push(new Vr(s,Ai(a))),i+=2):(r.push(new Vr(s,{})),i++)}return new Mr(r,{})}function xi(t){const e={};return jr(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Ii(new Mr([],{}),0,t))}),e}function Ai(t){const e={};return jr(t,(t,n)=>e[n]=`${t}`),e}function ji(t,e,n){return t==n.path&&Cr(e,n.parameters)}class ki{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),gi(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=si(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),jr(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=si(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=si(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new br(t.value.snapshot))}),t.children.length&&this.forwardEvent(new mr(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(gi(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ni(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ni(t){gi(t.value),t.children.forEach(Ni)}class Di{constructor(t,e){this.routes=t,this.module=e}}function Ri(t){return"function"==typeof t}function Pi(t){return t instanceof Lr}const Li=Symbol("INITIAL_VALUE");function Mi(){return xn(t=>function(...t){let e,n;return Object(dn.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(dt.a)(t[0])&&(t=t[0]),Object(vn.a)(t,n).lift(new wn(e))}(t.map(t=>t.pipe(Nn(1),Pn(Li)))).pipe(Ln((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Li)return t;if(r===Li&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Pi(r))return r}return t},t)},Li),xe(t=>t!==Li),Object(pt.a)(t=>Pi(t)?t:!0===t),Nn(1)))}let Vi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[No]},encapsulation:2}),t})();function Fi(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Ui(r,qi(e,r))}}function Ui(t,e){t.children&&Fi(t.children,e)}function qi(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Bi(t){const e=t.children&&t.children.map(Bi),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==_r&&(n.component=Vi),n}function Hi(t){return t.outlet||_r}function zi(t,e){const n=t.filter(t=>Hi(t)===e);return n.push(...t.filter(t=>Hi(t)!==e)),n}const Gi={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Qi(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Gi):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Sr)(n,t,e);if(!i)return Object.assign({},Gi);const o={};jr(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Ki(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Wi(t,e,n)&&Hi(n)!==_r)}(t,n,r)){const i=new Mr(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Hi(o)!==_r){const n=new Mr([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Hi(o)]=n}return i}(t,e,r,new Mr(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Wi(t,e,n))}(t,n,r)){const o=new Mr(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Wi(t,n,a)&&!i[Hi(a)]){const n=new Mr([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Hi(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Mr(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Wi(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function $i(t,e,n,r){return!!(Hi(t)===r||r!==_r&&Wi(e,n,t))&&("**"===t.path||Qi(e,t,n).matched)}function Yi(t,e,n){return 0===e.length&&!t.children[n]}class Ji{constructor(t){this.segmentGroup=t||null}}class Xi{constructor(t){this.urlTree=t}}function Zi(t){return new ft.a(e=>e.error(new Ji(t)))}function to(t){return new ft.a(e=>e.error(new Xi(t)))}function eo(t){return new ft.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class no{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Ki(this.urlTree.root,[],[],this.config).segmentGroup,e=new Mr(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,_r).pipe(Object(pt.a)(t=>this.createUrlTree(ro(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Fn(t=>{if(t instanceof Xi)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Ji)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,_r).pipe(Object(pt.a)(e=>this.createUrlTree(ro(e),t.queryParams,t.fragment))).pipe(Fn(t=>{if(t instanceof Ji)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Mr([],{[_r]:t}):t;return new Lr(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(pt.a)(t=>new Mr([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(yt.a)(r).pipe(Ce(r=>{const i=n.children[r],o=zi(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(pt.a)(t=>({segment:t,outlet:r})))}),Ln((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?xe((e,n)=>t(e,n,r)):Xn.a,Bn(1),n?$n(e):Gn(()=>new En))}())}expandSegment(t,e,n,r,i,o){return Object(yt.a)(n).pipe(Ce(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Fn(t=>{if(t instanceof Ji)return Object(Te.a)(null);throw t}))),Zn(t=>!!t),Fn((t,n)=>{if(t instanceof En||"EmptyError"===t.name){if(Yi(e,r,i))return Object(Te.a)(new Mr([],{}));throw new Ji(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return $i(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Zi(e):Zi(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?to(i):this.lineralizeSegments(n,i).pipe(Object(Se.a)(n=>{const i=new Mr(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Qi(e,r,i);if(!s)return Zi(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?to(l):this.lineralizeSegments(r,l).pipe(Object(Se.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(pt.a)(t=>(n._loadedConfig=t,new Mr(r,{})))):Object(Te.a)(new Mr(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Qi(e,n,r);if(!o)return Zi(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Se.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Ki(e,s,u,o),l=new Mr(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(pt.a)(t=>new Mr(s,t)));if(0===o.length&&0===c.length)return Object(Te.a)(new Mr(s,{}));const h=Hi(n)===i;return this.expandSegment(r,l,o,c,h?_r:i,!0).pipe(Object(pt.a)(t=>new Mr(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Te.a)(new Di(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Te.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Se.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(pt.a)(t=>(e._loadedConfig=t,t))):function(t){return new ft.a(e=>e.error(Tr(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Te.a)(new Di([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Te.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Ri(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Ri(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return kr(o)});return Object(Te.a)(i).pipe(Mi(),Object(tr.a)(t=>{if(!Pi(t))return;const e=Tr(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(pt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Te.a)(n);if(r.numberOfChildren>1||!r.children.primary)return eo(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Lr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return jr(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return jr(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Mr(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ro(t){const e={};for(const n of Object.keys(t.children)){const r=ro(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Mr(t.segments.concat(e.segments),e.children)}return t}(new Mr(t.segments,e))}class io{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class oo{constructor(t,e){this.component=t,this.route=e}}function so(t,e,n){const r=t._root;return uo(r,e?e._root:null,n,[r.value])}function ao(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function uo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=si(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Fr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fr(t.url,e.url)||!Cr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yi(t,e)||!Cr(t.queryParams,e.queryParams);case"paramsChange":default:return!yi(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new io(r)):(o.data=s.data,o._resolvedData=s._resolvedData),uo(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oo(a.outlet.component,s))}else s&&co(e,a,i),i.canActivateChecks.push(new io(r)),uo(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),jr(o,(t,e)=>co(t,n.getContext(e),i)),i}function co(t,e,n){const r=si(t),i=t.value;jr(r,(t,r)=>{co(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new oo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class lo{}function ho(t){return new ft.a(e=>e.error(t))}class fo{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Ki(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,_r);if(null===e)return null;const n=new hi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},_r,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new oi(n,e),i=new fi(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=li(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=zi(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!po(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===_r?-1:e.value.outlet===_r?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Yi(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!$i(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Ar(n).parameters:{};i=new hi(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mo(t),Hi(t),t.component,t,go(e),yo(e)+n.length,vo(t))}else{const r=Qi(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new hi(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mo(t),Hi(t),t.component,t,go(e),yo(e)+o.length,vo(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Ki(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new oi(i,t)]}if(0===a.length&&0===c.length)return[new oi(i,[])];const l=Hi(t)===r,h=this.processSegment(a,u,c,l?_r:r);return null===h?null:[new oi(i,h)]}}function po(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function go(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yo(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function mo(t){return t.data||{}}function vo(t){return t.resolve||{}}function bo(t){return xn(e=>{const n=t(e);return n?Object(yt.a)(n).pipe(Object(pt.a)(()=>e)):Object(Te.a)(e)})}class wo extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const _o=new r.r("ROUTES");class Eo{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(pt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Di(xr(i.injector.get(_o,void 0,r.q.Self|r.q.Optional)).map(Bi),i)}))}loadModuleFactory(t){return"string"==typeof t?Object(yt.a)(this.loader.load(t)):kr(t()).pipe(Object(Se.a)(t=>t instanceof r.w?Object(Te.a)(t):Object(yt.a)(this.compiler.compileModuleAsync(t))))}}class Oo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new To,this.attachRef=null}}class To{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Oo,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class So{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Co(t){throw t}function Io(t,e,n){return e.parse("/")}function xo(t,e){return Object(Te.a)(null)}let Ao=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new ln.a,this.errorHandler=Co,this.malformedUriErrorHandler=Io,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xo,afterPreactivation:xo},this.urlHandlingStrategy=new So,this.routeReuseStrategy=new wo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Lr(new Mr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Eo(s,a,t=>this.triggerEvent(new pr(t)),t=>this.triggerEvent(new gr(t))),this.routerState=ui(this.currentUrlTree,this.rootComponentType),this.transitions=new fn({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(xe(t=>0!==t.id),Object(pt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),xn(t=>{let n=!1,r=!1;return Object(Te.a)(t).pipe(Object(tr.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xn(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Te.a)(t).pipe(xn(t=>{const n=this.transitions.getValue();return e.next(new or(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Sn.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,xn(t=>function(t,e,n,r,i){return new no(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(pt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(tr.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Se.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new fo(t,e,n,r,i,o).recognize();return null===s?ho(new lo):Object(Te.a)(s)}catch(Iw){return ho(Iw)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(pt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(tr.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new cr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new or(n,this.serializeUrl(r),i,o);e.next(a);const u=ui(r,this.rootComponentType).snapshot;return Object(Te.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Sn.a}),bo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(tr.a)(t=>{const e=new lr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(pt.a)(t=>Object.assign(Object.assign({},t),{guards:so(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Se.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Te.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(yt.a)(t).pipe(Object(Se.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Te.a)(!0);const s=o.map(o=>{const s=ao(o,e,i);let a;if(function(t){return t&&Ri(t.canDeactivate)}(s))a=kr(s.canDeactivate(t,e,n,r));else{if(!Ri(s))throw new Error("Invalid CanDeactivate guard");a=kr(s(t,e,n,r))}return a.pipe(Zn())});return Object(Te.a)(s).pipe(Mi())}(t.component,t.route,n,e,r)),Zn(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Se.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(yt.a)(e).pipe(Ce(e=>Tn(function(t,e){return null!==t&&e&&e(new yr(t)),Object(Te.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new vr(t)),Object(Te.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Cn(()=>{const i=e.guards.map(i=>{const o=ao(i,e.node,n);let s;if(function(t){return t&&Ri(t.canActivateChild)}(o))s=kr(o.canActivateChild(r,t));else{if(!Ri(o))throw new Error("Invalid CanActivateChild guard");s=kr(o(r,t))}return s.pipe(Zn())});return Object(Te.a)(i).pipe(Mi())}));return Object(Te.a)(i).pipe(Mi())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Te.a)(!0);const i=r.map(r=>Cn(()=>{const i=ao(r,e,n);let o;if(function(t){return t&&Ri(t.canActivate)}(i))o=kr(i.canActivate(e,t));else{if(!Ri(i))throw new Error("Invalid CanActivate guard");o=kr(i(e,t))}return o.pipe(Zn())}));return Object(Te.a)(i).pipe(Mi())}(t,e.route,n))),Zn(t=>!0!==t,!0))}(r,o,t,e):Object(Te.a)(n)),Object(pt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(tr.a)(t=>{if(Pi(t.guardsResult)){const e=Tr(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new hr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),xe(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new ar(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),bo(t=>{if(t.guards.canActivateChecks.length)return Object(Te.a)(t).pipe(Object(tr.a)(t=>{const e=new fr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),xn(t=>{let n=!1;return Object(Te.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Se.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Te.a)(t);let o=0;return Object(yt.a)(n).pipe(Ce(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Te.a)({});const o={};return Object(yt.a)(i).pipe(Object(Se.a)(i=>function(t,e,n,r){const i=ao(t,e,r);return kr(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(tr.a)(t=>{o[i]=t}))),Bn(1),Object(Se.a)(()=>Object.keys(o).length===i.length?Object(Te.a)(o):Sn.a))}(t._resolve,t,e,r).pipe(Object(pt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),li(t,n).resolve),null)))}(t.route,e,r,i)),Object(tr.a)(()=>o++),Bn(1),Object(Se.a)(e=>o===n.length?Object(Te.a)(t):Sn.a))})),Object(tr.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new ar(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(tr.a)(t=>{const e=new dr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),bo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(pt.a)(t=>{const e=function(t,e,n){const r=mi(t,e._root,n?n._root:void 0);return new ai(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(tr.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(pt.a)(t=>(new ki(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(tr.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new ar(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new nr(i))),Fn(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Pi(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new ar(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new ur(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch($h){t.reject($h)}}var i;return Sn.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fi(t),this.config=t.map(Bi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return _i(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Oi(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return jr(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Oi(n,e,r)}(n);if(o.toRoot())return _i(e.root,new Mr([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Ti(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ti(t,t===e.root,0)}const r=bi(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ti(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Ci(s.segmentGroup,s.index,o.commands):Si(s.segmentGroup,s.index,o.commands);return _i(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Pi(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Iw){e=this.malformedUriErrorHandler(Iw,this.urlSerializer,t)}return e}isActive(t,e){if(Pi(t))return Nr(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Nr(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new sr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.N),r.Qb(Ur),r.Qb(To),r.Qb(_),r.Qb(r.s),r.Qb(r.x),r.Qb(r.i),r.Qb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),jo=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new ln.a,this.subscription=t.events.subscribe(t=>{t instanceof sr&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:ko(this.skipLocationChange),replaceUrl:ko(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ko(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ao),r.Kb(ci),r.Kb(y))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Tb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Pb("href",e.href,r.Yb),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function ko(t){return""===t||!!t}let No=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||_r,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Do(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(To),r.Kb(r.Q),r.Kb(r.j),r.Rb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Do{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===ci?this.route:t===To?this.childContexts:this.parent.get(t,e)}}class Ro{}class Po{preload(t,e){return Object(Te.a)(null)}}let Lo=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Eo(e,n,e=>t.triggerEvent(new pr(e)),e=>t.triggerEvent(new gr(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(xe(t=>t instanceof sr),Ce(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(yt.a)(n).pipe(Object(On.a)(),Object(pt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Se.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ao),r.Qb(r.x),r.Qb(r.i),r.Qb(r.s),r.Qb(Ro))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Mo=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof or?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sr&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wr&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new wr(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ao),r.Qb(R),r.Qb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Vo=new r.r("ROUTER_CONFIGURATION"),Fo=new r.r("ROUTER_FORROOT_GUARD"),Uo=[_,{provide:Ur,useClass:qr},{provide:Ao,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Ao(null,t,e,n,r,i,s,xr(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Ur,To,_,r.s,r.x,r.i,_o,Vo,[class{},new r.B],[class{},new r.B]]},To,{provide:ci,useFactory:function(t){return t.routerState.root},deps:[Ao]},{provide:r.x,useClass:r.K},Lo,Po,class{preload(t,e){return e().pipe(Fn(()=>Object(Te.a)(null)))}},{provide:Vo,useValue:{enableTracing:!1}}];function qo(){return new r.z("Router",Ao)}let Bo=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Uo,Qo(e),{provide:Fo,useFactory:Go,deps:[[Ao,new r.B,new r.J]]},{provide:Vo,useValue:n||{}},{provide:y,useFactory:zo,deps:[a,[new r.p(v),new r.B],Vo]},{provide:Mo,useFactory:Ho,deps:[Ao,R,Vo]},{provide:Ro,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Po},{provide:r.z,multi:!0,useFactory:qo},[Ko,{provide:r.d,multi:!0,useFactory:Wo,deps:[Ko]},{provide:Yo,useFactory:$o,deps:[Ko]},{provide:r.b,multi:!0,useExisting:Yo}]]}}static forChild(e){return{ngModule:t,providers:[Qo(e)]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Qb(Fo,8),r.Qb(Ao,8))}}),t})();function Ho(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Mo(t,e,n)}function zo(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function Go(t){return"guarded"}function Qo(t){return[{provide:r.a,multi:!0,useValue:t},{provide:_o,multi:!0,useValue:t}]}let Ko=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new ln.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Ao),r=this.injector.get(Vo);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Te.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Vo),n=this.injector.get(Lo),i=this.injector.get(Mo),o=this.injector.get(Ao),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Wo(t){return t.appInitializer.bind(t)}function $o(t){return t.bootstrapListener.bind(t)}const Yo=new r.r("Router Initializer"),Jo=function(){return["/home"]};let Xo=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-error"]],decls:4,vars:2,consts:[["role","main",1,"content"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.bc(1," 404 "),r.Nb(2,"a",1),r.bc(3,"Home"),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.Vb("routerLink",r.Wb(1,Jo)))},directives:[jo],styles:[""]}),t})();const Zo={apiKey:"AIzaSyCMvcgjY5RwhsKVDjzlsIqhQClZpghwieY",authDomain:"progrendszerek.firebaseapp.com",projectId:"progrendszerek",storageBucket:"progrendszerek.appspot.com",messagingSenderId:"564541083916",appId:"1:564541083916:web:6dd180136d53ede421b929"};let ts=(()=>{class t{constructor(t){this.http=t}greet(){return this.http.get("https://progrendszerek.herokuapp.com/",{responseType:"text",withCredentials:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ke))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var es=n("D0XW");function ns(){return t=>t.lift(new rs)}class rs{call(t,e){return e.subscribe(new is(t))}}class is extends Ie.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class os{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new ss(t,this.compare,this.keySelector))}}class ss extends Ie.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var as=n("pxpQ"),us=n("spgP"),cs=n("Jgta"),ls=n("zIRd"),hs=n("q/0M"),fs=n("qOnz"),ds=function(t,e){return(ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ps(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var gs,ys="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ms=ms||{},vs=ys||self;function bs(){}function ws(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _s(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Es="closure_uid_"+(1e9*Math.random()>>>0),Os=0;function Ts(t,e,n){return t.call.apply(t.bind,arguments)}function Ss(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Cs(t,e,n){return(Cs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ts:Ss).apply(null,arguments)}function Is(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function xs(){return Date.now()}function As(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function js(){this.j=this.j,this.i=this.i}js.prototype.j=!1,js.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Es)&&t[Es]||(t[Es]=++Os)}(this)},js.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ks=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ns=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ds(t){return Array.prototype.concat.apply([],arguments)}function Rs(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ps(t){return/^[\s\xa0]*$/.test(t)}var Ls,Ms=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Vs(t,e){return-1!=t.indexOf(e)}function Fs(t,e){return t<e?-1:t>e?1:0}t:{var Us=vs.navigator;if(Us){var qs=Us.userAgent;if(qs){Ls=qs;break t}}Ls=""}function Bs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Hs(t){var e={};for(var n in t)e[n]=t[n];return e}var zs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<zs.length;o++)n=zs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qs(t){return Qs[" "](t),t}Qs[" "]=bs;var Ks,Ws,$s=Vs(Ls,"Opera"),Ys=Vs(Ls,"Trident")||Vs(Ls,"MSIE"),Js=Vs(Ls,"Edge"),Xs=Js||Ys,Zs=Vs(Ls,"Gecko")&&!(Vs(Ls.toLowerCase(),"webkit")&&!Vs(Ls,"Edge"))&&!(Vs(Ls,"Trident")||Vs(Ls,"MSIE"))&&!Vs(Ls,"Edge"),ta=Vs(Ls.toLowerCase(),"webkit")&&!Vs(Ls,"Edge");function ea(){var t=vs.document;return t?t.documentMode:void 0}t:{var na="",ra=(Ws=Ls,Zs?/rv:([^\);]+)(\)|;)/.exec(Ws):Js?/Edge\/([\d\.]+)/.exec(Ws):Ys?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ws):ta?/WebKit\/(\S+)/.exec(Ws):$s?/(?:Version)[ \/]?(\S+)/.exec(Ws):void 0);if(ra&&(na=ra?ra[1]:""),Ys){var ia=ea();if(null!=ia&&ia>parseFloat(na)){Ks=String(ia);break t}}Ks=na}var oa={};function sa(t){return function(t,e){var n=oa;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Ms(String(Ks)).split("."),r=Ms(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Fs(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Fs(0==s[2].length,0==a[2].length)||Fs(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var aa=vs.document&&Ys&&(ea()||parseInt(Ks,10))||void 0,ua=!Ys||9<=Number(aa),ca=Ys&&!sa("9"),la=function(){if(!vs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{vs.addEventListener("test",bs,e),vs.removeEventListener("test",bs,e)}catch(n){}return t}();function ha(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function fa(t,e){if(ha.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Zs){t:{try{Qs(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:da[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ha.prototype.b=function(){this.defaultPrevented=!0},As(fa,ha);var da={2:"touch",3:"pen",4:"mouse"};fa.prototype.b=function(){fa.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ca)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var pa="closure_listenable_"+(1e6*Math.random()|0),ga=0;function ya(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ga,this.Y=this.Z=!1}function ma(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function va(t){this.src=t,this.a={},this.b=0}function ba(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ks(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ma(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function wa(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}va.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=wa(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ya(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var _a="closure_lm_"+(1e6*Math.random()|0),Ea={};function Oa(t,e,n,r,i){if(r&&r.once)return Sa(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Oa(t,e[o],n,r,i);return null}return n=Da(n),t&&t[pa]?t.va(e,n,_s(r)?!!r.capture:!!r,i):Ta(t,e,n,!1,r,i)}function Ta(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=_s(i)?!!i.capture:!!i;if(s&&!ua)return null;var a=ka(t);if(a||(t[_a]=a=new va(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ja,e=ua?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)la||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xa(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Sa(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Sa(t,e[o],n,r,i);return null}return n=Da(n),t&&t[pa]?t.wa(e,n,_s(r)?!!r.capture:!!r,i):Ta(t,e,n,!0,r,i)}function Ca(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ca(t,e[o],n,r,i);else r=_s(r)?!!r.capture:!!r,n=Da(n),t&&t[pa]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=wa(o=t.a[e],n,r,i))&&(ma(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ka(t))&&(e=t.a[e.toString()],t=-1,e&&(t=wa(e,n,r,i)),(n=-1<t?e[t]:null)&&Ia(n))}function Ia(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[pa])ba(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xa(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ka(e))?(ba(n,t),0==n.b&&(n.src=null,e[_a]=null)):ma(t)}}}function xa(t){return t in Ea?Ea[t]:Ea[t]="on"+t}function Aa(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ia(t),n.call(r,e)}function ja(t,e){if(t.Y)return!0;if(!ua){if(!e)t:{e=["window","event"];for(var n=vs,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Aa(t,e=new fa(e,this))}return Aa(t,new fa(e,this))}function ka(t){return(t=t[_a])instanceof va?t:null}var Na="__closure_events_fn_"+(1e9*Math.random()>>>0);function Da(t){return"function"==typeof t?t:(t[Na]||(t[Na]=function(e){return t.handleEvent(e)}),t[Na])}function Ra(){js.call(this),this.c=new va(this),this.J=this,this.C=null}function Pa(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ha(e,t);else if(e instanceof ha)e.target=e.target||t;else{var i=e;Gs(e=new ha(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=La(s,r,!0,e)&&i}if(i=La(s=e.a=t,r,!0,e)&&i,i=La(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=La(s=e.a=n[o],r,!1,e)&&i}function La(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ba(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}As(Ra,js),Ra.prototype[pa]=!0,(gs=Ra.prototype).addEventListener=function(t,e,n,r){Oa(this,t,e,n,r)},gs.removeEventListener=function(t,e,n,r){Ca(this,t,e,n,r)},gs.G=function(){if(Ra.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ma(n[r]);delete e.a[t],e.b--}}this.C=null},gs.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},gs.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ma=vs.JSON.stringify;function Va(){this.b=this.a=null}var Fa,Ua=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ba},function(t){t.reset()});function qa(){var t=Qa,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ba(){this.next=this.b=this.a=null}function Ha(t){vs.setTimeout(function(){throw t},0)}function za(t,e){Fa||function(){var t=vs.Promise.resolve(void 0);Fa=function(){t.then(Ka)}}(),Ga||(Fa(),Ga=!0),Qa.add(t,e)}Va.prototype.add=function(t,e){var n=Ua.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ba.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ba.prototype.reset=function(){this.next=this.b=this.a=null};var Ga=!1,Qa=new Va;function Ka(){for(var t;t=qa();){try{t.a.call(t.b)}catch(n){Ha(n)}var e=Ua;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ga=!1}function Wa(t,e){Ra.call(this),this.b=t||1,this.a=e||vs,this.f=Cs(this.Za,this),this.g=xs()}function $a(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ya(t,e,n){if("function"==typeof t)n&&(t=Cs(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Cs(t.handleEvent,t)}return 2147483647<Number(e)?-1:vs.setTimeout(t,e||0)}function Ja(t){t.a=Ya(function(){t.a=null,t.c&&(t.c=!1,Ja(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}As(Wa,Ra),(gs=Wa.prototype).aa=!1,gs.M=null,gs.Za=function(){if(this.aa){var t=xs()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Pa(this,"tick"),this.aa&&($a(this),this.start()))}},gs.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=xs())},gs.G=function(){Wa.X.G.call(this),$a(this),delete this.a};var Xa=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}ds(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ja(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(vs.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(js);function Za(t){js.call(this),this.b=t,this.a={}}As(Za,js);var tu=[];function eu(t,e,n,r){Array.isArray(n)||(n&&(tu[0]=n.toString()),n=tu);for(var i=0;i<n.length;i++){var o=Oa(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function nu(t){Bs(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ia(t)},t),t.a={}}function ru(){this.a=!0}function iu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ma(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Za.prototype.G=function(){Za.X.G.call(this),nu(this)},Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ru.prototype.info=function(){};var ou={},su=null;function au(){return su=su||new Ra}function uu(t){ha.call(this,ou.Fa,t)}function cu(t){var e=au();Pa(e,new uu(e,t))}function lu(t,e){ha.call(this,ou.STAT_EVENT,t),this.stat=e}function hu(t){var e=au();Pa(e,new lu(e,t))}function fu(t){ha.call(this,ou.Ga,t)}function du(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return vs.setTimeout(function(){t()},e)}ou.Fa="serverreachability",As(uu,ha),ou.STAT_EVENT="statevent",As(lu,ha),ou.Ga="timingevent",As(fu,ha);var pu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},gu={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function yu(){}function mu(){}yu.prototype.a=null;var vu,bu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function wu(){ha.call(this,"d")}function _u(){ha.call(this,"c")}function Eu(){}function Ou(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Za(this),this.P=Tu,this.R=new Wa(t=Xs?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}As(wu,ha),As(_u,ha),As(Eu,yu),vu=new Eu;var Tu=45e3,Su={},Cu={};function Iu(t,e,n){t.H=1,t.i=$u(Hu(e)),t.j=n,t.I=!0,xu(t,null)}function xu(t,e){t.u=xs(),ku(t),t.l=Hu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),uc(n.b,"t",r),t.D=0,t.a=nl(t.g,t.g.C?e:null),0<t.O&&(t.F=new Xa(Cs(t.Ca,t,t.a),t.O)),eu(t.J,t.a,"readystatechange",t.Xa),e=t.B?Hs(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),cu(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Au(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ju(t,n);if(i==Cu){4==e&&(t.h=4,hu(14),r=!1),iu(t.c,t.f,null,"[Incomplete Response]");break}if(i==Su){t.h=4,hu(15),iu(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}iu(t.c,t.f,i,null),Lu(t,i)}4==e&&0==n.length&&(t.h=1,hu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wc(e),e.F=!0,hu(11))):(iu(t.c,t.f,n,"[Invalid Chunked Response]"),Pu(t),Ru(t))}function ju(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Cu:(n=Number(e.substring(n,r)),isNaN(n)?Su:(r+=1)+n>e.length?Cu:(e=e.substr(r,n),t.D=r+n,e))}function ku(t){t.T=xs()+t.P,Nu(t,t.P)}function Nu(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=du(Cs(t.Va,t),e)}function Du(t){t.o&&(vs.clearTimeout(t.o),t.o=null)}function Ru(t){0==t.g.v||t.A||Jc(t.g,t)}function Pu(t){Du(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,$a(t.R),nu(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Lu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||gc(n.b,t)))if(n.I=t.N,!t.C&&gc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Ub){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Yc(n),Fc(n)}Kc(n),hu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=du(Cs(n.Sa,n),6e3));if(1>=pc(n.b)&&n.ea){try{n.ea()}catch(Ub){}n.ea=void 0}}else Zc(n,11)}else if((t.C||n.a==t)&&Yc(n),!Ps(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Vs(l,"spdy")||Vs(l,"quic")||Vs(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(yc(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Wu(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=xs()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=el(u,u.C?u.ga:null,u.fa),d.C){mc(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Du(p),ku(p)),u.a=d}else Qc(u);0<n.g.length&&Bc(n)}else"stop"!=i[0]&&"close"!=i[0]||Zc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Zc(n,7):Vc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);cu(4)}catch(Ub){}}function Mu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ws(t)||"string"==typeof t)Ns(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ws(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ws(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Vu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Vu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Fu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Uu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Uu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Uu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(gs=Ou.prototype).setTimeout=function(t){this.P=t},gs.Xa=function(t){t=t.target;var e=this.F;e&&3==Rc(t)?e.f():this.Ca(t)},gs.Ca=function(t){try{if(t==this.a)t:{var e=Rc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Xs&&!this.a.$())){this.A||4!=e||7==n||cu(8==n||0>=r?3:2),Du(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ps(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,hu(12),Pu(this),Ru(this);break t}iu(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Lu(this,u)}this.I?(Au(this,e,o),Xs&&this.b&&3==e&&(eu(this.J,this.R,"tick",this.Wa),this.R.start())):(iu(this.c,this.f,o,null),Lu(this,o)),4==e&&Pu(this),this.b&&!this.A&&(4==e?Jc(this.g,this):(this.b=!1,ku(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,hu(12)):(this.h=0,hu(13)),Pu(this),Ru(this)}}}catch(c){}},gs.Wa=function(){if(this.a){var t=Rc(this.a),e=this.a.$();this.D<e.length&&(Du(this),Au(this,t,e),this.b&&4!=t&&ku(this))}},gs.cancel=function(){this.A=!0,Pu(this)},gs.Va=function(){this.o=null;var t=xs();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(cu(3),hu(17)),Pu(this),this.h=2,Ru(this)):Nu(this,this.T-t)},(gs=Vu.prototype).K=function(){Fu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},gs.L=function(){return Fu(this),this.a.concat()},gs.get=function(t,e){return Uu(this.b,t)?this.b[t]:e},gs.set=function(t,e){Uu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},gs.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Bu){this.a=void 0!==e?e:t.a,zu(this,t.f),this.j=t.j,Gu(this,t.c),Qu(this,t.h),this.g=t.g,e=t.b;var n=new ic;n.c=e.c,e.a&&(n.a=new Vu(e.a),n.b=e.b),Ku(this,n),this.i=t.i}else t&&(n=String(t).match(qu))?(this.a=!!e,zu(this,n[1]||"",!0),this.j=Yu(n[2]||""),Gu(this,n[3]||"",!0),Qu(this,n[4]),this.g=Yu(n[5]||"",!0),Ku(this,n[6]||"",!0),this.i=Yu(n[7]||"")):(this.a=!!e,this.b=new ic(null,this.a))}function Hu(t){return new Bu(t)}function zu(t,e,n){t.f=n?Yu(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Gu(t,e,n){t.c=n?Yu(e,!0):e}function Qu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ku(t,e,n){e instanceof ic?(t.b=e,function(t,e){e&&!t.f&&(oc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(sc(this,e),uc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Ju(e,nc)),t.b=new ic(e,t.a))}function Wu(t,e,n){t.b.set(e,n)}function $u(t){return Wu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^xs()).toString(36)),t}function Yu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ju(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Xu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Xu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Bu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ju(e,Zu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ju(e,Zu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ju(n,"/"==n.charAt(0)?ec:tc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ju(n,rc)),t.join("")};var Zu=/[#\/\?@]/g,tc=/[#\?:]/g,ec=/[#\?]/g,nc=/[#\?@]/g,rc=/#/g;function ic(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function oc(t){t.a||(t.a=new Vu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function sc(t,e){oc(t),e=cc(t,e),Uu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Uu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Fu(t)))}function ac(t,e){return oc(t),e=cc(t,e),Uu(t.a.b,e)}function uc(t,e,n){sc(t,e),0<n.length&&(t.c=null,t.a.set(cc(t,e),Rs(n)),t.b+=n.length)}function cc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(gs=ic.prototype).add=function(t,e){oc(this),this.c=null,t=cc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},gs.forEach=function(t,e){oc(this),this.a.forEach(function(n,r){Ns(n,function(n){t.call(e,n,r,this)},this)},this)},gs.L=function(){oc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},gs.K=function(t){oc(this);var e=[];if("string"==typeof t)ac(this,t)&&(e=Ds(e,this.a.get(cc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ds(e,t[n])}return e},gs.set=function(t,e){return oc(this),this.c=null,ac(this,t=cc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},gs.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},gs.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var lc=function(){return function(t,e){this.b=t,this.a=e}}();function hc(t){this.g=t||fc,t=vs.PerformanceNavigationTiming?0<(t=vs.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(vs.ia&&vs.ia.ya&&vs.ia.ya()&&vs.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var fc=10;function dc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function pc(t){return t.b?1:t.a?t.a.size:0}function gc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function yc(t,e){t.a?t.a.add(e):t.b=e}function mc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function vc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ps(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Rs(t.c)}function bc(){}function wc(){this.a=new bc}function _c(t,e,n){var r=n||"";try{Mu(t,function(t,n){var i=t;_s(t)&&(i=Ma(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Iw){throw e.push(r+"type="+encodeURIComponent("_badmap")),Iw}}function Ec(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}hc.prototype.cancel=function(){var t,e;if(this.c=vc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ps(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},bc.prototype.stringify=function(t){return vs.JSON.stringify(t,void 0)},bc.prototype.parse=function(t){return vs.JSON.parse(t,void 0)};var Oc=vs.JSON.parse;function Tc(t){Ra.call(this),this.headers=new Vu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Sc,this.D=this.F=!1}As(Tc,Ra);var Sc="",Cc=/^https?$/i,Ic=["POST","PUT"];function xc(t){return"content-type"==t.toLowerCase()}function Ac(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,jc(t),Nc(t)}function jc(t){t.u||(t.u=!0,Pa(t,"complete"),Pa(t,"error"))}function kc(t){if(t.b&&void 0!==ms&&(!t.s[1]||4!=Rc(t)||2!=t.W()))if(t.l&&4==Rc(t))Ya(t.za,0,t);else if(Pa(t,"readystatechange"),4==Rc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(qu)[1]||null;if(!o&&vs.self&&vs.self.location){var s=vs.self.location.protocol;o=s.substr(0,s.length-1)}i=!Cc.test(o?o.toLowerCase():"")}e=i}if(e)Pa(t,"complete"),Pa(t,"success");else{t.h=6;try{var a=2<Rc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",jc(t)}}finally{Nc(t)}}}function Nc(t,e){if(t.a){Dc(t);var n=t.a,r=t.s[0]?bs:null;t.a=null,t.s=null,e||Pa(t,"ready");try{n.onreadystatechange=r}catch(Iw){}}}function Dc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(vs.clearTimeout(t.m),t.m=null)}function Rc(t){return t.a?t.a.readyState:0}function Pc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Bs(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Wu(t,e,n))}function Lc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Mc(t){this.pa=0,this.g=[],this.c=new ru,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Lc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Lc("baseRetryDelayMs",5e3,t),this.Ra=Lc("retryDelaySeedMs",1e4,t),this.Ma=Lc("forwardChannelMaxRetries",2,t),this.ma=Lc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new hc(t&&t.concurrentRequestLimit),this.ka=new wc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Vc(t){if(Uc(t),3==t.v){var e=t.R++,n=Hu(t.B);Wu(n,"SID",t.J),Wu(n,"RID",e),Wu(n,"TYPE","terminate"),zc(t,n),(e=new Ou(t,t.c,e,void 0)).H=2,e.i=$u(Hu(n)),n=!1,vs.navigator&&vs.navigator.sendBeacon&&(n=vs.navigator.sendBeacon(e.i.toString(),"")),!n&&vs.Image&&((new Image).src=e.i,n=!0),n||(e.a=nl(e.g,null),e.a.ba(e.i)),e.u=xs(),ku(e)}tl(t)}function Fc(t){t.a&&(Wc(t),t.a.cancel(),t.a=null)}function Uc(t){Fc(t),t.j&&(vs.clearTimeout(t.j),t.j=null),Yc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&vs.clearTimeout(t.h),t.h=null)}function qc(t,e){t.g.push(new lc(t.Oa++,e)),3==t.v&&Bc(t)}function Bc(t){dc(t.b)||t.h||(t.h=!0,za(t.Ba,t),t.u=0)}function Hc(t,e){var n;n=e?e.f:t.R++;var r=Hu(t.B);Wu(r,"SID",t.J),Wu(r,"RID",n),Wu(r,"AID",t.P),zc(t,r),t.i&&t.l&&Pc(r,t.i,t.l),n=new Ou(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Gc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),yc(t.b,n),Iu(n,r,e)}function zc(t,e){t.f&&Mu({},function(t,n){Wu(e,n,t)})}function Gc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Cs(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{_c(l,s,"req"+c+"_")}catch(Pl){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Qc(t){t.a||t.j||(t.T=1,za(t.Aa,t),t.o=0)}function Kc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=du(Cs(t.Aa,t),Xc(t,t.o)),t.o++,0))}function Wc(t){null!=t.s&&(vs.clearTimeout(t.s),t.s=null)}function $c(t){t.a=new Ou(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Hu(t.la);Wu(e,"RID","rpc"),Wu(e,"SID",t.J),Wu(e,"CI",t.H?"0":"1"),Wu(e,"AID",t.P),zc(t,e),Wu(e,"TYPE","xmlhttp"),t.i&&t.l&&Pc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=$u(Hu(e)),n.j=null,n.I=!0,xu(n,t)}function Yc(t){null!=t.m&&(vs.clearTimeout(t.m),t.m=null)}function Jc(t,e){var n=null;if(t.a==e){Yc(t),Wc(t),t.a=null;var r=2}else{if(!gc(t.b,e))return;n=e.s,mc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=xs()-e.u;var i=t.u;Pa(r=au(),new fu(r,n,e,i)),Bc(t)}else Qc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(pc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=du(Cs(t.Ba,t,e),Xc(t,t.u)),t.u++,0)))}(t,e)||2==r&&Kc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Zc(t,5);break;case 4:Zc(t,10);break;case 3:Zc(t,6);break;default:Zc(t,2)}}function Xc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Zc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Cs(t.Ya,t);n||(n=new Bu("//www.google.com/images/cleardot.gif"),vs.location&&"http"==vs.location.protocol||zu(n,"https"),$u(n)),function(t,e){var n=new ru;if(vs.Image){var r=new Image;r.onload=Is(Ec,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Is(Ec,n,r,"TestLoadImage: error",!1,e),r.onabort=Is(Ec,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Is(Ec,n,r,"TestLoadImage: timeout",!1,e),vs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else hu(2);t.v=0,t.f&&t.f.ra(e),tl(t),Uc(t)}function tl(t){t.v=0,t.I=-1,t.f&&(0==vc(t.b).length&&0==t.g.length||(t.b.c.length=0,Rs(t.g),t.g.length=0),t.f.qa())}function el(t,e,n){var r=function(t){return t instanceof Bu?Hu(t):new Bu(t,void 0)}(n);if(""!=r.c)e&&Gu(r,e+"."+r.c),Qu(r,r.h);else{var i=vs.location;r=function(t,e,n,r){var i=new Bu(null,void 0);return t&&zu(i,t),e&&Gu(i,e),n&&Qu(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Bs(t.V,function(t,e){Wu(r,e,t)}),n=t.na,(e=t.A)&&n&&Wu(r,e,n),Wu(r,"VER",t.ha),zc(t,r),r}function nl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tc(t.Na)).F=t.C,e}function rl(){}function il(){if(Ys&&!(10<=Number(aa)))throw Error("Environmental error: no available transport.")}function ol(t,e){Ra.call(this),this.a=new Mc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ps(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ps(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ul(this)}function sl(t){wu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function al(){_u.call(this),this.status=1}function ul(t){this.a=t}(gs=Tc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:vu),this.a.onreadystatechange=Cs(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Ac(this,o)}t=n||"";var i=new Vu(this.headers);r&&Mu(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=xc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=vs.FormData&&t instanceof vs.FormData,!(0<=ks(Ic,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dc(this),0<this.o&&((this.D=function(t){return Ys&&sa(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Cs(this.xa,this)):this.m=Ya(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Ac(this,o)}},gs.xa=function(){void 0!==ms&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Pa(this,"timeout"),this.abort(8))},gs.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Pa(this,"complete"),Pa(this,"abort"),Nc(this))},gs.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Nc(this,!0)),Tc.X.G.call(this)},gs.za=function(){this.j||(this.A||this.l||this.g?kc(this):this.Ua())},gs.Ua=function(){kc(this)},gs.W=function(){try{return 2<Rc(this)?this.a.status:-1}catch(Ws){return-1}},gs.$=function(){try{return this.a?this.a.responseText:""}catch(Ws){return""}},gs.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Oc(e)}},gs.ua=function(){return this.h},gs.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(gs=Mc.prototype).ha=8,gs.v=1,gs.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ou(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Gs(r=Hs(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Gc(this,n,e),Wu(i=Hu(this.B),"RID",t),Wu(i,"CVER",22),this.A&&Wu(i,"X-HTTP-Session-Id",this.A),zc(this,i),this.i&&r&&Pc(i,this.i,r),yc(this.b,n),this.Ia&&Wu(i,"TYPE","init"),this.da?(Wu(i,"$req",e),Wu(i,"SID","null"),n.U=!0,Iu(n,i,null)):Iu(n,i,e),this.v=2}}else 3==this.v&&(t?Hc(this,t):0==this.g.length||dc(this.b)||Hc(this))},gs.Aa=function(){if(this.j=null,$c(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=du(Cs(this.Ta,this),t)}},gs.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,hu(10),Fc(this),$c(this))},gs.Sa=function(){null!=this.m&&(this.m=null,Fc(this),Kc(this),hu(19))},gs.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),hu(2)):(this.c.info("Failed to ping google.com"),hu(1))},(gs=rl.prototype).ta=function(){},gs.sa=function(){},gs.ra=function(){},gs.qa=function(){},gs.Ja=function(){},il.prototype.a=function(t,e){return new ol(t,e)},As(ol,Ra),ol.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;hu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=el(t,null,t.fa),Bc(t)},ol.prototype.close=function(){Vc(this.a)},ol.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,qc(this.a,e)}else this.l?((e={}).__data__=Ma(t),qc(this.a,e)):qc(this.a,t)},ol.prototype.G=function(){this.a.f=null,delete this.f,Vc(this.a),delete this.a,ol.X.G.call(this)},As(sl,wu),As(al,_u),As(ul,rl),ul.prototype.ta=function(){Pa(this.a,"a")},ul.prototype.sa=function(t){Pa(this.a,new sl(t))},ul.prototype.ra=function(t){Pa(this.a,new al(t))},ul.prototype.qa=function(){Pa(this.a,"b")},il.prototype.createWebChannel=il.prototype.a,ol.prototype.send=ol.prototype.h,ol.prototype.open=ol.prototype.g,ol.prototype.close=ol.prototype.close,pu.NO_ERROR=0,pu.TIMEOUT=8,pu.HTTP_ERROR=6,gu.COMPLETE="complete",mu.EventType=bu,bu.OPEN="a",bu.CLOSE="b",bu.ERROR="c",bu.MESSAGE="d",Ra.prototype.listen=Ra.prototype.va,Tc.prototype.listenOnce=Tc.prototype.wa,Tc.prototype.getLastError=Tc.prototype.Qa,Tc.prototype.getLastErrorCode=Tc.prototype.ua,Tc.prototype.getStatus=Tc.prototype.W,Tc.prototype.getResponseJson=Tc.prototype.Pa,Tc.prototype.getResponseText=Tc.prototype.$,Tc.prototype.send=Tc.prototype.ba;var cl=pu,ll=gu,hl=ou,fl=mu,dl=Tc,pl=n("mrSG"),gl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();gl.o=-1;var yl=new hs.b("@firebase/firestore");function ml(){return yl.logLevel}function vl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yl.logLevel<=hs.a.DEBUG){var r=e.map(_l);yl.debug.apply(yl,Object(pl.f)(["Firestore (8.3.1): "+t],r))}}function bl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yl.logLevel<=hs.a.ERROR){var r=e.map(_l);yl.error.apply(yl,Object(pl.f)(["Firestore (8.3.1): "+t],r))}}function wl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yl.logLevel<=hs.a.WARN){var r=e.map(_l);yl.warn.apply(yl,Object(pl.f)(["Firestore (8.3.1): "+t],r))}}function _l(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Iw){return t}}function El(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw bl(e),new Error(e)}function Ol(t,e){t||El()}function Tl(t,e){return t}function Sl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Cl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Sl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Il(t,e){return t<e?-1:t>e?1:0}function xl(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Al(t){return t+"\0"}function jl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function kl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Nl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dl(t){return null==t}function Rl(t){return 0===t&&1/t==-1/0}function Pl(t){return"number"==typeof t&&Number.isInteger(t)&&!Rl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ll={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ml=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(pl.c)(e,t),e}(Error),Vl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&El(),void 0===n?n=t.length-e:n>t.length-e&&El(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Vl),Ul=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ql=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ul.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ml(Ll.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ml(Ll.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ml(Ll.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Vl),Bl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Fl.fromString(e))},t.fromName=function(e){return new t(Fl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Fl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Fl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Fl(e.slice()))},t}(),Hl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Il(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Hl.EMPTY_BYTE_STRING=new Hl("");var zl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gl(t){if(Ol(!!t),"string"==typeof t){var e=0,n=zl.exec(t);if(Ol(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ql(t.seconds),nanos:Ql(t.nanos)}}function Ql(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Kl(t){return"string"==typeof t?Hl.fromBase64String(t):Hl.fromUint8Array(t)}var Wl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ml(Ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ml(Ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ml(Ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ml(Ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Il(this.nanoseconds,t.nanoseconds):Il(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function $l(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yl(t){var e=t.mapValue.fields.__previous_value__;return $l(e)?Yl(e):e}function Jl(t){var e=Gl(t.mapValue.fields.__local_write_time__.timestampValue);return new Wl(e.seconds,e.nanos)}function Xl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$l(t)?4:10:El()}function Zl(t,e){var n=Xl(t);if(n!==Xl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Gl(t.timestampValue),r=Gl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Kl(t.bytesValue).isEqual(Kl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ql(t.geoPointValue.latitude)===Ql(e.geoPointValue.latitude)&&Ql(t.geoPointValue.longitude)===Ql(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ql(t.integerValue)===Ql(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ql(t.doubleValue),r=Ql(e.doubleValue);return n===r?Rl(n)===Rl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return xl(t.arrayValue.values||[],e.arrayValue.values||[],Zl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(jl(n)!==jl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zl(n[i],r[i])))return!1;return!0}(t,e);default:return El()}}function th(t,e){return void 0!==(t.values||[]).find(function(t){return Zl(t,e)})}function eh(t,e){var n=Xl(t),r=Xl(e);if(n!==r)return Il(n,r);switch(n){case 0:return 0;case 1:return Il(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ql(t.integerValue||t.doubleValue),r=Ql(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return nh(t.timestampValue,e.timestampValue);case 4:return nh(Jl(t),Jl(e));case 5:return Il(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Kl(t),r=Kl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Il(n[i],r[i]);if(0!==o)return o}return Il(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Il(Ql(t.latitude),Ql(e.latitude));return 0!==n?n:Il(Ql(t.longitude),Ql(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=eh(n[i],r[i]);if(o)return o}return Il(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Il(r[s],o[s]);if(0!==a)return a;var u=eh(n[r[s]],i[o[s]]);if(0!==u)return u}return Il(r.length,o.length)}(t.mapValue,e.mapValue);default:throw El()}}function nh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Il(t,e);var n=Gl(t),r=Gl(e),i=Il(n.seconds,r.seconds);return 0!==i?i:Il(n.nanos,r.nanos)}function rh(t){return ih(t)}function ih(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Gl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Kl(t.bytesValue).toBase64():"referenceValue"in t?Bl.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ih(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ih(t.fields[o])}return e+"}"}(t.mapValue):El();var e}function oh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function sh(t){return!!t&&"integerValue"in t}function ah(t){return!!t&&"arrayValue"in t}function uh(t){return!!t&&"nullValue"in t}function ch(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lh(t){return!!t&&"mapValue"in t}var hh=function(t,e){this.key=t,this.version=e},fh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(pl.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(hh),dh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(pl.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(hh),ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(hh),gh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function yh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new gh(t,e,n,r,i,o,s)}function mh(t){var e=Tl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+rh(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Dl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=jh(e.startAt)),e.endAt&&(n+="|ub:",n+=jh(e.endAt)),e.h=n}return e.h}function vh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Nh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Zl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rh(t.startAt,e.startAt)&&Rh(t.endAt,e.endAt)}function bh(t){return Bl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var wh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(pl.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new _h(t,n,r):"array-contains"===n?new Sh(t,r):"in"===n?new Ch(t,r):"not-in"===n?new Ih(t,r):"array-contains-any"===n?new xh(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Eh(t,n):new Oh(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(eh(e,this.value)):null!==e&&Xl(this.value)===Xl(e)&&this.m(eh(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return El()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),_h=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Bl.fromName(r.referenceValue),i}return Object(pl.c)(e,t),e.prototype.matches=function(t){var e=Bl.comparator(t.key,this.key);return this.m(e)},e}(wh),Eh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Th(0,n),r}return Object(pl.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(wh),Oh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Th(0,n),r}return Object(pl.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(wh);function Th(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Bl.fromName(t.referenceValue)})}var Sh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(pl.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ah(e)&&th(e.arrayValue,this.value)},e}(wh),Ch=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(pl.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&th(this.value.arrayValue,e)},e}(wh),Ih=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(pl.c)(e,t),e.prototype.matches=function(t){if(th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!th(this.value.arrayValue,e)},e}(wh),xh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(pl.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ah(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return th(e.value.arrayValue,t)})},e}(wh),Ah=function(t,e){this.position=t,this.before=e};function jh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return rh(t)}).join(",")}var kh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Nh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Dh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Bl.comparator(Bl.fromName(s.referenceValue),n.key):eh(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Rh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Zl(t.position[n],e.position[n]))return!1;return!0}var Ph=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Lh(t,e,n,r,i,o,s,a){return new Ph(t,e,n,r,i,o,s,a)}function Mh(t){return new Ph(t)}function Vh(t){return!Dl(t.limit)&&"F"===t.limitType}function Fh(t){return!Dl(t.limit)&&"L"===t.limitType}function Uh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function qh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Bh(t){return null!==t.collectionGroup}function Hh(t){var e=Tl(t);if(null===e.p){e.p=[];var n=qh(e),r=Uh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new kh(n)),e.p.push(new kh(ql.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new kh(ql.keyField(),u))}}}return e.p}function zh(t){var e=Tl(t);if(!e.T)if("F"===e.limitType)e.T=yh(e.path,e.collectionGroup,Hh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Hh(e);r<i.length;r++){var o=i[r];n.push(new kh(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Ah(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ah(e.startAt.position,!e.startAt.before):null;e.T=yh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Gh(t,e,n){return new Ph(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qh(t,e){return vh(zh(t),zh(e))&&t.limitType===e.limitType}function Kh(t){return mh(zh(t))+"|lt:"+t.limitType}function Wh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+rh(e.value);var e}).join(", ")+"]"),Dl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+jh(t.startAt)),t.endAt&&(e+=", endAt: "+jh(t.endAt)),"Target("+e+")"}(zh(t))+"; limitType="+t.limitType+")"}function $h(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Bl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Dh(t.startAt,Hh(t),e)||t.endAt&&Dh(t.endAt,Hh(t),e))}(t,e)}function Yh(t){return function(e,n){for(var r=!1,i=0,o=Hh(t);i<o.length;i++){var s=o[i],a=Jh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Jh(t,e,n){var r=t.field.isKeyField()?Bl.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?eh(r,i):El()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return El()}}var Xh=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Wl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),Zh=function(){function t(t){this.fields=t,t.sort(ql.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return xl(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),tf=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!lh(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return Zl(this.proto,t.proto)},t}(),ef=function(){function t(t){void 0===t&&(t=tf.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Xl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(ql.emptyPath(),this.A);return null!=t?new tf(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=lh(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function nf(t){var e=[];return kl(t.fields||{},function(t,n){var r=new ql([t]);if(lh(n)){var i=nf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Zh(e)}function rf(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rl(e)?"-0":e}}function of(t){return{integerValue:""+t}}function sf(t,e){return Pl(e)?of(e):rf(t,e)}var af=function(){this._=void 0};function uf(t,e,n){return t instanceof hf?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ff?df(t,e):t instanceof pf?gf(t,e):function(t,e){var n=lf(t,e),r=mf(n)+mf(t.S);return sh(n)&&sh(t.S)?of(r):rf(t.D,r)}(t,e)}function cf(t,e,n){return t instanceof ff?df(t,e):t instanceof pf?gf(t,e):n}function lf(t,e){return t instanceof yf?sh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var hf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e}(af),ff=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(pl.c)(e,t),e}(af);function df(t,e){for(var n=vf(e),r=function(t){n.some(function(e){return Zl(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var pf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(pl.c)(e,t),e}(af);function gf(t,e){for(var n=vf(e),r=function(t){n=n.filter(function(e){return!Zl(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var yf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(pl.c)(e,t),e}(af);function mf(t){return Ql(t.integerValue||t.doubleValue)}function vf(t){return ah(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var bf=function(t,e){this.field=t,this.transform=e},wf=function(t,e){this.version=t,this.transformResults=e},_f=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ef(t,e){return void 0!==t.updateTime?e instanceof fh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof fh}var Of=function(){};function Tf(t,e,n){return t instanceof Af?function(t,e,n){var r=t.value,i=Nf(t.fieldTransforms,e,n.transformResults);return r=Rf(t.fieldTransforms,r,i),new fh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof jf?function(t,e,n){if(!Ef(t.precondition,e))return new ph(t.key,n.version);var r=kf(t,e,Nf(t.fieldTransforms,e,n.transformResults));return new fh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new dh(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Sf(t,e,n){return t instanceof Af?function(t,e,n){if(!Ef(t.precondition,e))return e;var r=t.value,i=Df(t.fieldTransforms,n,e);r=Rf(t.fieldTransforms,r,i);var o=xf(e);return new fh(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof jf?function(t,e,n){if(!Ef(t.precondition,e))return e;var r=xf(e),i=kf(t,e,Df(t.fieldTransforms,n,e));return new fh(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Ef(t.precondition,e)?new dh(t.key,Xh.min()):e}(t,e)}function Cf(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof fh?e.field(o.field):void 0,a=lf(o.transform,s||null);null!=a&&(n=null==n?(new ef).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function If(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&xl(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ff&&e instanceof ff||t instanceof pf&&e instanceof pf?xl(t.elements,e.elements,Zl):t instanceof yf&&e instanceof yf?Zl(t.S,e.S):t instanceof hf&&e instanceof hf}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function xf(t){return t instanceof fh?t.version:Xh.min()}var Af=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(pl.c)(e,t),e}(Of),jf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(pl.c)(e,t),e}(Of);function kf(t,e,n){var r;return r=function(t,e){var n=new ef(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof fh?e.data():tf.empty()),Rf(t.fieldTransforms,r,n)}function Nf(t,e,n){var r=[];Ol(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof fh&&(a=e.field(o.field)),r.push(cf(s,a,n[i]))}return r}function Df(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof fh&&(u=n.field(s.field)),r.push(uf(a,u,e))}return r}function Rf(t,e,n){for(var r=new ef(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var Pf,Lf,Mf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(pl.c)(e,t),e}(Of),Vf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(pl.c)(e,t),e}(Of),Ff=function(t){this.count=t};function Uf(t){switch(t){case Ll.OK:return El();case Ll.CANCELLED:case Ll.UNKNOWN:case Ll.DEADLINE_EXCEEDED:case Ll.RESOURCE_EXHAUSTED:case Ll.INTERNAL:case Ll.UNAVAILABLE:case Ll.UNAUTHENTICATED:return!1;case Ll.INVALID_ARGUMENT:case Ll.NOT_FOUND:case Ll.ALREADY_EXISTS:case Ll.PERMISSION_DENIED:case Ll.FAILED_PRECONDITION:case Ll.ABORTED:case Ll.OUT_OF_RANGE:case Ll.UNIMPLEMENTED:case Ll.DATA_LOSS:return!0;default:return El()}}function qf(t){if(void 0===t)return bl("GRPC error has no .code"),Ll.UNKNOWN;switch(t){case Pf.OK:return Ll.OK;case Pf.CANCELLED:return Ll.CANCELLED;case Pf.UNKNOWN:return Ll.UNKNOWN;case Pf.DEADLINE_EXCEEDED:return Ll.DEADLINE_EXCEEDED;case Pf.RESOURCE_EXHAUSTED:return Ll.RESOURCE_EXHAUSTED;case Pf.INTERNAL:return Ll.INTERNAL;case Pf.UNAVAILABLE:return Ll.UNAVAILABLE;case Pf.UNAUTHENTICATED:return Ll.UNAUTHENTICATED;case Pf.INVALID_ARGUMENT:return Ll.INVALID_ARGUMENT;case Pf.NOT_FOUND:return Ll.NOT_FOUND;case Pf.ALREADY_EXISTS:return Ll.ALREADY_EXISTS;case Pf.PERMISSION_DENIED:return Ll.PERMISSION_DENIED;case Pf.FAILED_PRECONDITION:return Ll.FAILED_PRECONDITION;case Pf.ABORTED:return Ll.ABORTED;case Pf.OUT_OF_RANGE:return Ll.OUT_OF_RANGE;case Pf.UNIMPLEMENTED:return Ll.UNIMPLEMENTED;case Pf.DATA_LOSS:return Ll.DATA_LOSS;default:return El()}}(Lf=Pf||(Pf={}))[Lf.OK=0]="OK",Lf[Lf.CANCELLED=1]="CANCELLED",Lf[Lf.UNKNOWN=2]="UNKNOWN",Lf[Lf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lf[Lf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lf[Lf.NOT_FOUND=5]="NOT_FOUND",Lf[Lf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lf[Lf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lf[Lf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lf[Lf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lf[Lf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lf[Lf.ABORTED=10]="ABORTED",Lf[Lf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lf[Lf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lf[Lf.INTERNAL=13]="INTERNAL",Lf[Lf.UNAVAILABLE=14]="UNAVAILABLE",Lf[Lf.DATA_LOSS=15]="DATA_LOSS";var Bf=function(){function t(t,e){this.comparator=t,this.root=e||zf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Hf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Hf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Hf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Hf(this.root,t,this.comparator,!0)},t}(),Hf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),zf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw El();if(this.right.isRed())throw El();var t=this.left.check();if(t!==this.right.check())throw El();return t+(this.isRed()?0:1)},t}();zf.EMPTY=null,zf.RED=!0,zf.BLACK=!1,zf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw El()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw El()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw El()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw El()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw El()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new zf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Gf=function(){function t(t){this.comparator=t,this.data=new Bf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Qf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Qf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Qf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Kf=new Bf(Bl.comparator);function Wf(){return Kf}function $f(){return Wf()}var Yf=new Bf(Bl.comparator);function Jf(){return Yf}var Xf=new Bf(Bl.comparator);function Zf(){return Xf}var td=new Gf(Bl.comparator);function ed(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=td,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var nd=new Gf(Il);function rd(){return nd}var id=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,od.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Xh.min(),r,rd(),Wf(),ed())},t}(),od=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Hl.EMPTY_BYTE_STRING,n,ed(),ed(),ed())},t}(),sd=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},ad=function(t,e){this.targetId=t,this.$=e},ud=function(t,e,n,r){void 0===n&&(n=Hl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},cd=function(){function t(){this.F=0,this.O=fd(),this.k=Hl.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=ed(),e=ed(),n=ed();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:El()}}),new od(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=fd()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),ld=function(){function t(t){this.X=t,this.Z=new Map,this.tt=Wf(),this.et=hd(),this.nt=new Gf(Il)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof fh?this.it(r,t.N):t.N instanceof dh&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:El()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(bh(i))if(0===n){var o=new Bl(i.path);this.rt(e,o,new dh(o,Xh.min()))}else Ol(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&bh(o.target)){var s=new Bl(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new dh(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=ed();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new id(t,n,this.nt,this.tt,r);return this.tt=Wf(),this.et=hd(),this.nt=new Gf(Il),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new cd,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new Gf(Il),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||vl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new cd),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function hd(){return new Bf(Bl.comparator)}function fd(){return new Bf(Bl.comparator)}var dd={asc:"ASCENDING",desc:"DESCENDING"},pd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gd=function(t,e){this.databaseId=t,this.V=e};function yd(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function md(t,e){return t.V?e.toBase64():e.toUint8Array()}function vd(t,e){return yd(t,e.toTimestamp())}function bd(t){return Ol(!!t),Xh.fromTimestamp(function(t){var e=Gl(t);return new Wl(e.seconds,e.nanos)}(t))}function wd(t,e){return function(t){return new Fl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function _d(t){var e=Fl.fromString(t);return Ol(Gd(e)),e}function Ed(t,e){return wd(t.databaseId,e.path)}function Od(t,e){var n=_d(e);if(n.get(1)!==t.databaseId.projectId)throw new Ml(Ll.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ml(Ll.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Bl(Id(n))}function Td(t,e){return wd(t.databaseId,e)}function Sd(t){var e=_d(t);return 4===e.length?Fl.emptyPath():Id(e)}function Cd(t){return new Fl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Id(t){return Ol(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function xd(t,e,n){return{name:Ed(t,e),fields:n.proto.mapValue.fields}}function Ad(t,e,n){var r=Od(t,e.name),i=bd(e.updateTime),o=new tf({mapValue:{fields:e.fields}});return new fh(r,i,o,{hasCommittedMutations:!!n})}function jd(t,e){var n;if(e instanceof Af)n={update:xd(t,e.key,e.value)};else if(e instanceof Mf)n={delete:Ed(t,e.key)};else if(e instanceof jf)n={update:xd(t,e.key,e.data),updateMask:zd(e.fieldMask)};else{if(!(e instanceof Vf))return El();n={verify:Ed(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof hf)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ff)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pf)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yf)return{fieldPath:e.field.canonicalString(),increment:n.S};throw El()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:vd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:El()}(t,e.precondition)),n}function kd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?_f.updateTime(bd(t.updateTime)):void 0!==t.exists?_f.exists(t.exists):_f.none()}(e.currentDocument):_f.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Ol("REQUEST_TIME"===e.setToServerValue),n=new hf):"appendMissingElements"in e?n=new ff(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new pf(e.removeAllFromArray.values||[]):"increment"in e?n=new yf(t,e.increment):El();var r=ql.fromServerFormat(e.fieldPath);return new bf(r,n)}(t,e)}):[];if(e.update){var i=Od(t,e.update.name),o=new tf({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Zh((t.fieldPaths||[]).map(function(t){return ql.fromServerFormat(t)}))}(e.updateMask);return new jf(i,o,s,n,r)}return new Af(i,o,n,r)}if(e.delete){var a=Od(t,e.delete);return new Mf(a,n)}if(e.verify){var u=Od(t,e.verify);return new Vf(u,n)}return El()}function Nd(t,e){return{documents:[Td(t,e.path)]}}function Dd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Td(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Td(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(ch(t.value))return{unaryFilter:{field:Ud(t.field),op:"IS_NAN"}};if(uh(t.value))return{unaryFilter:{field:Ud(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ch(t.value))return{unaryFilter:{field:Ud(t.field),op:"IS_NOT_NAN"}};if(uh(t.value))return{unaryFilter:{field:Ud(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ud(t.field),op:Fd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Ud(t.field),direction:Vd(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||Dl(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ld(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ld(e.endAt)),n}function Rd(t){var e=Sd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ol(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Pd(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new kh(qd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Dl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Md(n.startAt));var l=null;return n.endAt&&(l=Md(n.endAt)),Lh(e,i,a,s,u,"F",c,l)}function Pd(t){return t?void 0!==t.unaryFilter?[Hd(t)]:void 0!==t.fieldFilter?[Bd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Pd(t)}).reduce(function(t,e){return t.concat(e)}):El():[]}function Ld(t){return{before:t.before,values:t.position}}function Md(t){return new Ah(t.values||[],!!t.before)}function Vd(t){return dd[t]}function Fd(t){return pd[t]}function Ud(t){return{fieldPath:t.canonicalString()}}function qd(t){return ql.fromServerFormat(t.fieldPath)}function Bd(t){return wh.create(qd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return El()}}(t.fieldFilter.op),t.fieldFilter.value)}function Hd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=qd(t.unaryFilter.field);return wh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=qd(t.unaryFilter.field);return wh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qd(t.unaryFilter.field);return wh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qd(t.unaryFilter.field);return wh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return El()}}function zd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Gd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Qd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Wd(e)),e=Kd(t.get(n),e);return Wd(e)}function Kd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Wd(t){return t+"\x01\x01"}function $d(t){var e=t.length;if(Ol(e>=2),2===e)return Ol("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Fl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&El(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:El()}o=s+2}return new Fl(r)}var Yd=function(t,e){this.seconds=t,this.nanoseconds=e},Jd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Jd.store="owner",Jd.key="owner";var Xd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Xd.store="mutationQueues",Xd.keyPath="userId";var Zd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Zd.store="mutations",Zd.keyPath="batchId",Zd.userMutationsIndex="userMutationsIndex",Zd.userMutationsKeyPath=["userId","batchId"];var tp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Qd(e)]},t.key=function(t,e,n){return[t,Qd(e),n]},t}();tp.store="documentMutations",tp.PLACEHOLDER=new tp;var ep=function(t,e){this.path=t,this.readTime=e},np=function(t,e){this.path=t,this.version=e},rp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};rp.store="remoteDocuments",rp.readTimeIndex="readTimeIndex",rp.readTimeIndexPath="readTime",rp.collectionReadTimeIndex="collectionReadTimeIndex",rp.collectionReadTimeIndexPath=["parentPath","readTime"];var ip=function(t){this.byteSize=t};ip.store="remoteDocumentGlobal",ip.key="remoteDocumentGlobalKey";var op=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};op.store="targets",op.keyPath="targetId",op.queryTargetsIndexName="queryTargetsIndex",op.queryTargetsKeyPath=["canonicalId","targetId"];var sp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};sp.store="targetDocuments",sp.keyPath=["targetId","path"],sp.documentTargetsIndex="documentTargetsIndex",sp.documentTargetsKeyPath=["path","targetId"];var ap=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ap.key="targetGlobalKey",ap.store="targetGlobal";var up=function(t,e){this.collectionId=t,this.parent=e};up.store="collectionParents",up.keyPath=["collectionId","parent"];var cp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};cp.store="clientMetadata",cp.keyPath="clientId";var lp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};lp.store="bundles",lp.keyPath="bundleId";var hp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};hp.store="namedQueries",hp.keyPath="name";var fp=Object(pl.f)(Object(pl.f)([],Object(pl.f)(Object(pl.f)([],Object(pl.f)(Object(pl.f)([],Object(pl.f)(Object(pl.f)([],[Xd.store,Zd.store,tp.store,rp.store,op.store,Jd.store,ap.store,sp.store]),[cp.store])),[ip.store])),[up.store])),[lp.store,hp.store]),dp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),gp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},yp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&El(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),mp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new gp,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new wp(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=Sp(e.target.error);n.gt.reject(new wp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new wp(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(vl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ep(e)},t}(),vp=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(fs.g)())&&bl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return vl("SimpleDb","Removing database:",t),Op(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(fs.g)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(pl.b)(this,void 0,void 0,function(){var e,n=this;return Object(pl.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(vl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new wp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ml(Ll.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new wp(t,n))},i.onupgradeneeded=function(t){vl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){vl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(pl.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(pl.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(pl.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=mp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),yp.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return vl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),bp=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Op(this.xt.delete())},t}(),wp=function(t){function e(e,n){var r=this;return(r=t.call(this,Ll.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(pl.c)(e,t),e}(Ml);function _p(t){return"IndexedDbTransactionError"===t.name}var Ep=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(vl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(vl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Op(n)},t.prototype.add=function(t){return vl("SimpleDb","ADD",this.store.name,t,t),Op(this.store.add(t))},t.prototype.get=function(t){var e=this;return Op(this.store.get(t)).next(function(n){return void 0===n&&(n=null),vl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return vl("SimpleDb","DELETE",this.store.name,t),Op(this.store.delete(t))},t.prototype.count=function(){return vl("SimpleDb","COUNT",this.store.name),Op(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){vl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new yp(function(n,r){e.onerror=function(t){var e=Sp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new yp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new bp(i),s=e(i.primaryKey,i.value,o);if(s instanceof yp){var a=s.catch(function(t){return o.done(),yp.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return yp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Op(t){return new yp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Sp(t.target.error);n(e)}})}var Tp=!1;function Sp(t){var e=vp.It(Object(fs.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ml("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Tp||(Tp=!0,setTimeout(function(){throw r},0)),r}}return t}var Cp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(pl.c)(e,t),e}(pp);function Ip(t,e){var n=Tl(t);return vp.Pt(n.Qt,e)}var xp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Tf(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Sf(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Sf(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ed())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&xl(this.mutations,t.mutations,function(t,e){return If(t,e)})&&xl(this.baseMutations,t.baseMutations,function(t,e){return If(t,e)})},t}(),Ap=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ol(e.mutations.length===r.length);for(var i=Zf(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),jp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Xh.min()),void 0===o&&(o=Xh.min()),void 0===s&&(s=Hl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),kp=function(t){this.Kt=t};function Np(t,e){if(e.document)return Ad(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Bl.fromSegments(e.noDocument.path),r=Mp(e.noDocument.readTime);return new dh(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Bl.fromSegments(e.unknownDocument.path);return r=Mp(e.unknownDocument.version),new ph(i,r)}return El()}function Dp(t,e,n){var r=Rp(n),i=e.key.path.popLast().toArray();if(e instanceof fh){var o=function(t,e){return{name:Ed(t,e.key),fields:e.toProto().mapValue.fields,updateTime:yd(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new rp(null,null,o,s,r,i)}if(e instanceof dh){var a=e.key.path.toArray(),u=Lp(e.version);return s=e.hasCommittedMutations,new rp(null,new ep(a,u),null,s,r,i)}if(e instanceof ph){var c=e.key.path.toArray(),l=Lp(e.version);return new rp(new np(c,l),null,null,!0,r,i)}return El()}function Rp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Pp(t){var e=new Wl(t[0],t[1]);return Xh.fromTimestamp(e)}function Lp(t){var e=t.toTimestamp();return new Yd(e.seconds,e.nanoseconds)}function Mp(t){var e=new Wl(t.seconds,t.nanoseconds);return Xh.fromTimestamp(e)}function Vp(t,e){for(var n=(e.baseMutations||[]).map(function(e){return kd(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return kd(t.Kt,e)}),o=Wl.fromMillis(e.localWriteTimeMs);return new xp(e.batchId,o,n,i)}function Fp(t){var e,n,r=Mp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Mp(t.lastLimboFreeSnapshotVersion):Xh.min();return void 0!==t.query.documents?(Ol(1===(n=t.query).documents.length),e=zh(Mh(Sd(n.documents[0])))):e=function(t){return zh(Rd(t))}(t.query),new jp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Hl.fromBase64String(t.resumeToken))}function Up(t,e){var n,r=Lp(e.snapshotVersion),i=Lp(e.lastLimboFreeSnapshotVersion);n=bh(e.target)?Nd(t.Kt,e.target):Dd(t.Kt,e.target);var o=e.resumeToken.toBase64();return new op(e.targetId,mh(e.target),r,o,e.sequenceNumber,i,n)}function qp(t){var e=Rd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Gh(e,e.limit,"L"):e}var Bp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Hp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Mp(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Hp(t).put({bundleId:(n=e).id,createTime:Lp(bd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return zp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:qp(e.bundledQuery),readTime:Mp(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return zp(t).put(function(t){return{name:t.name,readTime:Lp(bd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Hp(t){return Ip(t,lp.store)}function zp(t){return Ip(t,hp.store)}var Gp=function(){function t(){this.Wt=new Qp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),yp.resolve()},t.prototype.getCollectionParents=function(t,e){return yp.resolve(this.Wt.getEntries(e))},t}(),Qp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Gf(Fl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Gf(Fl.comparator)).toArray()},t}(),Kp=function(){function t(){this.jt=new Qp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:Qd(i)};return Wp(t).put(o)}return yp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Al(e),""],!1,!0);return Wp(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push($d(o.parent))}return n})},t}();function Wp(t){return Ip(t,up.store)}var $p={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Jp(t,e,n){var r=t.store(Zd.store),i=t.store(tp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Ol(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=tp.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return yp.waitFor(o).next(function(){return c})}function Xp(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw El();e=t.noDocument}return JSON.stringify(e).length}Yp.DEFAULT_COLLECTION_PERCENTILE=10,Yp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yp.DEFAULT=new Yp(41943040,Yp.DEFAULT_COLLECTION_PERCENTILE,Yp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yp.DISABLED=new Yp(-1,0,0);var Zp=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Ol(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eg(t).qt({index:Zd.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ng(t),s=eg(t);return s.add({}).next(function(a){Ol("number"==typeof a);for(var u=new xp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return jd(t.Kt,e)}),i=n.mutations.map(function(e){return jd(t.Kt,e)});return new Zd(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new Gf(function(t,e){return Il(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=tp.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,tp.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),yp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return eg(t).get(e).next(function(t){return t?(Ol(t.userId===n.userId),Vp(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?yp.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return eg(t).qt({index:Zd.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Ol(e.batchId>=r),o=Vp(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return eg(t).qt({index:Zd.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eg(t).kt(Zd.userMutationsIndex,n).next(function(t){return t.map(function(t){return Vp(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=tp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ng(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=$d(r[1]);if(a===n.userId&&e.path.isEqual(c))return eg(t).get(u).next(function(t){if(!t)throw El();Ol(t.userId===n.userId),o.push(Vp(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Gf(Il),i=[];return e.forEach(function(e){var o=tp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=ng(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=$d(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),yp.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=tp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Gf(Il);return ng(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=$d(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(eg(t).get(e).next(function(t){if(null===t)throw El();Ol(t.userId===n.userId),r.push(Vp(n.D,t))}))}),yp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Jp(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),yp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return yp.resolve();var r=IDBKeyRange.lowerBound(tp.prefixForUser(e.userId)),i=[];return ng(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=$d(t[1]);i.push(o)}else r.done()}).next(function(){Ol(0===i.length)})})},t.prototype.containsKey=function(t,e){return tg(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return rg(t).get(this.userId).next(function(t){return t||new Xd(e.userId,-1,"")})},t}();function tg(t,e,n){var r=tp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ng(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function eg(t){return Ip(t,Zd.store)}function ng(t){return Ip(t,tp.store)}function rg(t){return Ip(t,Xd.store)}var ig=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),og=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new ig(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return Xh.fromTimestamp(new Wl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return sg(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return Ol(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return sg(t).qt(function(s,a){var u=Fp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return yp.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return sg(t).qt(function(t,n){var r=Fp(n);e(r)})},t.prototype.se=function(t){return ag(t).get(ap.key).next(function(t){return Ol(null!==t),t})},t.prototype.ie=function(t,e){return ag(t).put(ap.key,e)},t.prototype.re=function(t,e){return sg(t).put(Up(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=mh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sg(t).qt({range:r,index:op.queryTargetsIndexName},function(t,n,r){var o=Fp(n);vh(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=ug(t);return e.forEach(function(e){var s=Qd(e.path);i.push(o.put(new sp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),yp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=ug(t);return yp.forEach(e,function(e){var o=Qd(e.path);return yp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ug(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ug(t),i=ed();return r.qt({range:n,Bt:!0},function(t,e,n){var r=$d(t[1]),o=new Bl(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Qd(e.path),r=IDBKeyRange.bound([n],[Al(n)],!1,!0),i=0;return ug(t).qt({index:sp.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return sg(t).get(e).next(function(t){return t?Fp(t):null})},t}();function sg(t){return Ip(t,op.store)}function ag(t){return Ip(t,ap.store)}function ug(t){return Ip(t,sp.store)}function cg(t){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(e){if(t.code!==Ll.FAILED_PRECONDITION||t.message!==dp)throw t;return vl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function lg(t,e){var n=t[1],r=e[1],i=Il(t[0],e[0]);return 0===i?Il(n,r):i}var hg=function(){function t(t){this.ce=t,this.buffer=new Gf(lg),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();lg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),fg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;vl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(pl.b)(e,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return _p(e=n.sent())?(vl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,cg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),dg=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return yp.resolve(gl.o);var r=new hg(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(vl("LruGarbageCollector","Garbage collection skipped; disabled"),yp.resolve($p)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(vl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),$p):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(vl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),ml()<=hs.a.DEBUG&&vl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),yp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),pg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new dg(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return gg(t,n)},t.prototype.removeReference=function(t,e,n){return gg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return gg(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return rg(t).Ut(function(r){return tg(t,r,e).next(function(t){return t&&(n=!0),yp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),ug(t).delete([0,Qd(s.path)])})});i.push(u)}}).next(function(){return yp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return gg(t,e)},t.prototype.pe=function(t,e){var n,r=ug(t),i=gl.o;return r.qt({index:sp.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==gl.o&&e(new Bl($d(n)),i),i=s,n=o):i=gl.o}).next(function(){i!==gl.o&&e(new Bl($d(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function gg(t,e){return ug(t).put(function(t,e){return new sp(0,Qd(t.path),e)}(e,t.currentSequenceNumber))}var yg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){kl(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Nl(this.inner)},t}(),mg=function(){function t(){this.changes=new yg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Xh.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?yp.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),vg=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return _g(t).put(Eg(e),n)},t.prototype.removeEntry=function(t,e){var n=_g(t),r=Eg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return _g(t).get(Eg(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return _g(t).get(Eg(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:Xp(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=$f();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=$f(),i=new Bf(Bl.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,Xp(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return yp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return _g(t).qt({range:r},function(t,e,r){for(var s=Bl.fromSegments(t);o&&Bl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Jf(),o=e.path.length+1,s={};if(n.isEqual(Xh.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Rp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=rp.collectionReadTimeIndex}return _g(t).qt(s,function(t,n,s){if(t.length===o){var a=Np(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof fh&&$h(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new bg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return wg(t).get(ip.key).next(function(t){return Ol(!!t),t})},t.prototype.Te=function(t,e){return wg(t).put(ip.key,e)},t.prototype.Ie=function(t){if(t){var e=Np(this.D,t);return e instanceof dh&&e.version.isEqual(Xh.min())?null:e}return null},t}(),bg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new yg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(pl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Gf(function(t,e){return Il(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=Dp(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=Xp(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Dp(e.Ve.D,new dh(o,Xh.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),yp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(mg);function wg(t){return Ip(t,ip.store)}function _g(t){return Ip(t,rp.store)}function Eg(t){return t.path.toArray()}var Og=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Ol(n<r&&n>=0&&r<=11);var o=new mp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Jd.store)}(t),function(t){t.createObjectStore(Xd.store,{keyPath:Xd.keyPath}),t.createObjectStore(Zd.store,{keyPath:Zd.keyPath,autoIncrement:!0}).createIndex(Zd.userMutationsIndex,Zd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(tp.store)}(t),Tg(t),function(t){t.createObjectStore(rp.store)}(t));var s=yp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(sp.store),t.deleteObjectStore(op.store),t.deleteObjectStore(ap.store)}(t),Tg(t)),s=s.next(function(){return function(t){var e=t.store(ap.store),n=new ap(0,0,Xh.min().toTimestamp(),0);return e.put(ap.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Zd.store).kt().next(function(n){t.deleteObjectStore(Zd.store),t.createObjectStore(Zd.store,{keyPath:Zd.keyPath,autoIncrement:!0}).createIndex(Zd.userMutationsIndex,Zd.userMutationsKeyPath,{unique:!0});var r=e.store(Zd.store),i=n.map(function(t){return r.put(t)});return yp.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(cp.store,{keyPath:cp.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(ip.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(rp.store);e.createIndex(rp.readTimeIndex,rp.readTimeIndexPath,{unique:!1}),e.createIndex(rp.collectionReadTimeIndex,rp.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(lp.store,{keyPath:lp.keyPath})}(t),function(t){t.createObjectStore(hp.store,{keyPath:hp.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(rp.store).qt(function(t,n){e+=Xp(n)}).next(function(){var n=new ip(e);return t.store(ip.store).put(ip.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(Xd.store),r=t.store(Zd.store);return n.kt().next(function(n){return yp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(Zd.userMutationsIndex,i).next(function(r){return yp.forEach(r,function(r){Ol(r.userId===n.userId);var i=Vp(e.D,r);return Jp(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(sp.store),n=t.store(rp.store);return t.store(ap.store).get(ap.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new Fl(n),s=function(t){return[0,Qd(t)]}(o);r.push(e.get(s).next(function(n){return n?yp.resolve():function(n){return e.put(new sp(0,Qd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return yp.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(up.store,{keyPath:up.keyPath});var n=e.store(up.store),r=new Qp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Qd(i)})}};return e.store(rp.store).qt({Bt:!0},function(t,e){var n=new Fl(t);return i(n.popLast())}).next(function(){return e.store(tp.store).qt({Bt:!0},function(t,e){var n=$d(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(op.store);return n.qt(function(t,r){var i=Fp(r),o=Up(e.D,i);return n.put(o)})},t}();function Tg(t){t.createObjectStore(sp.store,{keyPath:sp.keyPath}).createIndex(sp.documentTargetsIndex,sp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(op.store,{keyPath:op.keyPath}).createIndex(op.queryTargetsIndexName,op.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ap.store)}var Sg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Cg=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new Ml(Ll.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pg(this,i),this.We=n+"main",this.D=new kp(u),this.je=new vp(this.We,11,new Og(this.D)),this.Ge=new og(this.referenceDelegate,this.D),this.Gt=new Kp,this.ze=function(t,e){return new vg(t,e)}(this.D,this.Gt),this.He=new Bp,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&bl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ml(Ll.FAILED_PRECONDITION,Sg);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new gl(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(pl.b)(e,void 0,void 0,function(){return Object(pl.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(pl.b)(e,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(pl.b)(e,void 0,void 0,function(){return Object(pl.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return xg(e).put(new cp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(_p(e))return vl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return vl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return Ig(t).get(Jd.key).next(function(t){return yp.resolve(e.cn(t))})},t.prototype.an=function(t){return xg(t).delete(this.clientId)},t.prototype.un=function(){return Object(pl.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(pl.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Ip(t,cp.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return yp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?yp.resolve(!0):Ig(t).get(Jd.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new Ml(Ll.FAILED_PRECONDITION,Sg);return!1}}return!(!e.networkEnabled||!e.inForeground)||xg(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&vl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(pl.b)(this,void 0,void 0,function(){var t=this;return Object(pl.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[Jd.store,cp.store],function(e){var n=new Cp(e,gl.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return xg(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Zp.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return vl("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",fp,function(o){return r=new Cp(o,i.Me?i.Me.next():gl.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw bl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new Ml(Ll.FAILED_PRECONDITION,dp);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return Ig(t).get(Jd.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ml(Ll.FAILED_PRECONDITION,Sg)})},t.prototype.on=function(t){var e=new Jd(this.clientId,this.allowTabSynchronization,Date.now());return Ig(t).put(Jd.key,e)},t.At=function(){return vp.At()},t.prototype.rn=function(t){var e=this,n=Ig(t);return n.get(Jd.key).next(function(t){return e.cn(t)?(vl("IndexedDbPersistence","Releasing primary lease."),n.delete(Jd.key)):yp.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(bl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return vl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return bl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){bl("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ig(t){return Ip(t,Jd.store)}function xg(t){return Ip(t,cp.store)}function Ag(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var jg=function(t,e){this.progress=t,this.En=e},kg=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=$f();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=Wf();return i.forEach(function(t,e){e||(e=new dh(t,Xh.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Bl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):Bh(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new Bl(e)).next(function(t){var e=Jf();return t instanceof fh&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=Jf();return this.Gt.getCollectionParents(t,i).next(function(s){return yp.forEach(s,function(s){var a=function(t,e){return new Ph(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Sf(u,r.get(c),o.localWriteTime);r=l instanceof fh?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){$h(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=ed(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof jf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof fh&&(c=c.insert(t,e))}),c})},t}(),Ng=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=ed(),i=ed(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Dg=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Xh.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(Vh(e)||Fh(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(ml()<=hs.a.DEBUG&&vl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Wh(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new Gf(Yh(t));return e.forEach(function(e,r){r instanceof fh&&$h(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return ml()<=hs.a.DEBUG&&vl("QueryEngine","Using full collection scan to execute query:",Wh(e)),this.Fn.getDocumentsMatchingQuery(t,e,Xh.min())},t}(),Rg=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new Bf(Il),this.qn=new yg(function(t){return mh(t)},vh),this.Un=Xh.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new kg(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function Pg(t,e,n,r){return new Rg(t,e,n,r)}function Lg(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(pl.d)(this,function(s){switch(s.label){case 0:return n=Tl(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new kg(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=ed(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function Mg(t,e){var n=Tl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=yp.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);Ol(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function Vg(t){var e=Tl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function Fg(t,e){var n=Tl(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ol(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=Wf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Ug(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Xh.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return yp.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function Ug(t,e,n,r,i){var o=ed();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Wf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof dh&&s.version.isEqual(Xh.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):vl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function qg(t,e){var n=Tl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function Bg(t,e){var n=Tl(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?yp.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new jp(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function Hg(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(pl.d)(this,function(a){switch(a.label){case 0:r=Tl(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!_p(s=a.sent()))throw s;return vl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function zg(t,e,n){var r=Tl(t),i=Xh.min(),o=ed();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Tl(t),i=r.qn.get(n);return void 0!==i?yp.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,zh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:Xh.min(),n?o:ed())}).next(function(t){return{documents:t,jn:o}})})}function Gg(t,e){var n=Tl(t),r=Tl(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function Qg(t){var e=Tl(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Tl(t),i=Wf(),o=Rp(n),s=_g(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:rp.readTimeIndex,range:a},function(t,e){var n=Np(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:Pp(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function Kg(t){return Object(pl.b)(this,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){return[2,(e=Tl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=_g(t),n=Xh.min();return e.qt({index:rp.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Pp(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function Wg(t,e,n,r){return Object(pl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(pl.d)(this,function(p){switch(p.label){case 0:for(i=Tl(t),o=ed(),s=Wf(),a=Zf(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,Bg(i,function(t){return zh(Mh(Fl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Ug(t,f,s,Xh.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function $g(t,e,n){return void 0===n&&(n=ed()),Object(pl.b)(this,void 0,void 0,function(){var r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:return[4,Bg(t,zh(qp(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Tl(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=bd(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(Hl.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var Yg=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return yp.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:bd(n.createTime)}),yp.resolve()},t.prototype.getNamedQuery=function(t,e){return yp.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:qp(t.bundledQuery),readTime:bd(t.readTime)}}(e)),yp.resolve()},t}(),Jg=function(){function t(){this.Xn=new Gf(Xg.Zn),this.ts=new Gf(Xg.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Xg(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new Xg(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new Bl(new Fl([])),r=new Xg(n,t),i=new Xg(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new Bl(new Fl([])),n=new Xg(e,t),r=new Xg(e,t+1),i=ed();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Xg(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Xg=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return Bl.comparator(t.key,e.key)||Il(t.hs,e.hs)},t.es=function(t,e){return Il(t.hs,e.hs)||Bl.comparator(t.key,e.key)},t}(),Zg=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new Gf(Xg.Zn)}return t.prototype.checkEmpty=function(t){return yp.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new xp(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new Xg(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return yp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return yp.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return yp.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return yp.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return yp.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Xg(e,0),i=new Xg(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),yp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Gf(Il);return e.forEach(function(t){var e=new Xg(t,0),i=new Xg(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),yp.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Bl.isDocumentKey(i)||(i=i.child(""));var o=new Xg(new Bl(i),0),s=new Gf(Il);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),yp.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ol(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return yp.forEach(e.mutations,function(i){var o=new Xg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Xg(e,0),r=this.fs.firstAfterOrEqual(n);return yp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return yp.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),ty=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new Bf(Bl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return yp.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=$f();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),yp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Jf(),i=new Bl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof fh&&$h(e,u)&&(r=r.insert(u.key,u))}return yp.resolve(r)},t.prototype.ps=function(t,e){return yp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new ey(this)},t.prototype.getSize=function(t){return yp.resolve(this.size)},t}(),ey=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(pl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),yp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(mg),ny=function(){function t(t){this.persistence=t,this.Es=new yg(function(t){return mh(t)},vh),this.lastRemoteSnapshotVersion=Xh.min(),this.highestTargetId=0,this.Ts=0,this.Is=new Jg,this.targetCount=0,this.As=ig.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),yp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return yp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return yp.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),yp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),yp.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new ig(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,yp.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),yp.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,yp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),yp.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return yp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return yp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),yp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),yp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),yp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return yp.resolve(n)},t.prototype.containsKey=function(t,e){return yp.resolve(this.Is.containsKey(e))},t}(),ry=function(){function t(t,e){var n=this;this.Rs={},this.Me=new gl(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new ny(this),this.Gt=new Gp,this.ze=function(t,e){return new ty(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new kp(e),this.He=new Yg(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new Zg(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;vl("MemoryPersistence","Starting transaction:",t);var i=new iy(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return yp.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),iy=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(pl.c)(e,t),e}(pp),oy=function(){function t(t){this.persistence=t,this.Ss=new Jg,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw El()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),yp.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),yp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),yp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return yp.forEach(this.xs,function(r){var i=Bl.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return yp.or([function(){return yp.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),sy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function ay(t,e){return"firestore_clients_"+t+"_"+e}function uy(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function cy(t,e){return"firestore_targets_"+t+"_"+e}sy.UNAUTHENTICATED=new sy(null),sy.GOOGLE_CREDENTIALS=new sy("google-credentials-uid"),sy.FIRST_PARTY=new sy("first-party-uid");var ly=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ml(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(bl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),hy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ml(i.error.code,i.error.message)),o?new t(e,i.state,r):(bl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),fy=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=rd(),s=0;i&&s<r.activeTargetIds.length;++s)i=Pl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(bl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),dy=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(bl("SharedClientState","Failed to parse online state: "+e),null)},t}(),py=function(){function t(){this.activeTargetIds=rd()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),gy=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Bf(Il),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=ay(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new py),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(pl.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(pl.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(ay(this.persistenceKey,r)))&&(o=fy.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(cy(this.persistenceKey,t));if(n){var r=hy.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(cy(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return vl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){vl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){vl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(vl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void bl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(pl.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(pl.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=gl.o;if(null!=t)try{var n=JSON.parse(t);Ol("number"==typeof n),e=n}catch(t){bl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==gl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new ly(this.currentUser,t,e,n),i=uy(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=uy(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=cy(this.persistenceKey,t),i=new hy(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return fy.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return ly.$s(new sy(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return hy.$s(r,e)},t.prototype.Ys=function(t){return dy.$s(t)},t.prototype.hi=function(t){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(vl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=rd();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),yy=function(){function t(){this.yi=new py,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new py,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),my=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),vy=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){vl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){vl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),by={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wy=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),_y=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(pl.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new dl;s.listenOnce(ll.COMPLETE,function(){try{switch(s.getLastErrorCode()){case cl.NO_ERROR:var e=s.getResponseJson();vl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case cl.TIMEOUT:vl("Connection",'RPC "'+t+'" timed out'),o(new Ml(Ll.DEADLINE_EXCEEDED,"Request time out"));break;case cl.HTTP_ERROR:var n=s.getStatus();if(vl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ll).indexOf(e)>=0?e:Ll.UNKNOWN}(r.status);o(new Ml(a,r.message))}else o(new Ml(Ll.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ml(Ll.UNAVAILABLE,"Connection failed."));break;default:El()}}finally{vl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new il,i=au(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(fs.l)()||Object(fs.n)()||Object(fs.j)()||Object(fs.k)()||Object(fs.o)()||Object(fs.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");vl("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new wy({vi:function(t){c?vl("Connection","Not sending because WebChannel is closed:",t):(u||(vl("Connection","Opening WebChannel transport."),a.open(),u=!0),vl("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,fl.EventType.OPEN,function(){c||vl("Connection","WebChannel transport opened.")}),h(a,fl.EventType.CLOSE,function(){c||(c=!0,vl("Connection","WebChannel transport closed"),l.$i())}),h(a,fl.EventType.ERROR,function(t){c||(c=!0,wl("Connection","WebChannel transport errored:",t),l.$i(new Ml(Ll.UNAVAILABLE,"The operation could not be completed")))}),h(a,fl.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Ol(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){vl("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Pf[t];if(void 0!==e)return qf(e)}(i),s=r.message;void 0===o&&(o=Ll.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new Ml(o,s)),a.close()}else vl("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,hl.STAT_EVENT,function(t){10===t.stat?vl("Connection","Detected buffering proxy"):11===t.stat&&vl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);vl("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return vl("RestConnection","Received: ",t),t},function(e){throw wl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+by[t]},t}());function Ey(){return"undefined"!=typeof window?window:null}function Oy(){return"undefined"!=typeof document?document:null}function Ty(t){return new gd(t,!0)}var Sy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&vl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Cy=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Sy(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===Ll.RESOURCE_EXHAUSTED?(bl(e.toString()),bl("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===Ll.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new Ml(Ll.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(pl.b)(t,void 0,void 0,function(){return Object(pl.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return vl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(vl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Iy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(pl.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:El()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Ol(void 0===e||"string"==typeof e),Hl.fromBase64String(e||"")):(Ol(void 0===e||e instanceof Uint8Array),Hl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ll.UNKNOWN:qf(t.code);return new Ml(e,t.message||"")}(a);n=new ud(r,i,o,s||null)}else if("documentChange"in e){i=Od(t,(r=e.documentChange).document.name),o=bd(r.document.updateTime);var a=new tf({mapValue:{fields:r.document.fields}}),u=(s=new fh(i,o,a,{}),r.targetIds||[]);n=new sd(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Od(t,(r=e.documentDelete).document),o=r.readTime?bd(r.readTime):Xh.min(),a=new dh(i,o),n=new sd([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Od(t,(r=e.documentRemove).document),n=new sd([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return El();var c=e.filter;i=new Ff(r=c.count||0),n=new ad(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return Xh.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Xh.min():e.readTime?bd(e.readTime):Xh.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Cd(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=bh(r)?{documents:Nd(t,r)}:{query:Dd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=md(t,e.resumeToken):e.snapshotVersion.compareTo(Xh.min())>0&&(n.readTime=yd(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return El()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Cd(this.D),e.removeTarget=t,this.wr(e)},e}(Cy),xy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(pl.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Ol(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Ol(void 0!==e),t.map(function(t){return function(t,e){var n=bd(t.updateTime?t.updateTime:e);return n.isEqual(Xh.min())&&(n=bd(e)),new wf(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=bd(t.commitTime);return this.listener.Pr(n,e)}return Ol(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Cd(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return jd(e.D,t)})};this.wr(n)},e}(Cy),Ay=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(pl.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new Ml(Ll.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===Ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===Ll.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),jy=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(bl(e),this.Fr=!1):vl("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),ky=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(pl.b)(o,void 0,void 0,function(){return Object(pl.d)(this,function(t){switch(t.label){case 0:return Uy(this)?(vl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(pl.b)(this,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return(e=Tl(t)).Qr.add(4),[4,Dy(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,Ny(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new jy(n,r)};function Ny(t){return Object(pl.b)(this,void 0,void 0,function(){var e,n;return Object(pl.d)(this,function(r){switch(r.label){case 0:if(!Uy(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Dy(t){return Object(pl.b)(this,void 0,void 0,function(){var e,n;return Object(pl.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ry(t,e){var n=Tl(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),Fy(n)?Vy(n):em(n).ar()&&Ly(n,e))}function Py(t,e){var n=Tl(t),r=em(n);n.Ur.delete(e),r.ar()&&My(n,e),0===n.Ur.size&&(r.ar()?r.lr():Uy(n)&&n.jr.set("Unknown"))}function Ly(t,e){t.Gr.H(e.targetId),em(t).Ir(e)}function My(t,e){t.Gr.H(e),em(t).Ar(e)}function Vy(t){t.Gr=new ld({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),em(t).start(),t.jr.Or()}function Fy(t){return Uy(t)&&!em(t).cr()&&t.Ur.size>0}function Uy(t){return 0===Tl(t).Qr.size}function qy(t){t.Gr=void 0}function By(t){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(e){return t.Ur.forEach(function(e,n){Ly(t,e)}),[2]})})}function Hy(t,e){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(n){return qy(t),Fy(t)?(t.jr.Lr(e),Vy(t)):t.jr.set("Unknown"),[2]})})}function zy(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i,o;return Object(pl.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof ud&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(pl.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),vl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Gy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof sd?t.Gr.st(e):e instanceof ad?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(Xh.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Vg(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(Hl.EMPTY_BYTE_STRING,n.snapshotVersion)),My(t,e);var r=new jp(n.target,e,1,n.sequenceNumber);Ly(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return vl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Gy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Gy(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r=this;return Object(pl.d)(this,function(i){switch(i.label){case 0:if(!_p(e))throw e;return t.Qr.add(1),[4,Dy(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return Vg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(pl.b)(r,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return vl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,Ny(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Qy(t,e){return e().catch(function(n){return Gy(t,n,e)})}function Ky(t){return Object(pl.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(pl.d)(this,function(s){switch(s.label){case 0:e=Tl(t),n=nm(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Uy(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,qg(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=nm(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Gy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Wy(e)&&$y(e),[2]}})})}function Wy(t){return Uy(t)&&!nm(t).cr()&&t.qr.length>0}function $y(t){nm(t).start()}function Yy(t){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(e){return nm(t).Sr(),[2]})})}function Jy(t){return Object(pl.b)(this,void 0,void 0,function(){var e,n,r;return Object(pl.d)(this,function(i){for(e=nm(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function Xy(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=Ap.from(r,e,n),[4,Qy(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Ky(t)];case 2:return o.sent(),[2]}})})}function Zy(t,e){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(n){switch(n.label){case 0:return e&&nm(t).br?[4,function(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r;return Object(pl.d)(this,function(i){switch(i.label){case 0:return Uf(r=e.code)&&r!==Ll.ABORTED?(n=t.qr.shift(),nm(t).hr(),[4,Qy(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Ky(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Wy(t)&&$y(t),[2]}})})}function tm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n;return Object(pl.d)(this,function(r){switch(r.label){case 0:return n=Tl(t),e?(n.Qr.delete(2),[4,Ny(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Dy(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function em(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Tl(t);return r.Cr(),new Iy(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:By.bind(null,t),Di:Hy.bind(null,t),Tr:zy.bind(null,t)}),t.Kr.push(function(n){return Object(pl.b)(e,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),Fy(t)?Vy(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),qy(t),e.label=3;case 3:return[2]}})})})),t.zr}function nm(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Tl(t);return r.Cr(),new xy(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Yy.bind(null,t),Di:Zy.bind(null,t),Vr:Jy.bind(null,t),Pr:Xy.bind(null,t)}),t.Kr.push(function(n){return Object(pl.b)(e,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,Ky(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(vl("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var rm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new gp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ml(Ll.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function im(t,e){if(bl("AsyncQueue",e+": "+t),_p(t))return new Ml(Ll.UNAVAILABLE,e+": "+t);throw t}var om=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Bl.comparator(e.key,n.key)}:function(t,e){return Bl.comparator(t.key,e.key)},this.keyedMap=Jf(),this.sortedSet=new Bf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),sm=function(){function t(){this.Jr=new Bf(Bl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):El():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),am=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,om.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),um=function(){this.Xr=void 0,this.listeners=[]},cm=function(){this.queries=new yg(function(t){return Kh(t)},Qh),this.onlineState="Unknown",this.Zr=new Set};function lm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(pl.d)(this,function(c){switch(c.label){case 0:if(n=Tl(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new um),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=im(a,"Initialization of query '"+Wh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&pm(n),[2]}})})}function hm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(pl.d)(this,function(a){return n=Tl(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function fm(t,e){for(var n=Tl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&pm(n)}function dm(t,e,n){var r=Tl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function pm(t){t.Zr.forEach(function(t){t.next()})}var gm=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new am(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=am.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),ym=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),mm=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Od(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?Ad(this.D,t.document,!1):new dh(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return bd(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new mm(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||ed()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(pl.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:return[4,Wg(this.localStore,new mm(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,$g(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new jg(Object.assign({},this.progress),t))]}})})}}();var vm=function(t){this.key=t},bm=function(t){this.key=t},wm=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=ed(),this.mutatedKeys=ed(),this.po=Yh(t),this.Eo=new om(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new sm,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Vh(this.query)&&i.size===this.query.limit?i.last():null,c=Fh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof fh?e:null;h&&(h=$h(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Vh(this.query)||Fh(this.query))for(;s.size>this.query.limit;){var l=Vh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return El()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new am(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new sm,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=ed(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new bm(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new vm(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=ed();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return am.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),_m=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Em=function(t){this.key=t,this.Co=!1},Om=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new yg(function(t){return Kh(t)},Qh),this.$o=new Map,this.Fo=new Set,this.Oo=new Bf(Bl.comparator),this.ko=new Map,this.Mo=new Jg,this.Lo={},this.Bo=new Map,this.qo=ig.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function Tm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(pl.d)(this,function(a){switch(a.label){case 0:return n=Zm(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,Bg(n.localStore,zh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Sm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Ry(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Sm(t,e,n,r){return Object(pl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(pl.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(pl.b)(this,void 0,void 0,function(){var i,o,s;return Object(pl.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,zg(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Vm(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,zg(t.localStore,e,!0)];case 1:return i=l.sent(),o=new wm(e,i.jn),s=o.Io(i.documents),a=od.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Vm(t,n,u.Po),c=new _m(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function Cm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:return n=Tl(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!Qh(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Hg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Py(n.remoteStore,r.targetId),Lm(n,r.targetId)}).catch(cg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Lm(n,r.targetId),[4,Hg(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Im(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(pl.d)(this,function(a){switch(a.label){case 0:r=tv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Tl(t),i=Wl.now(),o=e.reduce(function(t,e){return t.add(e.key)},ed());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Cf(c,n.get(c.key));null!=l&&s.push(new jf(c.key,l,nf(l.proto.mapValue),_f.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new Bf(Il)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,qm(r,i.changes)];case 3:return a.sent(),[4,Ky(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=im(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function xm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r;return Object(pl.d)(this,function(i){switch(i.label){case 0:n=Tl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Fg(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(Ol(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Ol(r.Co):t.removedDocuments.size>0&&(Ol(r.Co),r.Co=!1))}),[4,qm(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,cg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Am(t,e,n){var r=Tl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Tl(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&pm(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jm(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(pl.d)(this,function(c){switch(c.label){case 0:return(r=Tl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new Bf(Bl.comparator)).insert(o,new dh(o,Xh.min())),a=ed().add(o),u=new id(Xh.min(),new Map,new Gf(Il),s,a),[4,xm(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),Um(r),[3,4];case 2:return[4,Hg(r.localStore,e,!1).then(function(){return Lm(r,e,n)}).catch(cg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function km(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:n=Tl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Mg(n.localStore,e)];case 2:return i=o.sent(),Pm(n,r,null),Rm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,qm(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,cg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Nm(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:r=Tl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Tl(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return Ol(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Pm(r,e,n),Rm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,qm(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,cg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Dm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(pl.d)(this,function(a){switch(a.label){case 0:Uy((n=Tl(t)).remoteStore)||vl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Tl(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=im(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Rm(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function Pm(t,e,n){var r=Tl(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function Lm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||Mm(t,e)})}function Mm(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(Py(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),Um(t))}function Vm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof vm?(t.Mo.addReference(o.key,e),Fm(t,o)):o instanceof bm?(vl("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||Mm(t,o.key)):El()}}function Fm(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(vl("SyncEngine","New document in limbo: "+n),t.Fo.add(r),Um(t))}function Um(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new Bl(Fl.fromString(e)),r=t.qo.next();t.ko.set(r,new Em(n)),t.Oo=t.Oo.insert(n,r),Ry(t.remoteStore,new jp(zh(Mh(n.path)),r,2,gl.o))}}function qm(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(pl.d)(this,function(a){switch(a.label){case 0:return r=Tl(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ng.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(pl.d)(this,function(l){switch(l.label){case 0:n=Tl(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return yp.forEach(e,function(e){return yp.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return yp.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!_p(r=l.sent()))throw r;return vl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Bm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r;return Object(pl.d)(this,function(i){switch(i.label){case 0:return(n=Tl(t)).currentUser.isEqual(e)?[3,3]:(vl("SyncEngine","User change. New user:",e.toKey()),[4,Lg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new Ml(Ll.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,qm(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Hm(t,e){var n=Tl(t),r=n.ko.get(e);if(r&&r.Co)return ed().add(r.key);var i=ed(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function zm(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:return[4,zg((n=Tl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&Vm(n,e.targetId,i.Po),i)]}})})}function Gm(t){return Object(pl.b)(this,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){return[2,Qg((e=Tl(t)).localStore).then(function(t){return qm(e,t)})]})})}function Qm(t,e,n,r){return Object(pl.b)(this,void 0,void 0,function(){var i,o;return Object(pl.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Tl(t),r=Tl(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):yp.resolve(null)})})}((i=Tl(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ky(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Pm(i,e,r||null),Rm(i,e),function(t,e){Tl(Tl(t).Tn).Xt(e)}(i.localStore,e)):El(),s.label=4;case 4:return[4,qm(i,o)];case 5:return s.sent(),[3,7];case 6:vl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Km(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(pl.d)(this,function(c){switch(c.label){case 0:return Zm(n=Tl(t)),tv(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Wm(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,tm(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Ry(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Lm(n,e),Hg(n.localStore,e,!0)}),Py(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Wm(n,a)];case 5:return c.sent(),function(t){var e=Tl(t);e.ko.forEach(function(t,n){Py(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new Bf(Bl.comparator)}(n),n.Uo=!1,[4,tm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Wm(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(pl.d)(this,function(g){switch(g.label){case 0:n=Tl(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,Bg(n.localStore,zh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,zm(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Gg(n.localStore,a)];case 8:return p=g.sent(),[4,Bg(n.localStore,p)];case 9:return u=g.sent(),[4,Sm(n,$m(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function $m(t){return Lh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ym(t){var e=Tl(t);return Tl(Tl(e.localStore).persistence).gn()}function Jm(t,e,n,r){return Object(pl.b)(this,void 0,void 0,function(){var i,o,s;return Object(pl.d)(this,function(a){switch(a.label){case 0:return(i=Tl(t)).Uo?(vl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qg(i.localStore)];case 3:return o=a.sent(),s=id.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,qm(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Hg(i.localStore,e,!0)];case 6:return a.sent(),Lm(i,e,r),[3,8];case 7:El(),a.label=8;case 8:return[2]}})})}function Xm(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(pl.d)(this,function(f){switch(f.label){case 0:if(!(r=Zm(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(vl("SyncEngine","Adding an already active target "+s),[3,5]):[4,Gg(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Bg(r.localStore,a)];case 3:return u=f.sent(),[4,Sm(r,$m(a),u.targetId,!1)];case 4:f.sent(),Ry(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(pl.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,Hg(r.localStore,t,!1).then(function(){Py(r.remoteStore,t),Lm(r,t)}).catch(cg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Zm(t){var e=Tl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jm.bind(null,e),e.xo.Tr=fm.bind(null,e.eventManager),e.xo.Ko=dm.bind(null,e.eventManager),e}function tv(t){var e=Tl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=km.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nm.bind(null,e),e}var ev=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return this.D=Ty(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return Pg(this.persistence,new Dg,t.initialUser,this.D)},t.prototype.Go=function(t){return new ry(oy.Cs,this.D)},t.prototype.jo=function(t){return new yy},t.prototype.terminate=function(){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),nv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(pl.c)(e,t),e.prototype.initialize=function(e){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Kg(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,tv(this.Jo.syncEngine)];case 4:return n.sent(),[4,Ky(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return Pg(this.persistence,new Dg,t.initialUser,this.D)},e.prototype.zo=function(t){return new fg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=Ag(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Yp.withCacheSize(this.cacheSizeBytes):Yp.DEFAULT;return new Cg(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ey(),Oy(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new yy},e}(ev),rv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(pl.c)(e,t),e.prototype.initialize=function(e){return Object(pl.b)(this,void 0,void 0,function(){var n,r=this;return Object(pl.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof gy?(this.sharedClientState.syncEngine={wi:Qm.bind(null,n),_i:Jm.bind(null,n),mi:Xm.bind(null,n),gn:Ym.bind(null,n),di:Gm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(pl.b)(r,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return[4,Km(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Ey();if(!gy.At(e))throw new Ml(Ll.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ag(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new gy(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(nv),iv=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n=this;return Object(pl.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Am(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Bm.bind(null,this.syncEngine),[4,tm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new cm},t.prototype.createDatastore=function(t){var e=Ty(t.databaseInfo.databaseId),n=new _y(t.databaseInfo);return function(t,e,n){return new Ay(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Am(s.syncEngine,t,0)},o=vy.At()?new vy:new my,new ky(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Om(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(pl.b)(this,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return e=Tl(t),vl("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Dy(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),ov=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),sv=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new gp,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(pl.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(pl.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new ym(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(pl.b)(this,void 0,void 0,function(){var t,e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(pl.b)(this,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(pl.b)(this,void 0,void 0,function(){var t,e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(pl.b)(this,void 0,void 0,function(){var e,n=this;return Object(pl.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ml(Ll.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(pl.d)(this,function(u){switch(u.label){case 0:return n=Tl(t),r=Cd(n.D)+"/documents",i={documents:e.map(function(t){return Ed(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Ol(!!e.found);var n=Od(t,e.found.name),r=bd(e.found.updateTime),i=new tf({mapValue:{fields:e.found.fields}});return new fh(n,r,i,{})}(t,e):"missing"in e?function(t,e){Ol(!!e.missing),Ol(!!e.readTime);var n=Od(t,e.missing),r=bd(e.readTime);return new dh(n,r)}(t,e):El()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Ol(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof dh||t instanceof fh?n.recordVersion(t):El()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Mf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(pl.b)(this,void 0,void 0,function(){var t,e=this;return Object(pl.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Bl.fromPath(n);e.mutations.push(new Vf(r,e.precondition(r)))}),[4,function(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:return n=Tl(t),r=Cd(n.D)+"/documents",i={writes:e.map(function(t){return jd(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof fh)e=t.version;else{if(!(t instanceof dh))throw El();e=Xh.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ml(Ll.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?_f.updateTime(e):_f.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Xh.min()))throw new Ml(Ll.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _f.updateTime(e)}return _f.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),av=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Sy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(pl.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(pl.d)(this,function(r){return t=new sv(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Dl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Uf(e)}return!1},t}(),uv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=sy.UNAUTHENTICATED,this.clientId=Cl.u(),this.credentialListener=function(){},this.receivedInitialUser=new gp,this.credentials.setChangeListener(function(t){vl("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ml(Ll.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new gp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(pl.b)(t,void 0,void 0,function(){var t,n;return Object(pl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=im(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function cv(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(pl.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),vl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(pl.b)(i,void 0,void 0,function(){return Object(pl.d)(this,function(t){switch(t.label){case 0:return[4,Lg(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function lv(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r;return Object(pl.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,hv(t)];case 1:return n=i.sent(),vl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(pl.b)(this,void 0,void 0,function(){var n,r;return Object(pl.d)(this,function(i){switch(i.label){case 0:return(n=Tl(t)).asyncQueue.verifyOperationInProgress(),vl("RemoteStore","RemoteStore received new credentials"),r=Uy(n),n.Qr.add(3),[4,Dy(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,Ny(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function hv(t){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(vl("FirestoreClient","Using default OfflineComponentProvider"),[4,cv(t,new ev)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function fv(t){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(vl("FirestoreClient","Using default OnlineComponentProvider"),[4,lv(t,new iv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function dv(t){return hv(t).then(function(t){return t.persistence})}function pv(t){return hv(t).then(function(t){return t.localStore})}function gv(t){return fv(t).then(function(t){return t.remoteStore})}function yv(t){return fv(t).then(function(t){return t.syncEngine})}function mv(t){return Object(pl.b)(this,void 0,void 0,function(){var e,n;return Object(pl.d)(this,function(r){switch(r.label){case 0:return[4,fv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Tm.bind(null,e.syncEngine),n.onUnlisten=Cm.bind(null,e.syncEngine),n)]}})})}function vv(t,e,n){var r=this;void 0===n&&(n={});var i=new gp;return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(r,void 0,void 0,function(){var r;return Object(pl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ov({next:function(o){e.enqueueAndForget(function(){return hm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ml(Ll.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ml(Ll.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new gm(Mh(n.path),o,{includeMetadataChanges:!0,uo:!0});return lm(t,s)},[4,mv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function bv(t,e,n){var r=this;void 0===n&&(n={});var i=new gp;return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(r,void 0,void 0,function(){var r;return Object(pl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ov({next:function(n){e.enqueueAndForget(function(){return hm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ml(Ll.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new gm(n,o,{includeMetadataChanges:!0,uo:!0});return lm(t,s)},[4,mv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var wv=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},_v=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ev=new Map,Ov=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Tv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(sy.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Sv=function(){function t(t){var e=this;this.fc=null,this.currentUser=sy.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(vl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ol("string"==typeof n.accessToken),new Ov(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Ol(null===t||"string"==typeof t),new sy(t)},t}(),Cv=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=sy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Iv=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Cv(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(sy.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function xv(t,e,n){if(!n)throw new Ml(Ll.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Av(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function jv(t,e,n,r){if(!0===e&&!0===r)throw new Ml(Ll.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function kv(t){if(!Bl.isDocumentKey(t))throw new Ml(Ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Nv(t){if(Bl.isDocumentKey(t))throw new Ml(Ll.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Dv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":El()}function Rv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ml(Ll.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Dv(t);throw new Ml(Ll.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Pv(t,e){if(e<=0)throw new Ml(Ll.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Lv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ml(Ll.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ml(Ll.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,jv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Mv=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1,t instanceof _v?(this._databaseId=t,this._credentials=new Tv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ml(Ll.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _v(t.options.projectId)}(t),this._credentials=new Sv(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ml(Ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ml(Ll.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Tv;switch(t.type){case"gapi":var e=t.client;return Ol(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Iv(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ml(Ll.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Ev.get(this))&&(vl("ComponentProvider","Removing Datastore"),Ev.delete(this),t.terminate()),Promise.resolve();var t},t}(),Vv=function(t){this._delegate=t},Fv=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new qv(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Uv=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),qv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Mh(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(pl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Fv(this.firestore,null,new Bl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Uv);function Bv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Vv&&(t=t._delegate),xv("collection","path",e),t instanceof Mv)return Nv(n=Fl.fromString.apply(Fl,Object(pl.f)([e],r))),new qv(t,null,n);if(!(t instanceof Fv||t instanceof qv))throw new Ml(Ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Nv(n=Fl.fromString.apply(Fl,Object(pl.f)([t.path],r)).child(Fl.fromString(e))),new qv(t.firestore,null,n)}function Hv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Vv&&(t=t._delegate),1===arguments.length&&(e=Cl.u()),xv("doc","path",e),t instanceof Mv)return kv(n=Fl.fromString.apply(Fl,Object(pl.f)([e],r))),new Fv(t,null,new Bl(n));if(!(t instanceof Fv||t instanceof qv))throw new Ml(Ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kv(n=t._path.child(Fl.fromString.apply(Fl,Object(pl.f)([e],r)))),new Fv(t.firestore,t instanceof qv?t._converter:null,new Bl(n))}function zv(t,e){return t instanceof Vv&&(t=t._delegate),e instanceof Vv&&(e=e._delegate),(t instanceof Fv||t instanceof qv)&&(e instanceof Fv||e instanceof qv)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Gv(t,e){return t instanceof Vv&&(t=t._delegate),e instanceof Vv&&(e=e._delegate),t instanceof Uv&&e instanceof Uv&&t.firestore===e.firestore&&Qh(t._query,e._query)&&t._converter===e._converter}var Qv=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Sy(this,"async_queue_retry"),this.bc=function(){var e=Oy();e&&vl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Oy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Oy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(pl.b)(this,void 0,void 0,function(){var t,e=this;return Object(pl.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!_p(t=n.sent()))throw t;return vl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,bl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=rm.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&El()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(pl.b)(this,void 0,void 0,function(){var t;return Object(pl.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function Kv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new gp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Wv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Qv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(pl.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Yv(this),this._firestoreClient.terminate()},e}(Mv);function $v(t){return t._firestoreClient||Yv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Yv(t){var e=t._freezeSettings(),n=function(t,e,n){return new wv(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new uv(t._credentials,t._queue,n)}function Jv(t,e,n){var r=this,i=new gp;return t.asyncQueue.enqueue(function(){return Object(pl.b)(r,void 0,void 0,function(){var r;return Object(pl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,cv(t,n)];case 1:return o.sent(),[4,lv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ll.FAILED_PRECONDITION||t.code===Ll.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Xv(t){if(t._initialized||t._terminated)throw new Ml(Ll.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Zv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ql(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),tb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Hl.fromBase64String(e))}catch(e){throw new Ml(Ll.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Hl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),eb=function(t){this._methodName=t},nb=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ml(Ll.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ml(Ll.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Il(this._lat,t._lat)||Il(this._long,t._long)},t}(),rb=/^__.*__$/,ib=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new jf(t,this.data,this.fieldMask,e,this.fieldTransforms):new Af(t,this.data,e,this.fieldTransforms)},t}(),ob=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new jf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function sb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw El()}}var ab=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return Ib(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(sb(this.Fc)&&rb.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),ub=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Ty(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new ab({Fc:t,methodName:e,Kc:n,path:ql.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function cb(t){var e=t._freezeSettings(),n=Ty(t._databaseId);return new ub(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lb(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Ob("Data must be an object, but it was:",s,r);var a,u,c=_b(r,s);if(o.merge)a=new Zh(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Tb(e,f[h],n);if(!s.contains(d))throw new Ml(Ll.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");xb(l,d)||l.push(d)}a=new Zh(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new ib(new tf(c),a,u)}var hb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(eb);function fb(t,e,n){return new ab({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var db=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype._toFieldTransform=function(t){return new bf(t.path,new hf)},e.prototype.isEqual=function(t){return t instanceof e},e}(eb),pb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(pl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=fb(this,t,!0),n=this.jc.map(function(t){return wb(t,e)}),r=new ff(n);return new bf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(eb),gb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(pl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=fb(this,t,!0),n=this.jc.map(function(t){return wb(t,e)}),r=new pf(n);return new bf(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(eb),yb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(pl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new yf(t.D,sf(t.D,this.Gc));return new bf(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(eb);function mb(t,e,n,r){var i=t.Wc(1,e,n);Ob("Data must be an object, but it was:",i,r);var o=[],s=new ef;kl(r,function(t,r){var a=Cb(e,t,n);r instanceof Vv&&(r=r._delegate);var u=i.Bc(a);if(r instanceof hb)o.push(a);else{var c=wb(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Zh(o);return new ob(s.v(),a,i.fieldTransforms)}function vb(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[Tb(e,r,n)],u=[i];if(o.length%2!=0)throw new Ml(Ll.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Tb(e,o[c])),u.push(o[c+1]);for(var l=[],h=new ef,f=a.length-1;f>=0;--f)if(!xb(l,a[f])){var d=a[f],p=u[f];p instanceof Vv&&(p=p._delegate);var g=s.Bc(d);if(p instanceof hb)l.push(d);else{var y=wb(p,g);null!=y&&(l.push(d),h.set(d,y))}}var m=new Zh(l);return new ob(h.v(),m,s.fieldTransforms)}function bb(t,e,n,r){return void 0===r&&(r=!1),wb(n,t.Wc(r?4:3,e))}function wb(t,e){if(t instanceof Vv&&(t=t._delegate),Eb(t))return Ob("Unsupported field value:",e,t),_b(t,e);if(t instanceof eb)return function(t,e){if(!sb(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=wb(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Vv&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return sf(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Wl.fromDate(t);return{timestampValue:yd(e.D,n)}}if(t instanceof Wl)return n=new Wl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:yd(e.D,n)};if(t instanceof nb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tb)return{bytesValue:md(e.D,t._byteString)};if(t instanceof Fv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:wd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Dv(t))}(t,e)}function _b(t,e){var n={};return Nl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kl(t,function(t,r){var i=wb(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Eb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wl||t instanceof nb||t instanceof tb||t instanceof Fv||t instanceof eb)}function Ob(t,e,n){if(!Eb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Dv(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function Tb(t,e,n){if(e instanceof Vv&&(e=e._delegate),e instanceof Zv)return e._internalPath;if("string"==typeof e)return Cb(t,e);throw Ib("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Sb=new RegExp("[~\\*/\\[\\]]");function Cb(t,e,n){if(e.search(Sb)>=0)throw Ib("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Zv.bind.apply(Zv,Object(pl.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Ib("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Ib(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ml(Ll.INVALID_ARGUMENT,(a+=". ")+t+u)}function xb(t,e){return t.some(function(t){return t.isEqual(e)})}var Ab=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Fv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new jb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(kb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),jb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ab);function kb(t,e){return"string"==typeof e?Cb(t,e):e instanceof Vv?e._delegate._internalPath:e._internalPath}var Nb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Db=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(pl.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Rb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(kb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Ab),Rb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Db),Pb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Nb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Rb(n._firestore,n._userDataWriter,r.key,r,new Nb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ml(Ll.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Rb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Nb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Rb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Nb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Lb(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Lb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return El()}}function Mb(t,e){return t instanceof Db&&e instanceof Db?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Pb&&e instanceof Pb&&t._firestore===e._firestore&&Gv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Vb(t){if(Fh(t)&&0===t.explicitOrderBy.length)throw new Ml(Ll.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fb=function(){};function Ub(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var qb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(pl.c)(e,t),e.prototype._apply=function(t){var e=cb(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Wb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Kb(r,t,l[c]));a={arrayValue:{values:u}}}else a=Kb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Wb(s,o),a=bb(n,"where",s,"in"===o||"not-in"===o);var h=wh.create(i,o,a);return function(t,e){if(e.g()){var n=qh(t);if(null!==n&&!n.isEqual(e.field))throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Uh(t);null!==r&&$b(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ml(Ll.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Uv(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Ph(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Fb),Bb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(pl.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new kh(e,n);return function(t,e){if(null===Uh(t)){var n=qh(t);null!==n&&$b(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new Uv(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ph(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Fb),Hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(pl.c)(e,t),e.prototype._apply=function(t){return new Uv(t.firestore,t._converter,Gh(t._query,this.Xc,this.Zc))},e}(Fb),zb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(pl.c)(e,t),e.prototype._apply=function(t){var e=Qb(t,this.type,this.ta,this.ea);return new Uv(t.firestore,t._converter,function(t,e){return new Ph(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Fb),Gb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(pl.c)(e,t),e.prototype._apply=function(t){var e=Qb(t,this.type,this.ta,this.ea);return new Uv(t.firestore,t._converter,function(t,e){return new Ph(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Fb);function Qb(t,e,n,r){if(n[0]instanceof Vv&&(n[0]=n[0]._delegate),n[0]instanceof Ab)return function(t,e,n,r,i){if(!r)throw new Ml(Ll.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Hh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(oh(e,r.key));else{var c=r.field(u.field);if($l(c))throw new Ml(Ll.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ah(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=cb(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ml(Ll.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Bh(t)&&-1!==c.indexOf("/"))throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Fl.fromString(c));if(!Bl.isDocumentKey(l))throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Bl(l);a.push(oh(e,h))}else{var f=bb(n,r,c);a.push(f)}}return new Ah(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Kb(t,e,n){if(n instanceof Vv&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bh(e)&&-1!==n.indexOf("/"))throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Fl.fromString(n));if(!Bl.isDocumentKey(r))throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return oh(t,new Bl(r))}if(n instanceof Fv)return oh(t,n._key);throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Dv(n)+".")}function Wb(t,e){if(!Array.isArray(t)||0===t.length)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function $b(t,e,n){if(!n.isEqual(e))throw new Ml(Ll.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Yb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Xl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ql(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Kl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw El()}},t.prototype.convertObject=function(t,e){var n=this,r={};return kl(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new nb(Ql(t.latitude),Ql(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Yl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Jl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Gl(t);return new Wl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Fl.fromString(t);Ol(Gd(n));var r=new _v(n.get(1),n.get(3)),i=new Bl(n.popFirst(5));return r.isEqual(e)||bl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Jb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Xb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(pl.c)(e,t),e.prototype.convertBytes=function(t){return new tb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Fv(this.firestore,null,e)},e}(Yb),Zb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=cb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=tw(t,this._firestore),i=Jb(r._converter,e,n),o=lb(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,_f.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=tw(t,this._firestore);return e instanceof Vv&&(e=e._delegate),o="string"==typeof e||e instanceof Zv?vb(this._dataReader,"WriteBatch.update",s._key,e,n,r):mb(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,_f.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=tw(t,this._firestore);return this._mutations=this._mutations.concat(new Mf(e._key,_f.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ml(Ll.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function tw(t,e){if(t instanceof Vv&&(t=t._delegate),t.firestore!==e)throw new Ml(Ll.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ew=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(pl.c)(e,t),e.prototype.convertBytes=function(t){return new tb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Fv(this.firestore,null,e)},e}(Yb);function nw(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Rv(t,Fv);var o=Rv(t.firestore,Wv),s=cb(o);return e instanceof Vv&&(e=e._delegate),iw(o,[("string"==typeof e||e instanceof Zv?vb(s,"updateDoc",t._key,e,n,r):mb(s,"updateDoc",t._key,e)).toMutation(t._key,_f.exists(!0))])}function rw(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Vv&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Kv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Kv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Fv)c=Rv(t.firestore,Wv),l=Mh(t._key.path),u={next:function(e){i[a]&&i[a](ow(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Rv(t,Uv);c=Rv(d.firestore,Wv),l=d._query;var p=new ew(c);u={next:function(t){i[a]&&i[a](new Pb(c,p,d,t))},error:i[a+1],complete:i[a+2]},Vb(t._query)}return function(t,e,n,r){var i=this,o=new ov(r),s=new gm(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(i,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return e=lm,[4,mv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(i,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return e=hm,[4,mv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}($v(c),l,h,u)}function iw(t,e){return function(t,e){var n=this,r=new gp;return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(n,void 0,void 0,function(){var n;return Object(pl.d)(this,function(i){switch(i.label){case 0:return n=Im,[4,yv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}($v(t),e)}function ow(t,e,n){var r=n.docs.get(e._key),i=new ew(t);return new Db(t,i,e._key,r,new Nb(n.hasPendingWrites,n.fromCache),e._converter)}var sw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(pl.c)(e,t),e.prototype.get=function(e){var n=this,r=tw(e,this._firestore),i=new ew(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Db(n._firestore,i,r._key,t._document,new Nb(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=cb(t)}return t.prototype.get=function(t){var e=this,n=tw(t,this._firestore),r=new Xb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return El();var i=t[0];if(i instanceof dh)return new Ab(e._firestore,r,n._key,null,n._converter);if(i instanceof fh)return new Ab(e._firestore,r,i.key,i,n._converter);throw El()})},t.prototype.set=function(t,e,n){var r=tw(t,this._firestore),i=Jb(r._converter,e,n),o=lb(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=tw(t,this._firestore);return e instanceof Vv&&(e=e._delegate),o="string"==typeof e||e instanceof Zv?vb(this._dataReader,"Transaction.update",s._key,e,n,r):mb(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=tw(t,this._firestore);return this._transaction.delete(e._key),this},t}());function aw(){if("undefined"==typeof Uint8Array)throw new Ml(Ll.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function uw(){if("undefined"==typeof atob)throw new Ml(Ll.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var cw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.fromBase64String=function(t){return uw(),new e(tb.fromBase64String(t))},e.fromUint8Array=function(t){return aw(),new e(tb.fromUint8Array(t))},e.prototype.toBase64=function(){return uw(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return aw(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Vv),lw=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Xv(t=Rv(t,Wv));var n=$v(t),r=t._freezeSettings(),i=new iv;return Jv(n,i,new nv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Xv(t=Rv(t,Wv));var e=$v(t),n=t._freezeSettings(),r=new iv;return Jv(e,r,new rv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ml(Ll.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new gp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(pl.b)(e,void 0,void 0,function(){var e;return Object(pl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(pl.b)(this,void 0,void 0,function(){return Object(pl.d)(this,function(e){switch(e.label){case 0:return vp.At()?[4,vp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Ag(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),hw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof _v||(i.sa=e),i}return Object(pl.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Rv(t,Mv))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&wl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(pl.b)(e,void 0,void 0,function(){var e,n;return Object(pl.d)(this,function(r){switch(r.label){case 0:return[4,dv(t)];case 1:return e=r.sent(),[4,gv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Tl(t);return e.Qr.delete(0),Ny(e)}(n))]}})})})}($v(Rv(this._delegate,Wv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(pl.b)(e,void 0,void 0,function(){var e,n;return Object(pl.d)(this,function(r){switch(r.label){case 0:return[4,dv(t)];case 1:return e=r.sent(),[4,gv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(pl.b)(this,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return(e=Tl(t)).Qr.add(0),[4,Dy(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}($v(Rv(this._delegate,Wv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&jv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new gp;return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(e,void 0,void 0,function(){var e;return Object(pl.d)(this,function(r){switch(r.label){case 0:return e=Dm,[4,yv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}($v(Rv(this._delegate,Wv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ov(e);return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(n,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Tl(t).Zr.add(e),e.next()},[4,mv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(n,void 0,void 0,function(){var e;return Object(pl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Tl(t).Zr.delete(e)},[4,mv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}($v(t=Rv(t,Wv)),Kv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new Ml(Ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Sw(this,Bv(this._delegate,t))}catch(t){throw mw(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new yw(this,Hv(this._delegate,t))}catch(t){throw mw(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Ew(this,function(t,e){if(t=Rv(t,Mv),xv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Uv(t,null,function(t){return new Ph(Fl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw mw(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new gp;return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(n,void 0,void 0,function(){var n;return Object(pl.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return fv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new av(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}($v(t),function(n){return e(new sw(t,n))})}(this._delegate,function(n){return t(new dw(e,n))})},e.prototype.batch=function(){var t=this;return $v(this._delegate),new pw(new Zb(this._delegate,function(e){return iw(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new Ml(Ll.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Ml(Ll.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Vv),fw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(pl.c)(e,t),e.prototype.convertBytes=function(t){return new cw(new tb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return yw.ia(e,this.firestore,null)},e}(Yb),dw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new fw(e),r}return Object(pl.c)(e,t),e.prototype.get=function(t){var e=this,n=Cw(t);return this._delegate.get(n).then(function(t){return new ww(e._firestore,new Db(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=Cw(t);return n?(Av("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Cw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(pl.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Cw(t);return this._delegate.delete(e),this},e}(Vv),pw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype.set=function(t,e,n){var r=Cw(t);return n?(Av("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Cw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(pl.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Cw(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(Vv),gw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(pl.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Rb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new _w(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new fw(t),n),i.set(n,o)),o},e}(Vv);gw.oa=new WeakMap;var yw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new fw(e),r}return Object(pl.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new Ml(Ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Fv(n._delegate,r,new Bl(t)))},e.ia=function(t,n,r){return new e(n,new Fv(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Sw(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Sw(this.firestore,Bv(this._delegate,t))}catch(t){throw mw(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Vv&&(t=t._delegate),t instanceof Fv&&zv(this._delegate,t)},e.prototype.set=function(t,e){e=Av("DocumentReference.set",e);try{return function(t,e,n){t=Rv(t,Fv);var r=Rv(t.firestore,Wv),i=Jb(t._converter,e,n);return iw(r,[lb(cb(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,_f.none())])}(this._delegate,t,e)}catch(t){throw mw(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?nw(this._delegate,t):nw.apply(void 0,Object(pl.f)([this._delegate,t,e],n))}catch(t){throw mw(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return iw(Rv((t=this._delegate).firestore,Wv),[new Mf(t._key,_f.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=vw(e),i=bw(e,function(e){return new ww(t.firestore,new Db(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return rw(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Rv(t,Fv);var e=Rv(t.firestore,Wv),n=$v(e),r=new ew(e);return function(t,e){var n=this,r=new gp;return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(n,void 0,void 0,function(){var n;return Object(pl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i;return Object(pl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Tl(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof fh?n.resolve(i):i instanceof dh?n.resolve(null):n.reject(new Ml(Ll.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=im(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,pv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Db(e,r,t._key,n,new Nb(n instanceof fh&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Rv(t,Fv);var e=Rv(t.firestore,Wv);return vv($v(e),t._key,{source:"server"}).then(function(n){return ow(e,t,n)})}(this._delegate):function(t){t=Rv(t,Fv);var e=Rv(t.firestore,Wv);return vv($v(e),t._key).then(function(n){return ow(e,t,n)})}(this._delegate)).then(function(t){return new ww(e.firestore,new Db(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?gw.ra(this.firestore,t):null))},e}(Vv);function mw(t,e,n){return t.message=t.message.replace(e,n),t}function vw(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Kv(r))return r}return{}}function bw(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Kv(t[0])?t[0]:Kv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ww=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(pl.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new yw(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return Mb(this._delegate,t._delegate)},e}(Vv),_w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ww),Ew=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new fw(e),r}return Object(pl.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ub(this._delegate,function(t,e,n){var r=e,i=kb("where",t);return new qb(i,r,n)}(t,n,r)))}catch(t){throw mw(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ub(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=kb("orderBy",t);return new Bb(r,n)}(t,n)))}catch(t){throw mw(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ub(this._delegate,function(t){return Pv("limit",t),new Hb("limit",t,"F")}(t)))}catch(t){throw mw(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ub(this._delegate,function(t){return Pv("limitToLast",t),new Hb("limitToLast",t,"L")}(t)))}catch(t){throw mw(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ub(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zb("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw mw(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ub(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zb("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw mw(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ub(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gb("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw mw(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ub(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gb("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw mw(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Gv(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Rv(t,Uv);var e=Rv(t.firestore,Wv),n=$v(e),r=new ew(e);return function(t,e){var n=this,r=new gp;return t.asyncQueue.enqueueAndForget(function(){return Object(pl.b)(n,void 0,void 0,function(){var n;return Object(pl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(pl.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(pl.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,zg(t,e,!0)];case 1:return a=u.sent(),r=new wm(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=im(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,pv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Pb(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Rv(t,Uv);var e=Rv(t.firestore,Wv),n=$v(e),r=new ew(e);return bv(n,t._query,{source:"server"}).then(function(n){return new Pb(e,r,t,n)})}(this._delegate):function(t){t=Rv(t,Uv);var e=Rv(t.firestore,Wv),n=$v(e),r=new ew(e);return Vb(t._query),bv(n,t._query).then(function(n){return new Pb(e,r,t,n)})}(this._delegate)).then(function(t){return new Tw(e.firestore,new Pb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=vw(e),i=bw(e,function(e){return new Tw(t.firestore,new Pb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return rw(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?gw.ra(this.firestore,t):null))},e}(Vv),Ow=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(pl.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new _w(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(Vv),Tw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(pl.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Ew(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new _w(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Ow(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new _w(n._firestore,r))})},e.prototype.isEqual=function(t){return Mb(this._delegate,t._delegate)},e}(Vv),Sw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(pl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new yw(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new yw(this.firestore,void 0===t?Hv(this._delegate):Hv(this._delegate,t))}catch(t){throw mw(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Rv(t.firestore,Wv),r=Hv(t),i=Jb(t._converter,e);return iw(n,[lb(cb(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,_f.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new yw(e.firestore,t)})},e.prototype.isEqual=function(t){return zv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?gw.ra(this.firestore,t):null))},e}(Ew);function Cw(t){return t instanceof Vv&&(t=t._delegate),Rv(t,Fv)}var Iw,xw=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Zv.bind.apply(Zv,Object(pl.f)([void 0],e))))||this}return Object(pl.c)(e,t),e.documentId=function(){return new e(ql.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof Vv&&(t=t._delegate),t instanceof Zv&&this._delegate._internalPath.isEqual(t._internalPath)},e}(Vv),Aw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(pl.c)(e,t),e.serverTimestamp=function(){var t=new db("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new hb("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pb("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gb("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new yb("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(Vv),jw=n("/6Yf"),kw={Firestore:hw,GeoPoint:nb,Timestamp:Wl,Blob:cw,Transaction:dw,WriteBatch:pw,DocumentReference:yw,DocumentSnapshot:ww,Query:Ew,QueryDocumentSnapshot:_w,QuerySnapshot:Tw,CollectionReference:Sw,FieldPath:xw,FieldValue:Aw,setLogLevel:function(t){yl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new jw.a("firestore",function(t){return function(t,e){return new hw(t,new Wv(t,e),new lw)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},kw)))})(Iw=ls.a),Iw.registerVersion("@firebase/firestore","2.2.1");var Nw=n("VRyK"),Dw=n("qgXg"),Rw=n("Ylt2");class Pw extends ln.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Lw(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new hn.a;if(this.isStopped||this.hasError?o=er.a.EMPTY:(this.observers.push(t),o=new Rw.a(this,t)),r&&t.add(t=new as.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Dw.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Lw{constructor(t,e){this.time=t,this.value=e}}function Mw(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Pw(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Vw(t,e){return e?xn(()=>t,e):xn(()=>t)}var Fw=n("tf+s");const Uw=new r.r("angularfire2.auth.use-emulator"),qw=new r.r("angularfire2.auth.settings"),Bw=new r.r("angularfire2.auth.tenant-id"),Hw=new r.r("angularfire2.auth.langugage-code"),zw=new r.r("angularfire2.auth.use-device-language"),Gw=new r.r("angularfire.auth.persistence");let Qw=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new us.d(i),f=Object(us.h)(h),d=new ln.a,p=Object(Te.a)(void 0).pipe(Object(as.b)(h.outsideAngular),xn(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(pt.a)(()=>Object(us.g)(t,i,e)),Object(pt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(us.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Mw({bufferSize:1,refCount:!1}));if(D(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Te.a)(null);else{p.pipe(Zn()).subscribe();const t=p.pipe(xn(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Mw({bufferSize:1,refCount:!1})),e=t=>new ft.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(xn(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(xn(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Vw(n),Object(Fw.a)(h.outsideAngular),Object(as.b)(h.insideAngular)),this.user=t.pipe(Vw(r),Object(Fw.a)(h.outsideAngular),Object(as.b)(h.insideAngular)),this.idToken=this.user.pipe(xn(t=>t?Object(yt.a)(t.getIdToken()):Object(Te.a)(null))),this.idTokenResult=this.user.pipe(xn(t=>t?Object(yt.a)(t.getIdTokenResult()):Object(Te.a)(null))),this.credential=Object(Nw.a)(t,d,this.authState.pipe(xe(t=>!t))).pipe(Object(pt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Fw.a)(h.outsideAngular),Object(as.b)(h.insideAngular))}return Object(us.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(us.c),r.Qb(us.b,8),r.Qb(r.C),r.Qb(r.A),r.Qb(Uw,8),r.Qb(qw,8),r.Qb(Bw,8),r.Qb(Hw,8),r.Qb(zw,8),r.Qb(Gw,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(us.c),Object(r.Qb)(us.b,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(Uw,8),Object(r.Qb)(qw,8),Object(r.Qb)(Bw,8),Object(r.Qb)(Hw,8),Object(r.Qb)(zw,8),Object(r.Qb)(Gw,8))},token:t,providedIn:"any"}),t})();function Kw(t,e){return function(t,e=es.a){return new ft.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Ww(t,e){return Kw(t,e).pipe(Object(pt.a)(t=>({payload:t,type:"query"})))}function $w(t,e){return Ww(t,e).pipe(Pn(void 0),ns(),Object(pt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Yw(t,e,n){return $w(t,n).pipe(Ln((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Jw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Jw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Jw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new os(void 0,void 0)),Object(pt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Jw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Xw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(us.e)(Qw,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Zw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=$w(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(pt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Pn(void 0),ns(),xe(([t,e])=>e.length>0||!t),Object(pt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ln((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Xw(t);return Yw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ww(this.query,this.afs.schedulers.outsideAngular).pipe(Object(pt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(yt.a)(this.query.get(t)).pipe(Object(as.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new t_(this.ref.doc(t),this.afs)}}class t_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=s_(n,e);return new Zw(r,i,this.afs)}snapshotChanges(){return Kw(this.ref,this.afs.schedulers.outsideAngular).pipe(Pn(void 0),ns(),Object(pt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(pt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(yt.a)(this.ref.get(t)).pipe(Object(as.b)(this.afs.schedulers.insideAngular))}}class e_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?$w(this.query,this.afs.schedulers.outsideAngular).pipe(Object(pt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),xe(t=>t.length>0),this.afs.keepUnstableUntilFirst):$w(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ln((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Xw(t);return Yw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ww(this.query,this.afs.schedulers.outsideAngular).pipe(Object(pt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(yt.a)(this.query.get(t)).pipe(Object(as.b)(this.afs.schedulers.insideAngular))}}const n_=new r.r("angularfire2.enableFirestorePersistence"),r_=new r.r("angularfire2.firestore.persistenceSettings"),i_=new r.r("angularfire2.firestore.settings"),o_=new r.r("angularfire2.firestore.use-emulator");function s_(t,e=(t=>t)){return{query:e(t),ref:t}}let a_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new us.d(o),this.keepUnstableUntilFirst=Object(us.h)(this.schedulers);const c=Object(us.g)(t,o,e);!cs.a.auth&&u&&Object(us.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(us.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!D(i)){const e=()=>{try{return Object(yt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Iw){return"undefined"!=typeof console&&console.warn(Iw),Object(Te.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Te.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=s_(n,e),o=this.schedulers.ngZone.run(()=>r);return new Zw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new e_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new t_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(us.c),r.Qb(us.b,8),r.Qb(n_,8),r.Qb(i_,8),r.Qb(r.C),r.Qb(r.A),r.Qb(r_,8),r.Qb(o_,8),r.Qb(Uw,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(us.c),Object(r.Qb)(us.b,8),Object(r.Qb)(n_,8),Object(r.Qb)(i_,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(r_,8),Object(r.Qb)(o_,8),Object(r.Qb)(Uw,8))},token:t,providedIn:"any"}),t})();function u_(t,e){if(1&t&&(r.Nb(0,"ul"),r.Nb(1,"li"),r.bc(2),r.Mb(),r.Nb(3,"li"),r.bc(4),r.Mb(),r.Nb(5,"li"),r.bc(6),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(2),r.cc(t.title),r.Ab(2),r.dc("Price: ",t.price,""),r.Ab(2),r.dc("Quantity: ",t.quantity,"")}}const c_=function(){return["/login"]};let l_=(()=>{class t{constructor(t,e,n,r){this.connectionService=t,this.router=e,this.afs=n,this.http=r,this.title="Home",this.products=[{title:"",price:"",quantity:""}],this.dataObserver=null}goToAboutPage(){this.router.navigate(["/second","Szab\xf3 Csaba",{message:this.title}])}ngOnInit(){this.http.get("https://progrendszerek.herokuapp.com/product").subscribe(t=>{this.products=t,console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ts),r.Kb(Ao),r.Kb(a_),r.Kb(Ke))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-home"]],decls:10,vars:4,consts:[["role","main",1,"content"],[1,"container"],[4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"span"),r.bc(2),r.Mb(),r.Nb(3,"div",1),r.ac(4,u_,7,3,"ul",2),r.Nb(5,"div",1),r.Nb(6,"button",3),r.Tb("click",function(){return e.goToAboutPage()}),r.bc(7,"About us"),r.Mb(),r.Nb(8,"a",4),r.bc(9,"Logout"),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.dc("",e.title," page!"),r.Ab(2),r.Vb("ngForOf",e.products),r.Ab(4),r.Vb("routerLink",r.Wb(3,c_)))},directives:[j,jo],styles:[""]}),t})(),h_=(()=>{class t{constructor(t){this.router=t}canActivate(t,e){return!!localStorage.getItem("user")||(this.router.navigate(["/login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ao))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),f_=(()=>{class t{constructor(t,e){this.http=t,this.auth=e}login(t,e){return this.auth.signInWithEmailAndPassword(t,e)}logout(){return this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ke),r.Qb(Qw))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const d_=function(){return["/home"]},p_=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class t{constructor(t,e){this.loginService=t,this.router=e,this.email="",this.password=""}login(){""!=this.email&&""!=this.password&&this.loginService.login(this.email,this.password).then(t=>{console.log(t),localStorage.setItem("user",t.user.uid),this.router.navigate(["/home"])}).catch(t=>{console.log("login error",t)})}ngOnInit(){localStorage.getItem("user")&&(localStorage.removeItem("user"),this.loginService.logout().then(()=>{console.log("logout sikeres")}).catch(t=>{console.log("logout error",t)}))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(f_),r.Kb(Ao))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-login"]],decls:14,vars:2,consts:[["role","main",1,"content"],["data-validate","Username is required",1,"wrap-input100","rs1","validate-input"],["for","uname"],["type","text","placeholder","Enter Username","name","uname","required","",3,"ngModel","ngModelChange"],["data-validate","Password is required",1,"wrap-input100","rs2","validate-input"],["for","psw"],["type","password","placeholder","Enter Password","name","psw","required","",3,"ngModel","ngModelChange"],[1,"container-login100-form-btn"],["type","submit",1,"login100-form-btn",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"label",2),r.Nb(3,"b"),r.bc(4,"Email"),r.Mb(),r.Mb(),r.Nb(5,"input",3),r.Tb("ngModelChange",function(t){return e.email=t}),r.Mb(),r.Mb(),r.Nb(6,"div",4),r.Nb(7,"label",5),r.Nb(8,"b"),r.bc(9,"Password"),r.Mb(),r.Mb(),r.Nb(10,"input",6),r.Tb("ngModelChange",function(t){return e.password=t}),r.Mb(),r.Mb(),r.Nb(11,"div",7),r.Nb(12,"button",8),r.Tb("click",function(){return e.login()}),r.bc(13,"Login"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(5),r.Vb("ngModel",e.email),r.Ab(5),r.Vb("ngModel",e.password))},directives:[Ot,_e,Bt,be],styles:["body[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}form[_ngcontent-%COMP%]{border:3px solid #f1f1f1}input[type=password][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#444;color:#fff;padding:14px 20px;margin:8px 0;border:none;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{opacity:.5}.cancelbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#f44336}.container[_ngcontent-%COMP%]{padding:16px}span.psw[_ngcontent-%COMP%]{float:right;padding-top:16px}@media screen and (max-width:300px){span.psw[_ngcontent-%COMP%]{display:block;float:none}.cancelbtn[_ngcontent-%COMP%]{width:100%}}"]}),t})()},{path:"home",component:l_,canActivate:[h_]},{path:"second/:id",component:(()=>{class t{constructor(t){this.router=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ao))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-about"]],decls:9,vars:2,consts:[["role","main",1,"content"],[1,"card",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"h5",3),r.bc(4,"About us"),r.Mb(),r.Nb(5,"p"),r.bc(6,"Here you can provide some text"),r.Mb(),r.Mb(),r.Mb(),r.Nb(7,"a",4),r.bc(8,"Back"),r.Mb(),r.Mb()),2&t&&(r.Ab(7),r.Vb("routerLink",r.Wb(1,d_)))},directives:[jo],styles:[""]}),t})(),canActivate:[h_]},{path:"**",component:Xo}];let g_=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[Bo.forRoot(p_)],Bo]}),t})(),y_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:5,vars:0,consts:[["role","banner",1,"toolbar"],[1,"spacer"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"span"),r.bc(2,"AUXR6I Programrendszerek fejleszt\xe9se nodejs + angular"),r.Mb(),r.Lb(3,"div",1),r.Mb(),r.Lb(4,"router-outlet"))},directives:[No],styles:[""]}),t})(),m_=(()=>{class t{constructor(){}intercept(t,e){return t=t.clone({withCredentials:!0}),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),v_=(()=>{class t{}return t.\u0275mod=r.Ib({type:t,bootstrap:[y_]}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:$e,useClass:m_,multi:!0}],imports:[[ht,g_,cn,Oe,us.a.initializeApp(Zo)]]}),t})();Object(r.T)(),ct().bootstrapModule(v_).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);